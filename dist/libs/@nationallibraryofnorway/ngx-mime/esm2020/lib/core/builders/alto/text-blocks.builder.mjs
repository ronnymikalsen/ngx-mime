import { TextLinesBuilder } from './text-lines.builder';
export class TextBlocksBuilder {
    constructor() {
        this.textLinesBuilder = new TextLinesBuilder();
    }
    withTextBlocksXml(textBlocksXml) {
        this.textBlocksXml = textBlocksXml;
        return this;
    }
    withTextStyles(textStyles) {
        this.textStyles = textStyles;
        return this;
    }
    build() {
        return this.textBlocksXml
            ? this.textBlocksXml.map((textBlock) => {
                const styleRef = textBlock.$.STYLEREFS?.split(' ');
                let textStyle = undefined;
                if (styleRef && this.textStyles) {
                    textStyle = this.textStyles.get(styleRef[0]);
                }
                return {
                    textLines: this.textLinesBuilder
                        .withTextLinesXml(textBlock.TextLine)
                        .build(),
                    textStyle: {
                        fontStyle: textStyle?.fontStyle,
                    },
                };
            })
            : [];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC1ibG9ja3MuYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvbmd4LW1pbWUvc3JjL2xpYi9jb3JlL2J1aWxkZXJzL2FsdG8vdGV4dC1ibG9ja3MuYnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUV4RCxNQUFNLE9BQU8saUJBQWlCO0lBQTlCO1FBQ1UscUJBQWdCLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBbUNwRCxDQUFDO0lBL0JDLGlCQUFpQixDQUFDLGFBQWtCO1FBQ2xDLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWMsQ0FDWixVQUE4QztRQUU5QyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxLQUFLO1FBQ0gsT0FBTyxJQUFJLENBQUMsYUFBYTtZQUN2QixDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFjLEVBQUUsRUFBRTtnQkFDeEMsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuRCxJQUFJLFNBQVMsR0FBRyxTQUFTLENBQUM7Z0JBQzFCLElBQUksUUFBUSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7b0JBQy9CLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDOUM7Z0JBQ0QsT0FBTztvQkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLGdCQUFnQjt5QkFDN0IsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQzt5QkFDcEMsS0FBSyxFQUFFO29CQUNWLFNBQVMsRUFBRTt3QkFDVCxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVM7cUJBQ2hDO2lCQUNGLENBQUM7WUFDSixDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ1QsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGV4dEJsb2NrLCBUZXh0U3R5bGUgfSBmcm9tICcuLi8uLi9hbHRvLXNlcnZpY2UvYWx0by5tb2RlbCc7XG5pbXBvcnQgeyBUZXh0TGluZXNCdWlsZGVyIH0gZnJvbSAnLi90ZXh0LWxpbmVzLmJ1aWxkZXInO1xuXG5leHBvcnQgY2xhc3MgVGV4dEJsb2Nrc0J1aWxkZXIge1xuICBwcml2YXRlIHRleHRMaW5lc0J1aWxkZXIgPSBuZXcgVGV4dExpbmVzQnVpbGRlcigpO1xuICBwcml2YXRlIHRleHRTdHlsZXM6IE1hcDxzdHJpbmcsIFRleHRTdHlsZT4gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgdGV4dEJsb2Nrc1htbDogYW55IHwgdW5kZWZpbmVkO1xuXG4gIHdpdGhUZXh0QmxvY2tzWG1sKHRleHRCbG9ja3NYbWw6IGFueSkge1xuICAgIHRoaXMudGV4dEJsb2Nrc1htbCA9IHRleHRCbG9ja3NYbWw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoVGV4dFN0eWxlcyhcbiAgICB0ZXh0U3R5bGVzOiBNYXA8c3RyaW5nLCBUZXh0U3R5bGU+IHwgdW5kZWZpbmVkXG4gICk6IFRleHRCbG9ja3NCdWlsZGVyIHtcbiAgICB0aGlzLnRleHRTdHlsZXMgPSB0ZXh0U3R5bGVzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYnVpbGQoKTogVGV4dEJsb2NrW10ge1xuICAgIHJldHVybiB0aGlzLnRleHRCbG9ja3NYbWxcbiAgICAgID8gdGhpcy50ZXh0QmxvY2tzWG1sLm1hcCgodGV4dEJsb2NrOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBzdHlsZVJlZiA9IHRleHRCbG9jay4kLlNUWUxFUkVGUz8uc3BsaXQoJyAnKTtcbiAgICAgICAgICBsZXQgdGV4dFN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChzdHlsZVJlZiAmJiB0aGlzLnRleHRTdHlsZXMpIHtcbiAgICAgICAgICAgIHRleHRTdHlsZSA9IHRoaXMudGV4dFN0eWxlcy5nZXQoc3R5bGVSZWZbMF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dExpbmVzOiB0aGlzLnRleHRMaW5lc0J1aWxkZXJcbiAgICAgICAgICAgICAgLndpdGhUZXh0TGluZXNYbWwodGV4dEJsb2NrLlRleHRMaW5lKVxuICAgICAgICAgICAgICAuYnVpbGQoKSxcbiAgICAgICAgICAgIHRleHRTdHlsZToge1xuICAgICAgICAgICAgICBmb250U3R5bGU6IHRleHRTdHlsZT8uZm9udFN0eWxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgOiBbXTtcbiAgfVxufVxuIl19