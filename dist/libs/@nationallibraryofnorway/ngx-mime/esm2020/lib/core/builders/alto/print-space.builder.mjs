import { TextBlocksBuilder } from './text-blocks.builder';
export class PrintSpaceBuilder {
    withPrintSpaceXml(printSpaceXml) {
        this.printSpaceXml = printSpaceXml;
        return this;
    }
    withTextStyles(textStyles) {
        this.textStyles = textStyles;
        return this;
    }
    build() {
        let textBlocks = [];
        if (this.printSpaceXml.$$) {
            textBlocks = this.extractTextBlocks(this.printSpaceXml.$$);
        }
        return {
            textBlocks: new TextBlocksBuilder()
                .withTextBlocksXml(textBlocks)
                .withTextStyles(this.textStyles)
                .build(),
        };
    }
    extractTextBlocks(node) {
        let blocks = [];
        node.forEach((n) => {
            if (this.isTextBlock(n)) {
                blocks = [...blocks, n];
            }
            else if (this.isComposedBlock(n)) {
                if (n.$$) {
                    blocks = [...blocks, ...this.extractTextBlocks(n.$$)];
                }
            }
        });
        return blocks;
    }
    isTextBlock(n) {
        return n['#name'] && n['#name'] === 'TextBlock';
    }
    isComposedBlock(n) {
        return n['#name'] && n['#name'] === 'ComposedBlock';
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQtc3BhY2UuYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvbmd4LW1pbWUvc3JjL2xpYi9jb3JlL2J1aWxkZXJzL2FsdG8vcHJpbnQtc3BhY2UuYnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxNQUFNLE9BQU8saUJBQWlCO0lBSTVCLGlCQUFpQixDQUFDLGFBQWtCO1FBQ2xDLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWMsQ0FDWixVQUE4QztRQUU5QyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxVQUFVLEdBQVUsRUFBRSxDQUFDO1FBRTNCLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUU7WUFDekIsVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzVEO1FBQ0QsT0FBTztZQUNMLFVBQVUsRUFBRSxJQUFJLGlCQUFpQixFQUFFO2lCQUNoQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUM7aUJBQzdCLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO2lCQUMvQixLQUFLLEVBQUU7U0FDWCxDQUFDO0lBQ0osQ0FBQztJQUVPLGlCQUFpQixDQUFDLElBQVM7UUFDakMsSUFBSSxNQUFNLEdBQVUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3ZCLE1BQU0sR0FBRyxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3pCO2lCQUFNLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDbEMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFO29CQUNSLE1BQU0sR0FBRyxDQUFDLEdBQUcsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUN2RDthQUNGO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRU8sV0FBVyxDQUFDLENBQU07UUFDeEIsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLFdBQVcsQ0FBQztJQUNsRCxDQUFDO0lBRU8sZUFBZSxDQUFDLENBQU07UUFDNUIsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLGVBQWUsQ0FBQztJQUN0RCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmludFNwYWNlLCBUZXh0U3R5bGUgfSBmcm9tICcuLi8uLi9hbHRvLXNlcnZpY2UvYWx0by5tb2RlbCc7XG5pbXBvcnQgeyBUZXh0QmxvY2tzQnVpbGRlciB9IGZyb20gJy4vdGV4dC1ibG9ja3MuYnVpbGRlcic7XG5cbmV4cG9ydCBjbGFzcyBQcmludFNwYWNlQnVpbGRlciB7XG4gIHByaXZhdGUgdGV4dFN0eWxlczogTWFwPHN0cmluZywgVGV4dFN0eWxlPiB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBwcmludFNwYWNlWG1sOiBhbnkgfCB1bmRlZmluZWQ7XG5cbiAgd2l0aFByaW50U3BhY2VYbWwocHJpbnRTcGFjZVhtbDogYW55KSB7XG4gICAgdGhpcy5wcmludFNwYWNlWG1sID0gcHJpbnRTcGFjZVhtbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHdpdGhUZXh0U3R5bGVzKFxuICAgIHRleHRTdHlsZXM6IE1hcDxzdHJpbmcsIFRleHRTdHlsZT4gfCB1bmRlZmluZWRcbiAgKTogUHJpbnRTcGFjZUJ1aWxkZXIge1xuICAgIHRoaXMudGV4dFN0eWxlcyA9IHRleHRTdHlsZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBidWlsZCgpOiBQcmludFNwYWNlIHtcbiAgICBsZXQgdGV4dEJsb2NrczogYW55W10gPSBbXTtcblxuICAgIGlmICh0aGlzLnByaW50U3BhY2VYbWwuJCQpIHtcbiAgICAgIHRleHRCbG9ja3MgPSB0aGlzLmV4dHJhY3RUZXh0QmxvY2tzKHRoaXMucHJpbnRTcGFjZVhtbC4kJCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0ZXh0QmxvY2tzOiBuZXcgVGV4dEJsb2Nrc0J1aWxkZXIoKVxuICAgICAgICAud2l0aFRleHRCbG9ja3NYbWwodGV4dEJsb2NrcylcbiAgICAgICAgLndpdGhUZXh0U3R5bGVzKHRoaXMudGV4dFN0eWxlcylcbiAgICAgICAgLmJ1aWxkKCksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdFRleHRCbG9ja3Mobm9kZTogYW55KTogYW55W10ge1xuICAgIGxldCBibG9ja3M6IGFueVtdID0gW107XG4gICAgbm9kZS5mb3JFYWNoKChuOiBhbnkpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVGV4dEJsb2NrKG4pKSB7XG4gICAgICAgIGJsb2NrcyA9IFsuLi5ibG9ja3MsIG5dO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ29tcG9zZWRCbG9jayhuKSkge1xuICAgICAgICBpZiAobi4kJCkge1xuICAgICAgICAgIGJsb2NrcyA9IFsuLi5ibG9ja3MsIC4uLnRoaXMuZXh0cmFjdFRleHRCbG9ja3Mobi4kJCldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGJsb2NrcztcbiAgfVxuXG4gIHByaXZhdGUgaXNUZXh0QmxvY2sobjogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG5bJyNuYW1lJ10gJiYgblsnI25hbWUnXSA9PT0gJ1RleHRCbG9jayc7XG4gIH1cblxuICBwcml2YXRlIGlzQ29tcG9zZWRCbG9jayhuOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gblsnI25hbWUnXSAmJiBuWycjbmFtZSddID09PSAnQ29tcG9zZWRCbG9jayc7XG4gIH1cbn1cbiJdfQ==