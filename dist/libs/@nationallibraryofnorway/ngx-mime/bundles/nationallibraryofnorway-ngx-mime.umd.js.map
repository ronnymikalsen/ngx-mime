{"version":3,"file":"nationallibraryofnorway-ngx-mime.umd.js","sources":["../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.ts","../../../../../node_modules/tslib/tslib.es6.js","../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.no_nb.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.no_nb.ts","../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.lt.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.lt.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-layout.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-mode.ts","../../../../../libs/ngx-mime/src/lib/core/mime-viewer-config.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewing-direction.ts","../../../../../libs/ngx-mime/src/lib/core/models/manifest.ts","../../../../../libs/ngx-mime/src/lib/shared/mime-material.module.ts","../../../../../libs/ngx-mime/src/lib/core/spinner-service/spinner.service.ts","../../../../../libs/ngx-mime/src/lib/shared/shared.module.ts","../../../../../libs/ngx-mime/src/lib/core/fullscreen-service/fullscreen.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/dimensions.ts","../../../../../libs/ngx-mime/src/lib/core/mime-dom-helper.ts","../../../../../libs/ngx-mime/src/lib/core/mime-resize-service/mime-resize.service.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/core/models/hit.ts","../../../../../libs/ngx-mime/src/lib/core/models/rect.ts","../../../../../libs/ngx-mime/src/lib/core/models/search-result.ts","../../../../../libs/ngx-mime/src/lib/core/builders/search-result.builder.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-content-search-service/iiif-content-search.service.ts","../../../../../libs/ngx-mime/src/lib/core/builders/builder-utils.ts","../../../../../libs/ngx-mime/src/lib/core/builders/sizes.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/tiles.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/service.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/resource.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/images.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/canvas.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/sequence.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/metadata.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/structure.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/tile-source.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/manifest.builder.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-service.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/contents-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/contents-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/contents-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/contents-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/strings.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/text-lines.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/text-blocks.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/print-space.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/page.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/layout.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/styles.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/alto.builder.ts","../../../../../libs/ngx-mime/src/lib/core/models/canvas-groups.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/canvas-group.strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/canvas-groups-strategy.factory.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/canvas-service.ts","../../../../../libs/ngx-mime/src/lib/core/alto-service/html.formatter.ts","../../../../../libs/ngx-mime/src/lib/core/alto-service/alto.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/modeChanges.ts","../../../../../libs/ngx-mime/src/lib/core/mode-service/mode.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/AccessKeys.ts","../../../../../libs/ngx-mime/src/lib/core/navigation/content-search-navigation-service/content-search-navigation.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-options.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/calculate-canvas-group-position-utils.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/one-page-calculate-page-position-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/two-page-calculate-page-position-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/calculate-canvas-group-position-factory.ts","../../../../../libs/ngx-mime/src/lib/core/click-service/click.service.ts","../../../../../libs/ngx-mime/src/lib/core/ext/svg-overlay.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-utils.ts","../../../../../libs/ngx-mime/src/lib/core/models/pinchStatus.ts","../../../../../libs/ngx-mime/src/lib/core/models/side.ts","../../../../../libs/ngx-mime/src/lib/core/style-service/style.service.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-layout-service/viewer-layout-service.ts","../../../../../libs/ngx-mime/src/lib/core/models/direction.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/navigator-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/dashboard-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/page-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/page-zoomed-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/calculate-next-canvas-group-factory.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/canvas-group-mask.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/go-to-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/options.factory.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/swipe-drag-end-counter.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/swipe-utils.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/iiif-tile-source-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/static-image-tile-source-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/tile-source-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/core/utils.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/zoom-utils.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/zoom-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/viewer.service.ts","../../../../../libs/ngx-mime/src/lib/core/access-keys-handler-service/access-keys.service.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog-resize.service.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.module.ts","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.module.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.module.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/metadata/metadata.component.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/table-of-contents/table-of-contents.component.ts","../../../../../libs/ngx-mime/src/lib/contents-dialog/contents-dialog.module.ts","../../../../../libs/ngx-mime/src/lib/core/core.module.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.module.ts","../../../../../libs/ngx-mime/src/lib/viewer/osd-toolbar/osd-toolbar.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/recognized-text-content/recognized-text-content.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/viewer-footer.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-header/icon/icon.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-header/viewer-header.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-spinner/viewer-spinner.component.ts","../../../../../libs/ngx-mime/src/lib/core/models/content-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/contents-search-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/help-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewerState.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer.component.ts","../../../../../libs/ngx-mime/src/lib/ngx-mime.module.ts","../../../../../libs/ngx-mime/src/nationallibraryofnorway-ngx-mime.ts"],"sourcesContent":["export class HelpIntl {\n  helpLabel = 'Help';\n  line1 = '<strong>ARROW LEFT</strong> or <strong>PAGE UP</strong>: Previous page';\n  line2 = '<strong>ARROW RIGHT</strong> or <strong>PAGE DOWN</strong>: Next page';\n  line3 = '<strong>HOME</strong>: Go to first page';\n  line4 = '<strong>END</strong>: Go to last page';\n  line5 = '<strong>C</strong>: Contents window with more information/metadata about the object. (Close with <strong>ESC</strong>.)';\n  line6 = '<strong>S</strong>: Search inside the object. (Close with <strong>ESC</strong>.)';\n  line7 = '<strong>N</strong>: Next result';\n  line8 = '<strong>P</strong>: Previous result';\n  line9 = '<strong>F</strong>: Fullscreen on/off (Close with <strong>F</strong> or <strong>ESC</strong>.)';\n  line10 = '<strong>R</strong>: Rotate 90°';\n  line11 = '<strong>T</strong>:  Show/hide optically recognized text (for content that can be displayed).';\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { HelpIntl } from './help-intl';\n\n@Injectable()\nexport class MimeViewerIntl {\n  changes: Subject<void> = new Subject<void>();\n\n  help: HelpIntl = new HelpIntl();\n  closeLabel = 'Close';\n  attributionLabel = 'Attribution';\n  attributonCloseAriaLabel = 'Close attribution dialog';\n  recognizedTextContentLabel = 'Recognized text';\n  contentsLabel = 'Contents';\n  twoPageViewLabel = 'Two page display';\n  singlePageViewLabel = 'Single page display';\n  metadataLabel = 'Metadata';\n  licenseLabel = 'License';\n  tocLabel = 'Table of Contents';\n  fullScreenLabel = 'Full screen';\n  exitFullScreenLabel = 'Exit full screen';\n  zoomInLabel = 'Zoom in';\n  zoomOutLabel = 'Zoom out';\n  previousPageLabel = 'Previous Page';\n  nextPageLabel = 'Next Page';\n  homeLabel = 'Go Home';\n  rotateCwLabel = 'Rotate 90°';\n  searchLabel = 'Search';\n  clearSearchLabel = 'Clear';\n  previousHitLabel = 'Previous Hit';\n  nextHitLabel = 'Next Hit';\n  goToPageLabel = 'Go to page';\n  currentPageLabel = 'Current page';\n  enterPageNumber = 'Enter page number';\n  dropDisabled = 'Sorry, but drag and drop is disabled';\n  loading = 'Loading ...';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Oh dear, something has gone terribly wrong...';\n  manifestUriMissingLabel = 'ManifestUri is missing';\n  manifestNotValidLabel = 'Manifest is not valid';\n  pageDoesNotExists = 'Sorry, that page does not exist';\n  textContentErrorLabel = 'Oh dear, i can\\'t find the text for you';\n\n  noResultsFoundLabel = (q: string) => {\n    return `No results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} of ${numberOfHits} hits`;\n  };\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlNoNb extends HelpIntl {\n  helpLabel = 'Hjelp';\n  line1 = '<strong>PIL VENSTRE</strong> eller <strong>PAGE UP</strong>: Gå til forrige side';\n  line2 = '<strong>PIL HØYRE</strong> eller <strong>PAGE DOWN</strong>: Gå til neste side';\n  line3 = '<strong>HOME</strong>: Gå til første side';\n  line4 = '<strong>END</strong>: Gå til siste side';\n  line5 = '<strong>C</strong>: Slår innholdsfanen på, og viser mer informasjon/metadata om objektet. (Lukk med <strong>ESC</strong>-tasten.)';\n  line6 = '<strong>S</strong>: Åpner søkefeltet for søk i objektet. (Lukk med <strong>ESC</strong>-tasten.)';\n  line7 = '<strong>N</strong>: Går til neste treff i objektet';\n  line8 = '<strong>P</strong>: Går til forrige treff i objektet';\n  line9 = '<strong>F</strong>: Fullskjerm av og på (Lukk med <strong>F</strong> eller <strong>ESC</strong>-tasten.)';\n  line10 = '<strong>R</strong>: Rotér 90°';\n  line11 = '<strong>T</strong>: Vis/skjul optisk gjenkjent tekst (for innhold som kan vises).';\n}\n\n","import { Injectable } from '@angular/core';\nimport { MimeViewerIntl } from './viewer-intl';\nimport { HelpIntlNoNb } from './help-intl.no_nb';\n\n@Injectable()\nexport class MimeViewerIntlNoNb extends MimeViewerIntl {\n  help = new HelpIntlNoNb();\n  closeLabel = 'Lukk';\n  attributionLabel = 'Tillatelse';\n  attributonCloseAriaLabel = 'Steng tillatelse dialog';\n  recognizedTextContentLabel = 'Gjenkjent tekst';\n  contentsLabel = 'Innhold';\n  twoPageViewLabel = 'Tosidevisning';\n  singlePageViewLabel = 'Enkeltsidevisning';\n  metadataLabel = 'Metadata';\n  licenseLabel = 'Lisens';\n  tocLabel = 'Innholdsfortegnelse';\n  fullScreenLabel = 'Fullskjerm';\n  exitFullScreenLabel = 'Avslutt fullskjerm';\n  zoomInLabel = 'Zoom inn';\n  zoomOutLabel = 'Zoom ut';\n  previousPageLabel = 'Forrige side';\n  nextPageLabel = 'Neste side';\n  homeLabel = 'Hjem';\n  rotateCwLabel = 'Rotér 90°';\n  searchLabel = 'Søk';\n  clearSearchLabel = 'Tøm';\n  previousHitLabel = 'Forrige treff';\n  nextHitLabel = 'Neste treff';\n  goToPageLabel = 'Gå til side';\n  currentPageLabel = 'Nåværende side';\n  enterPageNumber = 'Skriv inn sidenummer';\n  dropDisabled = 'Beklager, men drag and drop er ikke aktivert';\n  loading = 'Laster ...';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Å nei! Noe har gått galt...';\n  manifestUriMissingLabel = 'Lenke til manifest mangler';\n  manifestNotValidLabel = 'Manifestet er ikke gyldig';\n  pageDoesNotExists = 'Beklager, men den siden finnes ikke';\n  textContentErrorLabel = 'Beklager, men jeg finner ikke teksten for deg';\n\n  noResultsFoundLabel = (q: string) => {\n    return `Ingen treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} av ${numberOfHits} treff`;\n  };\n}\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlLt extends HelpIntl {\n  helpLabel = 'Pagalba';\n  line1 =\n    '<strong>RODYKLĖ KAIRĖN</strong> arba <strong>PAGE UP</strong>: Buvęs puslapis';\n  line2 =\n    '<strong>RODYKLĖ DEŠINĖN</strong> arba <strong>PAGE DOWN</strong>: Kitas puslapis';\n  line3 = '<strong>HOME</strong>: Pirmas puslapis';\n  line4 = '<strong>END</strong>: Paskutinis puslapis';\n  line5 =\n    '<strong>C</strong>: Turinio langas su daugiau informacijos apie objektą. (Uždaromas paspaudus <strong>ESC</strong>.)';\n  line6 =\n    '<strong>S</strong>: Paieška objekto viduje. (Uždaroma paspaudus <strong>ESC</strong>.)';\n  line7 = '<strong>N</strong>: Kitas rezultatas';\n  line8 = '<strong>P</strong>: Buvęs rezultatas';\n  line9 =\n    '<strong>F</strong>: Pilno ekrano režimas (Uždaroma paspaudus <strong>F</strong> arba <strong>ESC</strong>.)';\n  line10 = '<strong>R</strong>: Pasukti 90 laipsnių';\n  line11 = '<strong>T</strong>:  Rodyti/slėpti optiškai atpažįstamą tekstą (turiniui, kurį galima rodyti).';\n}\n","import { Injectable } from '@angular/core';\nimport { MimeViewerIntl } from './viewer-intl';\nimport { HelpIntlLt } from './help-intl.lt';\n\n@Injectable()\nexport class MimeViewerIntlLt extends MimeViewerIntl {\n  help = new HelpIntlLt();\n  closeLabel = 'Uždaryti';\n  attributionLabel = 'Teisių priskyrimas';\n  attributonCloseAriaLabel = 'Uždaryti teisių priskyrimo langą';\n  recognizedTextContentLabel = 'Atpazīts teksts';\n  contentsLabel = 'Informacija apie objektą';\n  twoPageViewLabel = 'Atvaizduoti po du puslapius';\n  singlePageViewLabel = 'Atvaizduoti po vieną puslapį';\n  metadataLabel = 'Metaduomenys';\n  licenseLabel = 'Licencija';\n  tocLabel = 'Turinys';\n  fullScreenLabel = 'Pilno ekrano režimas';\n  exitFullScreenLabel = 'Išeiti iš pilno ekrano režimo';\n  zoomInLabel = 'Priartinti';\n  zoomOutLabel = 'Atitolinti';\n  previousPageLabel = 'Buvęs puslapis';\n  nextPageLabel = 'Kitas puslapis';\n  homeLabel = 'Grįžti į pradžią';\n  rotateCwLabel = 'Pasukti 90°';\n  searchLabel = 'Paieška';\n  clearSearchLabel = 'Išvalyti';\n  previousHitLabel = 'Buvęs rezultatas';\n  nextHitLabel = 'Kitas rezultatas';\n  goToPageLabel = 'Persikelti į puslapį';\n  currentPageLabel = 'Dabartinis puslapis';\n  enterPageNumber = 'Įveskite puslapio numerį';\n  dropDisabled = 'Atleiskite, bet veiksmas negalimas';\n  loading = 'Pakrovimas ...';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Objekto atvaizduoti nepavyko...';\n  manifestUriMissingLabel = 'Nerastas objektų sąrašo identifikatorius (ManifestUri)';\n  manifestNotValidLabel = 'Netinkamas objektų sąrašas (Manifest)';\n  pageDoesNotExists = 'Nepavyko rasti šio paslapio';\n  textContentErrorLabel = 'Atsiprašau, bet nerandu jums teksto';\n\n  noResultsFoundLabel = (q: string) => {\n    return `Objekte nerasta atitikmenų <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} rezultata${numberOfHits === 1 ? 's' : 'i'} su <em class=\"current-search\">${q}</em>`;\n  };\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} iš ${numberOfHits} atitikmenų`;\n  };\n}\n","export enum ViewerLayout {\n  ONE_PAGE,\n  TWO_PAGE\n}\n","export enum ViewerMode {\n  DASHBOARD,\n  PAGE,\n  PAGE_ZOOMED,\n  NAVIGATOR,\n}\n","import { ViewerLayout } from './models/viewer-layout';\nimport { ViewerMode } from './models/viewer-mode';\n\nexport class MimeViewerConfig {\n  public attributionDialogEnabled? = true;\n  public attributionDialogHideTimeout? = -1;\n  public navigationControlEnabled? = true;\n  public initViewerMode = ViewerMode.PAGE;\n  public initViewerLayout = ViewerLayout.TWO_PAGE;\n  public withCredentials = false;\n  public loadTilesWithAjax = false;\n  public crossOriginPolicy: 'Anonymous' | 'use-credentials' | false | undefined = false;\n  public ajaxHeaders: any = null;\n  public preserveZoomOnCanvasGroupChange = false;\n  public startOnTopOnCanvasGroupChange = false;\n  public isDropEnabled = false;\n  public initRecognizedTextContentToggle = false;\n\n  constructor(fields?: {\n    attributionDialogEnabled?: boolean;\n    attributionDialogHideTimeout?: number;\n    navigationControlEnabled?: boolean;\n    initViewerMode?: ViewerMode;\n    initViewerLayout?: ViewerLayout;\n    withCredentials?: boolean;\n    loadTilesWithAjax?: boolean;\n    crossOriginPolicy?: 'Anonymous' | 'use-credentials' | false | undefined;\n    ajaxHeaders?: any;\n    preserveZoomOnCanvasGroupChange?: boolean;\n    startOnTopOnCanvasGroupChange?: boolean;\n    isDropEnabled?: boolean;\n    initRecognizedTextContentToggle?: boolean;\n  }) {\n    if (fields) {\n      this.attributionDialogEnabled =\n        fields.attributionDialogEnabled !== undefined\n          ? fields.attributionDialogEnabled\n          : this.attributionDialogEnabled;\n\n      this.attributionDialogHideTimeout =\n        fields.attributionDialogHideTimeout ||\n        this.attributionDialogHideTimeout;\n\n      this.navigationControlEnabled =\n        fields.navigationControlEnabled !== undefined\n          ? fields.navigationControlEnabled\n          : this.navigationControlEnabled;\n\n      this.initViewerMode =\n        fields.initViewerMode !== undefined\n          ? fields.initViewerMode\n          : this.initViewerMode;\n\n      this.initViewerLayout =\n        fields.initViewerLayout !== undefined\n          ? fields.initViewerLayout\n          : this.initViewerLayout;\n\n      this.withCredentials =\n        fields.withCredentials !== undefined\n          ? fields.withCredentials\n          : this.withCredentials;\n\n      this.loadTilesWithAjax =\n        fields.loadTilesWithAjax !== undefined\n          ? fields.loadTilesWithAjax\n          : this.loadTilesWithAjax;\n\n      this.crossOriginPolicy =\n        fields.crossOriginPolicy !== undefined\n          ? fields.crossOriginPolicy\n          : this.crossOriginPolicy;\n\n      this.ajaxHeaders =\n        fields.ajaxHeaders !== undefined\n          ? fields.ajaxHeaders\n          : this.ajaxHeaders;\n\n      this.preserveZoomOnCanvasGroupChange =\n        fields.preserveZoomOnCanvasGroupChange !== undefined\n          ? fields.preserveZoomOnCanvasGroupChange\n          : this.preserveZoomOnCanvasGroupChange;\n\n      this.startOnTopOnCanvasGroupChange =\n        fields.startOnTopOnCanvasGroupChange !== undefined\n          ? fields.startOnTopOnCanvasGroupChange\n          : this.startOnTopOnCanvasGroupChange;\n\n      this.isDropEnabled =\n        fields.isDropEnabled !== undefined\n          ? fields.isDropEnabled\n          : this.isDropEnabled;\n\n      this.initRecognizedTextContentToggle =\n        fields.initRecognizedTextContentToggle !== undefined\n          ? fields.initRecognizedTextContentToggle\n          : this.initRecognizedTextContentToggle;\n    }\n  }\n}\n","export enum ViewingDirection {\n  LTR,\n  RTL\n}\n","import { ViewingDirection } from './viewing-direction';\n\nexport class Manifest {\n  public context?: string;\n  public type?: string;\n  public id?: string;\n  public viewingDirection = ViewingDirection.LTR;\n  public label = '';\n  public metadata?: Metadata[];\n  public license?: string;\n  public logo?: string;\n  public attribution?: string;\n  public service?: Service;\n  public sequences?: Sequence[];\n  public structures?: Structure[] = [];\n  public tileSource?: Resource[];\n  public viewingHint?: string;\n\n  constructor(fields?: {\n    context?: string;\n    type?: string;\n    id?: string;\n    viewingDirection?: ViewingDirection;\n    label?: string;\n    metadata?: Metadata[];\n    license?: string;\n    logo?: string;\n    attribution?: string;\n    service?: Service;\n    sequences?: Sequence[];\n    structures?: Structure[];\n    tileSource?: Resource[];\n    viewingHint?: string;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.type = fields.type || this.type;\n      this.id = fields.id || this.id;\n      this.viewingDirection = fields.viewingDirection || this.viewingDirection;\n      this.label = fields.label || this.label;\n      this.metadata = fields.metadata || this.metadata;\n      this.license = fields.license || this.license;\n      this.logo = fields.logo || this.logo;\n      this.attribution = fields.attribution || this.attribution;\n      this.service = fields.service || this.service;\n      this.sequences = fields.sequences || this.sequences;\n      this.structures = fields.structures || this.structures;\n      this.tileSource = fields.tileSource || this.tileSource;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n    }\n  }\n}\n\nexport class Metadata {\n  constructor(public label: string, public value: string | number) {}\n}\n\nexport class Sequence {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public viewingHint?: string;\n  public canvases?: Canvas[];\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    viewingHint?: string;\n    canvases?: Canvas[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n      this.canvases = fields.canvases || this.canvases;\n    }\n  }\n}\n\nexport class Canvas {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public thumbnail?: string;\n  public height?: number;\n  public width?: number;\n  public images?: Images[];\n  public altoUrl?: string;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    thumbnail?: string;\n    height?: number;\n    width?: number;\n    images?: Images[];\n    altoUrl?: string;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.thumbnail = fields.thumbnail || this.thumbnail;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n      this.images = fields.images || this.images;\n      this.altoUrl = fields.altoUrl || this.altoUrl;\n    }\n  }\n}\n\nexport class Images {\n  public id?: string;\n  public type?: string;\n  public motivation?: string;\n  public resource?: Resource;\n  public on?: string;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    motivation?: string;\n    resource?: Resource;\n    on?: string;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.motivation = fields.motivation || this.motivation;\n      this.resource = fields.resource || this.resource;\n      this.on = fields.on || this.on;\n    }\n  }\n}\n\nexport class Resource {\n  public id?: string;\n  public type?: string;\n  public format?: string;\n  public service?: Service;\n  public height = 0;\n  public width = 0;\n  public tileOverlap = 0;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    format?: string;\n    service?: Service;\n    height?: number;\n    width?: number;\n    tileOverlap?: number;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.format = fields.format || this.format;\n      this.service = fields.service || this.service;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n      this.tileOverlap = fields.tileOverlap || this.tileOverlap;\n    }\n  }\n}\n\nexport class Service {\n  public context?: string;\n  public id?: string;\n  public protocol?: string;\n  public width = 0;\n  public height = 0;\n  public sizes?: Size[];\n  public tiles?: Tile[];\n  public profile?: string;\n  public physicalScale?: number;\n  public physicalUnits?: string;\n  public service?: Service;\n\n  constructor(fields?: {\n    context?: string;\n    id?: string;\n    protocol?: string;\n    width?: number;\n    height?: number;\n    sizes?: Size[];\n    tiles?: Tile[];\n    profile?: string;\n    physicalScale?: number;\n    physicalUnits?: string;\n    service?: Service;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.id = fields.id || this.id;\n      this.protocol = fields.protocol || this.protocol;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.sizes = fields.sizes || this.sizes;\n      this.tiles = fields.tiles || this.tiles;\n      this.profile = fields.profile || this.profile;\n      this.physicalScale = fields.physicalScale || this.physicalScale;\n      this.physicalUnits = fields.physicalUnits || this.physicalUnits;\n      this.service = fields.service || this.service;\n    }\n  }\n}\n\nexport class Size {\n  constructor(public width: number, public height: number) {}\n}\n\nexport class Tile {\n  public width?: number;\n  public scaleFactors?: number[];\n\n  constructor(fields?: { width?: number; scaleFactors?: number[] }) {\n    if (fields) {\n      this.width = fields.width || this.width;\n      this.scaleFactors = fields.scaleFactors || this.scaleFactors;\n    }\n  }\n}\n\nexport class Structure {\n  public id?: string;\n  public type = '';\n  public label?: string;\n  public canvases: string[] = [];\n  public canvasIndex = 0;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    canvases?: string[];\n    canvasIndex: number;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.canvases = fields.canvases || this.canvases;\n      this.canvasIndex = fields.canvasIndex;\n    }\n  }\n}\n\nexport class TileSource {}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n@NgModule({\n  exports: [\n    MatToolbarModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatDialogModule,\n    MatTabsModule,\n    MatListModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatInputModule,\n    MatProgressBarModule,\n    MatCardModule,\n    MatSnackBarModule,\n    MatSidenavModule,\n  ],\n})\nexport class MimeMaterialModule {}\n","import { Injectable, Optional, SkipSelf } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs';\n\nexport interface SpinnerState {\n  show: boolean;\n}\n\n@Injectable()\nexport class SpinnerService {\n  private spinnerSubject = new Subject<SpinnerState>();\n  public spinnerState = this.spinnerSubject.asObservable();\n\n  constructor() {}\n\n  show() {\n    this.spinnerSubject.next(<SpinnerState>{ show: true });\n  }\n\n  hide() {\n    this.spinnerSubject.next(<SpinnerState>{ show: false });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { FlexLayoutModule } from '@angular/flex-layout';\n\nimport { MimeMaterialModule } from './mime-material.module';\nimport { SpinnerService } from '../core/spinner-service/spinner.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FlexLayoutModule,\n    MimeMaterialModule\n  ],\n  exports: [\n    CommonModule,\n    FlexLayoutModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MimeMaterialModule\n  ],\n  providers: [SpinnerService]\n})\nexport class SharedModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\n@Injectable()\nexport class FullscreenService {\n  private changeSubject: ReplaySubject<boolean> = new ReplaySubject();\n\n  constructor() {\n    this.onchange();\n  }\n\n  get onChange(): Observable<boolean> {\n    return this.changeSubject.asObservable();\n  }\n\n  public isEnabled(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenEnabled ||\n      d.webkitFullscreenEnabled ||\n      d.mozFullScreenEnabled ||\n      d.msFullscreenEnabled\n    );\n  }\n\n  public isFullscreen(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenElement ||\n      d.webkitFullscreenElement ||\n      d.mozFullScreenElement ||\n      d.msFullscreenElement\n    );\n  }\n\n  public toggle(el: HTMLElement) {\n    this.isFullscreen() ? this.closeFullscreen(el) : this.openFullscreen(el);\n  }\n\n  public onchange() {\n    const d: any = document;\n\n    const func = () => {\n      this.changeSubject.next(true);\n    };\n\n    if (d.fullscreenEnabled) {\n      document.addEventListener('fullscreenchange', func);\n    } else if (d.webkitFullscreenEnabled) {\n      document.addEventListener('webkitfullscreenchange', func);\n    } else if (d.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', func);\n    } else if (d.msFullscreenEnabled) {\n      document.addEventListener('msfullscreenchange', func);\n    }\n  }\n\n  private openFullscreen(elem: any) {\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      elem.msRequestFullscreen();\n    }\n  }\n\n  private closeFullscreen(elem: any) {\n    const d = <any>document;\n    if (d.exitFullscreen) {\n      d.exitFullscreen();\n    } else if (d.mozCancelFullScreen) {\n      d.mozCancelFullScreen();\n    } else if (d.webkitExitFullscreen) {\n      d.webkitExitFullscreen();\n    } else if (d.msExitFullscreen) {\n      d.msExitFullscreen();\n    }\n  }\n}\n","export class Dimensions {\n  bottom = 0;\n  height = 0;\n  left = 0;\n  right = 0;\n  top = 0;\n  width = 0;\n\n  constructor(fields?: {\n    bottom?: number;\n    height?: number;\n    left?: number;\n    right?: number;\n    top?: number;\n    width?: number;\n  }) {\n    if (fields) {\n      this.bottom = fields.bottom || this.bottom;\n      this.height = fields.height || this.height;\n      this.left = fields.left || this.left;\n      this.right = fields.right || this.right;\n      this.top = fields.top || this.top;\n      this.width = fields.width || this.width;\n    }\n  }\n}\n","import { FullscreenService } from './fullscreen-service/fullscreen.service';\nimport { Dimensions } from './models/dimensions';\nimport { ElementRef, Injectable } from '@angular/core';\n\n@Injectable()\nexport class MimeDomHelper {\n  constructor(private fullscreen: FullscreenService) {}\n\n  public getBoundingClientRect(el: ElementRef): Dimensions {\n    try {\n      if (\n        this.isDocumentInFullScreenMode() &&\n        el.nativeElement.nodeName === 'MIME-VIEWER'\n      ) {\n        return this.createFullscreenDimensions(el);\n      } else {\n        return this.createDimensions(el);\n      }\n    } catch (e) {\n      return new Dimensions();\n    }\n  }\n\n  public isDocumentInFullScreenMode(): boolean {\n    return this.fullscreen.isFullscreen();\n  }\n\n  public toggleFullscreen(): void {\n    const el = <any>document.getElementById('ngx-mime-mimeViewer');\n    if (this.fullscreen.isEnabled()) {\n      this.fullscreen.toggle(el);\n    }\n  }\n\n  public setFocusOnViewer(): void {\n    const el: HTMLElement | null = document.getElementById('ngx-mime-mimeViewer');\n    if (el) {\n      el.focus();\n    }\n  }\n\n  private createFullscreenDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    const width = this.getFullscreenWidth();\n    const height = this.getFullscreenHeight();\n    return new Dimensions({\n      ...dimensions,\n      top: 0,\n      bottom: height,\n      width: width,\n      height: height,\n      left: 0,\n      right: width\n    });\n  }\n\n  private createDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    return new Dimensions({\n      top: dimensions.top,\n      bottom: dimensions.bottom,\n      width: dimensions.width,\n      height: dimensions.height,\n      left: dimensions.left,\n      right: dimensions.right\n    });\n  }\n\n  private getFullscreenWidth(): number {\n    return (\n      window.innerWidth ||\n      document.documentElement.clientWidth ||\n      document.body.clientWidth\n    );\n  }\n\n  private getFullscreenHeight(): number {\n    return (\n      window.innerHeight ||\n      document.documentElement.clientHeight ||\n      document.body.clientHeight\n    );\n  }\n}\n","import { Injectable, ElementRef } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { MimeDomHelper } from '../mime-dom-helper';\nimport { Dimensions } from '../models/dimensions';\n\n@Injectable()\nexport class MimeResizeService {\n  private _el!: ElementRef;\n  private resizeSubject: ReplaySubject<Dimensions> = new ReplaySubject();\n  private dimensions = new Dimensions();\n\n  constructor(private mimeDomHelper: MimeDomHelper) {}\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  get el() {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.asObservable();\n  }\n\n  markForCheck(): void {\n    if (!this.el) {\n      throw new Error('No element!')\n    }\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n\n    if (\n      this.dimensions.bottom !== dimensions.bottom ||\n      this.dimensions.height !== dimensions.height ||\n      this.dimensions.left !== dimensions.left ||\n      this.dimensions.right !== dimensions.right ||\n      this.dimensions.top !== dimensions.top ||\n      this.dimensions.width !== dimensions.width\n    ) {\n      this.dimensions = dimensions;\n      this.resizeSubject.next({ ...this.dimensions });\n    }\n  }\n}\n","import { MimeDomHelper } from './../core/mime-dom-helper';\nimport { ElementRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface ContentSearchDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef | null): MatDialogConfig;\n}\n\nexport class MobileContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'content-search-panel'\n    };\n  }\n}\n\nexport class DesktopContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: `${DesktopContentSearchDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'content-search-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopContentSearchDialogConfigStrategy.dialogWidth -\n        DesktopContentSearchDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  ContentSearchDialogConfigStrategy,\n  DesktopContentSearchDialogConfigStrategy,\n  MobileContentSearchDialogConfigStrategy\n} from './content-search-dialog-config-strategy';\n\n@Injectable()\nexport class ContentSearchDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ContentSearchDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n      ? new MobileContentSearchDialogConfigStrategy()\n      : new DesktopContentSearchDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { Rect } from './rect';\n\nexport class Hit {\n  public id = 0;\n  public index = 0;\n  public label = '';\n  public match = '';\n  public before = '';\n  public after = '';\n  public rects: Rect[] = [];\n\n  constructor(fields?: {\n    id?: number;\n    index?: number;\n    label?: string;\n    match?: string;\n    before?: string;\n    after?: string;\n    rects?: Rect[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.index = fields.index || this.index;\n      this.label = fields.label || this.label;\n      this.match = fields.match || this.match;\n      this.before = fields.before || this.before;\n      this.after = fields.after || this.after;\n      this.rects = fields.rects || this.rects;\n    }\n  }\n}\n","export class Rect {\n  public x = 0;\n  public y = 0;\n  public width = 0;\n  public height = 0;\n  public centerX = 0;\n  public centerY = 0;\n\n  constructor(fields?: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n  }) {\n    if (fields) {\n      this.x = fields.x || this.x;\n      this.y = fields.y || this.y;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.centerX = this.x + this.width / 2;\n      this.centerY = this.y + this.height / 2;\n    }\n  }\n}\n","import { Hit } from './hit';\n\nexport class SearchResult {\n  public q = '';\n  public hits: Hit[] = [];\n\n  constructor(fields?: { q?: string; hits?: Hit[] }) {\n    if (fields) {\n      this.q = fields.q || this.q;\n      this.hits = fields.hits || this.hits;\n    }\n  }\n\n  public add(hit: Hit): void {\n    this.hits.push(hit);\n  }\n\n  public get(index: number): Hit {\n    return new Hit({\n      ...this.hits[index]\n    });\n  }\n\n  public size(): number {\n    return this.hits.length;\n  }\n\n  public last(): Hit {\n    return this.get(this.size() - 1);\n  }\n}\n","import { Hit } from './../models/hit';\nimport {\n  Hit as IiifHit,\n  IiifSearchResult,\n  Resource as IiifResource,\n} from './../models/iiif-search-result';\nimport { Canvas, Manifest, Sequence } from './../models/manifest';\nimport { Rect } from './../models/rect';\nimport { SearchResult } from './../models/search-result';\n\nexport class SearchResultBuilder {\n  constructor(\n    private q: string,\n    private manifest: Manifest,\n    private iiifSearchResult: IiifSearchResult\n  ) {}\n\n  public build(): SearchResult {\n    const searchResult = new SearchResult();\n    searchResult.q = this.q;\n    if (this.iiifSearchResult && this.iiifSearchResult.hits) {\n      this.iiifSearchResult.hits.forEach((hit: IiifHit, index: number) => {\n        const id: number = index;\n        let canvasIndex = -1;\n        let label;\n        const rects: Rect[] = [];\n        if (this.manifest.sequences && this.manifest.sequences[0].canvases) {\n          const resources = this.findResources(hit);\n          for (const resource of resources) {\n            canvasIndex = this.findSequenceIndex(resource);\n            label = this.findLabel(canvasIndex);\n            const on = resource.on;\n            if (on) {\n              const coords = on.substring(on.indexOf('=') + 1).split(',');\n              const rect = new Rect({\n                x: parseInt(coords[0], 10),\n                y: parseInt(coords[1], 10),\n                width: parseInt(coords[2], 10),\n                height: parseInt(coords[3], 10),\n              });\n              rects.push(rect);\n            }\n          }\n        }\n\n        searchResult.add(\n          new Hit({\n            id: id,\n            index: canvasIndex,\n            label: label,\n            match: hit.match,\n            before: hit.before,\n            after: hit.after,\n            rects: rects,\n          })\n        );\n      });\n    }\n    return searchResult;\n  }\n\n  private findResources(hit: IiifHit): IiifResource[] {\n    const resources: IiifResource[] = [];\n    if (hit.annotations) {\n      for (const annotation of hit.annotations) {\n        if (this.iiifSearchResult.resources) {\n          const res = this.iiifSearchResult.resources.find(\n            (r: IiifResource) => r['@id'] === annotation\n          );\n          if (res) {\n            resources.push(res);\n          }\n        }\n      }\n    }\n    return resources;\n  }\n\n  private findSequenceIndex(resource: IiifResource): number {\n    if (!this.manifest.sequences) {\n      throw new Error('No sequences found!');\n    }\n    const firstSequence = this.getFirstSequence();\n    const on = resource.on;\n    if (on && firstSequence && firstSequence.canvases) {\n      const id = on.substring(0, on.indexOf('#'));\n      return firstSequence.canvases.findIndex((c) => c.id === id);\n    }\n    return -1;\n  }\n\n  private findLabel(index: number): string | undefined {\n    if (index === -1) {\n      return undefined;\n    } else {\n      const canvas = this.getFirstSequenceCanvas(index);\n      return canvas ? canvas.label : undefined;\n    }\n  }\n\n  private getFirstSequence(): Sequence | undefined {\n    const sequences = this.manifest.sequences;\n    return sequences ? sequences[0] : undefined;\n  }\n\n  private getFirstSequenceCanvas(index: number): Canvas | undefined {\n    const firstSequence = this.getFirstSequence();\n    return firstSequence && firstSequence.canvases !== undefined\n      ? firstSequence.canvases[index]\n      : undefined;\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, Subject, throwError } from 'rxjs';\nimport { distinctUntilChanged, finalize, take } from 'rxjs/operators';\nimport { SearchResultBuilder } from './../builders/search-result.builder';\nimport { Hit } from './../models/hit';\nimport { IiifSearchResult } from './../models/iiif-search-result';\nimport { Manifest } from './../models/manifest';\nimport { SearchResult } from './../models/search-result';\n\n@Injectable()\nexport class IiifContentSearchService {\n  protected _currentSearchResult: Subject<SearchResult> = new BehaviorSubject<SearchResult>(\n    new SearchResult({})\n  );\n  protected _searching = new BehaviorSubject<boolean>(false);\n  protected _currentQ = new BehaviorSubject<string>('');\n  protected _selected = new BehaviorSubject<Hit | null>(null);\n\n  constructor(private http: HttpClient) {}\n\n  destroy() {\n    this._currentSearchResult.next(new SearchResult({}));\n    this._selected.next(null);\n  }\n\n  get onQChange(): Observable<string> {\n    return this._currentQ.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onChange(): Observable<SearchResult> {\n    return this._currentSearchResult.asObservable();\n  }\n\n  get isSearching(): Observable<boolean> {\n    return this._searching.asObservable();\n  }\n\n  get onSelected(): Observable<Hit | null> {\n    return this._selected.asObservable();\n  }\n\n  public search(manifest: Manifest, q: string): void {\n    this._currentQ.next(q);\n    this._selected.next(null);\n\n    if (q.length === 0) {\n      this._currentSearchResult.next(new SearchResult());\n      return;\n    }\n    if (!manifest.service || manifest.service === null) {\n      return;\n    }\n    this._searching.next(true);\n    this.http\n      .get(`${manifest.service.id}?q=${q}`)\n      .pipe(\n        finalize(() => this._searching.next(false)),\n        take(1)\n      )\n      .subscribe(\n        (res: IiifSearchResult) =>\n          this._currentSearchResult.next(this.extractData(q, manifest, res)),\n        (err: HttpErrorResponse) => this.handleError\n      );\n  }\n\n  public selected(hit: Hit) {\n    this._selected.next(hit);\n  }\n\n  private extractData(\n    q: string,\n    manifest: Manifest,\n    iiifSearchResult: IiifSearchResult\n  ): SearchResult {\n    return new SearchResultBuilder(q, manifest, iiifSearchResult).build();\n  }\n\n  private handleError(err: HttpErrorResponse | any) {\n    let errMsg: string;\n    if (err.error instanceof Error) {\n      errMsg = err.error.message;\n    } else {\n      errMsg = err.error;\n    }\n    return throwError(errMsg);\n  }\n}\n","import { Canvas, Sequence } from '../models/manifest';\nimport { ViewingDirection } from '../models/viewing-direction';\n\nexport class BuilderUtils {\n  static extractId(value: any): any {\n    return value['@id'];\n  }\n\n  static extracType(value: any): any {\n    return value['@type'];\n  }\n\n  static extractContext(value: any): any {\n    return value['@context'];\n  }\n\n  static extractViewingDirection(value: any): ViewingDirection {\n    if (value['viewingDirection'] === 'right-to-left') {\n      return ViewingDirection.RTL;\n    } else {\n      return ViewingDirection.LTR;\n    }\n  }\n\n  static findCanvasIndex(canvases: string[], sequences: Sequence[]): number {\n    let index = -1;\n    if (sequences[0] && sequences[0].canvases && canvases[0]) {\n      index = sequences[0].canvases.findIndex(\n        (canvas: Canvas) => canvas.id === canvases[0]\n      );\n    }\n    return index;\n  }\n}\n","import { Size } from '../models/manifest';\n\nexport class SizesBuilder {\n  constructor(private sizes: any[]) {}\n\n  build(): Size[] {\n    const sizes: Size[] = [];\n    if (this.sizes) {\n      for (let i = 0; i < this.sizes.length; i++) {\n        const size = this.sizes[i];\n        sizes.push(new Size(size.width, size.height));\n      }\n    }\n    return sizes;\n  }\n}\n","import { Tile } from '../models/manifest';\n\nexport class TilesBuilder {\n  constructor(private tiles: any[]) {}\n\n  build(): Tile[] {\n    const tiles: Tile[] = [];\n    if (this.tiles) {\n      for (let i = 0; i < this.tiles.length; i++) {\n        const tile = this.tiles[i];\n        tiles.push(\n          new Tile({\n            width: tile.width,\n            scaleFactors: tile.scaleFactors\n          })\n        );\n      }\n    }\n    return tiles;\n  }\n}\n","import { Service } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SizesBuilder } from './sizes.builder';\nimport { TilesBuilder } from './tiles.builder';\n\nexport class ServiceBuilder {\n  constructor(private service: any) {}\n\n  build(): Service | undefined {\n    if (!this.service) {\n      return undefined;\n    } else {\n      return new Service({\n        id: BuilderUtils.extractId(this.service),\n        context: BuilderUtils.extractContext(this.service),\n        protocol: this.service.protocol,\n        width: this.service.width,\n        height: this.service.height,\n        sizes: new SizesBuilder(this.service.sizes).build(),\n        tiles: new TilesBuilder(this.service.tiles).build(),\n        profile: this.service.profile,\n        physicalScale: this.service.physicalScale,\n        physicalUnits: this.service.physicalUnits,\n        service: new ServiceBuilder(this.service.service).build(),\n      });\n    }\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ServiceBuilder } from './service.builder';\n\nexport class ResourceBuilder {\n  constructor(private resource: any) {}\n\n  build(): Resource {\n    if (!this.resource) {\n      throw new Error('No resource');\n    }\n    return new Resource({\n      id: BuilderUtils.extractId(this.resource),\n      type: BuilderUtils.extracType(this.resource),\n      format: this.resource.format,\n      service: new ServiceBuilder(this.resource.service).build(),\n      height: this.resource.height,\n      width: this.resource.width,\n    });\n  }\n}\n","import { Images } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ResourceBuilder } from './resource.builder';\n\nexport class ImagesBuilder {\n  constructor(private images: any[]) {}\n\n  build(): Images[] {\n    const images: Images[] = [];\n    if (this.images) {\n      for (let i = 0; i < this.images.length; i++) {\n        const image = this.images[i];\n        images.push(\n          new Images({\n            id: BuilderUtils.extractId(image),\n            type: BuilderUtils.extracType(image),\n            motivation: image.motivation,\n            resource: new ResourceBuilder(image.resource).build(),\n            on: image.on\n          })\n        );\n      }\n    }\n    return images;\n  }\n}\n","import { Canvas } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ImagesBuilder } from './images.builder';\n\nexport class CanvasBuilder {\n  constructor(private canvases: any[]) {}\n\n  build(): Canvas[] {\n    const canvases: Canvas[] = [];\n    if (this.canvases) {\n      for (let i = 0; i < this.canvases.length; i++) {\n        const canvas = this.canvases[i];\n        const seeAlso = canvas.seeAlso ? canvas.seeAlso : [];\n        if (canvas['@seeAlso']) {\n          seeAlso.push(canvas['@seeAlso']);\n        }\n\n        canvases.push(\n          new Canvas({\n            id: BuilderUtils.extractId(canvas),\n            type: BuilderUtils.extracType(canvas),\n            label: canvas.label,\n            thumbnail: canvas.thumbnail,\n            height: canvas.height,\n            width: canvas.width,\n            images: new ImagesBuilder(canvas.images).build(),\n            altoUrl: this.extractAltoUrl(seeAlso),\n          })\n        );\n      }\n    }\n    return canvases;\n  }\n\n  private extractAltoUrl(seeAlso: any[]): string | undefined {\n    if (!seeAlso) {\n      return undefined;\n    }\n\n    const altoService = seeAlso.find(\n      (s: any) => s.format === 'application/alto+xml'\n    );\n    return altoService ? BuilderUtils.extractId(altoService) : undefined;\n  }\n}\n","import { Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { CanvasBuilder } from './canvas.builder';\n\nexport class SequenceBuilder {\n  constructor(private sequences: any[]) {}\n\n  build(): Sequence[] {\n    const sequences: Sequence[] = [];\n    if (this.sequences) {\n      for (let i = 0; i < this.sequences.length; i++) {\n        const seq = this.sequences[i];\n        sequences.push(\n          new Sequence({\n            id: BuilderUtils.extractId(seq),\n            type: BuilderUtils.extracType(seq),\n            label: seq.label,\n            viewingHint: seq.viewingHint,\n            canvases: new CanvasBuilder(seq.canvases).build()\n          })\n        );\n      }\n    }\n    return sequences;\n  }\n}\n","import { Metadata } from '../models/manifest';\n\nexport class MetadataBuilder {\n  constructor(private metadatas: any) {}\n\n  build(): Metadata[] {\n    const metadatas: Metadata[] = [];\n    if (this.metadatas) {\n      for (let i = 0; i < this.metadatas.length; i++) {\n        const data = this.metadatas[i];\n        metadatas.push(new Metadata(data.label, data.value));\n      }\n    }\n    return metadatas;\n  }\n}\n","import { Structure, Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\n\nexport class StructureBuilder {\n  constructor(private structures: any[], private sequences: Sequence[]) {}\n\n  build(): Structure[] {\n    const structures: Structure[] = [];\n    if (this.structures) {\n      for (let i = 0; i < this.structures.length; i++) {\n        const structure = this.structures[i];\n        structures.push(\n          new Structure({\n            id: BuilderUtils.extractId(structure),\n            type: BuilderUtils.extracType(structure),\n            label: structure.label,\n            canvases: structure.canvases,\n            canvasIndex: BuilderUtils.findCanvasIndex(\n              structure.canvases,\n              this.sequences\n            )\n          })\n        );\n      }\n    }\n    return structures;\n  }\n}\n","import { Resource, Sequence } from '../models/manifest';\n\nexport class TileSourceBuilder {\n  constructor(private sequences: Sequence[]) {}\n\n  build(): Resource[] {\n    const tilesources: Resource[] = [];\n    if (this.sequences && this.sequences.length > 0) {\n      const canvases = this.sequences[0].canvases;\n      for (let i = 0; canvases && i < canvases.length; i++) {\n        const canvas = canvases[i];\n        if (canvas) {\n          if (canvas.images && canvas.images.length >= 0) {\n            const resource = canvas.images[0].resource;\n            if (resource) {\n              tilesources.push(resource);\n            }\n          }\n        }\n      }\n    }\n    return tilesources;\n  }\n}\n","import { Manifest, Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SequenceBuilder } from './sequence.builder';\nimport { ServiceBuilder } from './service.builder';\nimport { MetadataBuilder } from './metadata.builder';\nimport { StructureBuilder } from './structure.builder';\nimport { TileSourceBuilder } from './tile-source.builder';\n\nexport class ManifestBuilder {\n  constructor(private data: any) {}\n\n  build(): Manifest {\n    const sequences: Sequence[] = new SequenceBuilder(\n      this.data.sequences\n    ).build();\n\n    return new Manifest({\n      context: BuilderUtils.extractContext(this.data),\n      type: BuilderUtils.extracType(this.data),\n      id: BuilderUtils.extractId(this.data),\n      viewingDirection: BuilderUtils.extractViewingDirection(this.data),\n      label: this.data.label,\n      metadata: new MetadataBuilder(this.data.metadata).build(),\n      license: this.data.license,\n      logo: this.data.logo,\n      attribution: this.data.attribution,\n      service: new ServiceBuilder(this.data.service).build(),\n      sequences: sequences,\n      structures: new StructureBuilder(this.data.structures, sequences).build(),\n      tileSource: new TileSourceBuilder(this.data.sequences).build(),\n      viewingHint: this.data.viewingHint\n    });\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, finalize, take } from 'rxjs/operators';\nimport { ManifestBuilder } from '../builders/manifest.builder';\nimport { MimeViewerIntl } from '../intl/viewer-intl';\nimport { Manifest } from '../models/manifest';\nimport { SpinnerService } from '../spinner-service/spinner.service';\n\n@Injectable()\nexport class IiifManifestService {\n  protected _currentManifest = new BehaviorSubject<Manifest | null>(null);\n  protected _errorMessage = new BehaviorSubject<string | null>(null);\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private http: HttpClient,\n    private spinnerService: SpinnerService\n  ) {}\n\n  get currentManifest(): Observable<Manifest | null> {\n    return this._currentManifest.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get errorMessage(): Observable<string | null> {\n    return this._errorMessage.asObservable();\n  }\n\n  load(manifestUri: string): Observable<boolean> {\n    return new Observable((observer) => {\n      if (manifestUri.length === 0) {\n        this._errorMessage.next(this.intl.manifestUriMissingLabel);\n        observer.next(false)\n      } else {\n        this.spinnerService.show();\n        this.http\n          .get<Response>(manifestUri)\n          .pipe(\n            finalize(() => this.spinnerService.hide()),\n            take(1)\n          )\n          .subscribe(\n            (response: Response) => {\n              const manifest = this.extractData(response);\n              if (this.isManifestValid(manifest)) {\n                this._currentManifest.next(manifest);\n                observer.next(true)\n              } else {\n                this._errorMessage.next(this.intl.manifestNotValidLabel);\n                observer.next(false)\n              }\n            },\n            (err: HttpErrorResponse) => {\n              this._errorMessage.next(this.handleError(err));\n              observer.next(false)\n            }\n          );\n      }\n    });\n  }\n\n  destroy() {\n    this.resetCurrentManifest();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest() {\n    this._currentManifest.next(null);\n  }\n\n  private resetErrorMessage() {\n    this._errorMessage.next(null);\n  }\n\n  private extractData(response: Response) {\n    return new ManifestBuilder(response).build();\n  }\n\n  private isManifestValid(manifest: Manifest): boolean {\n    return (\n      manifest &&\n      manifest.tileSource !== undefined &&\n      manifest.tileSource.length > 0\n    );\n  }\n\n  private handleError(err: HttpErrorResponse): string {\n    let errMsg: string;\n    if (err.error instanceof Object) {\n      errMsg = err.message;\n    } else {\n      errMsg = err.error;\n    }\n    return errMsg;\n  }\n}\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from './../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../core/intl/viewer-intl';\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from './../core/models/dimensions';\nimport { Hit } from './../core/models/hit';\nimport { Manifest } from './../core/models/manifest';\nimport { SearchResult } from './../core/models/search-result';\n\n@Component({\n  selector: 'mime-search',\n  templateUrl: './content-search-dialog.component.html',\n  styleUrls: ['./content-search-dialog.component.scss'],\n})\nexport class ContentSearchDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy {\n  public q = '';\n  public hits: Hit[] = [];\n  public currentHit: Hit | null = null;\n  public currentSearch: string | null = null;\n  public numberOfHits = 0;\n  public isSearching = false;\n  public tabHeight = {};\n  private manifest: Manifest | null = null;\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n  @ViewChild('contentSearchResult', { static: true })\n  resultContainer!: ElementRef;\n  @ViewChild('query', { static: true }) qEl!: ElementRef;\n  @ViewChildren('hitButton', { read: ElementRef })\n  hitList!: QueryList<ElementRef>;\n\n  constructor(\n    public dialogRef: MatDialogRef<ContentSearchDialogComponent>,\n    public intl: MimeViewerIntl,\n    public mediaObserver: MediaObserver,\n    private mimeResizeService: MimeResizeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.hits = sr.hits;\n        this.currentSearch = sr.q ? sr.q : '';\n        this.q = sr.q;\n        this.numberOfHits = sr.size();\n        if (this.resultContainer !== null && this.numberOfHits > 0) {\n          this.resultContainer.nativeElement.focus();\n        } else if (this.q.length === 0 || this.numberOfHits === 0) {\n          this.qEl.nativeElement.focus();\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.isSearching.subscribe((s: boolean) => {\n        this.isSearching = s;\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onSelected.subscribe((hit: Hit | null) => {\n        if (hit === null) {\n          this.currentHit = hit;\n        } else {\n          if (!this.currentHit || this.currentHit.id !== hit.id) {\n            this.currentHit = hit;\n            this.scrollCurrentHitIntoView();\n          }\n        }\n      })\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngAfterViewInit() {\n    this.scrollCurrentHitIntoView();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.resizeTabHeight();\n  }\n\n  onSubmit(event: KeyboardEvent) {\n    event.preventDefault();\n    this.search();\n  }\n\n  clear() {\n    this.q = '';\n    this.search();\n  }\n\n  goToHit(hit: Hit): void {\n    this.currentHit = hit;\n    this.iiifContentSearchService.selected(hit);\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.dialogRef.close();\n    }\n  }\n\n  private search() {\n    this.currentSearch = this.q;\n    if (this.manifest) {\n      this.iiifContentSearchService.search(this.manifest, this.q);\n    }\n  }\n\n  private resizeTabHeight(): void {\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n  }\n\n  private scrollCurrentHitIntoView() {\n    this.iiifContentSearchService.onSelected\n      .pipe(take(1))\n      .subscribe((hit: Hit | null) => {\n        if (hit !== null) {\n          const selected = this.findSelected(hit);\n          if (selected) {\n            selected.nativeElement.focus();\n          }\n        }\n      });\n  }\n\n  private findSelected(selectedHit: Hit): ElementRef | null {\n    if (this.hitList) {\n      const selectedList = this.hitList.filter(\n        (item: ElementRef, index: number) => index === selectedHit.id\n      );\n      return selectedList.length > 0 ? selectedList[0] : null;\n    } else {\n      return null;\n    }\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\nimport { ContentSearchDialogConfigStrategyFactory } from './content-search-dialog-config-strategy-factory';\nimport { ContentSearchDialogComponent } from './content-search-dialog.component';\n\n@Injectable()\nexport class ContentSearchDialogService {\n  private _el: ElementRef | null = null;\n  private isContentSearchDialogOpen = false;\n  private dialogRef!: MatDialogRef<ContentSearchDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private contentSearchDialogConfigStrategyFactory: ContentSearchDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        if (this.isContentSearchDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n          this.dialogRef.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy() {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open() {\n    if (!this.isContentSearchDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ContentSearchDialogComponent, config);\n      this.dialogRef\n        .afterClosed()\n        .pipe(take(1))\n        .subscribe((result) => {\n          this.isContentSearchDialogOpen = false;\n        });\n      this.isContentSearchDialogOpen = true;\n    }\n  }\n\n  public close() {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n    }\n    this.isContentSearchDialogOpen = false;\n  }\n\n  public toggle() {\n    this.isContentSearchDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isContentSearchDialogOpen;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return this.contentSearchDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el);\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { MimeDomHelper } from './../core/mime-dom-helper';\nimport { ElementRef, Injectable } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface ContentsDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef): MatDialogConfig;\n}\n\nexport class MobileContentsDialogConfigStrategy\n  implements ContentsDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'contents-panel'\n    };\n  }\n}\n\nexport class DesktopContentsDialogConfigStrategy\n  implements ContentsDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      width: `${DesktopContentsDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'contents-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopContentsDialogConfigStrategy.dialogWidth -\n        DesktopContentsDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  ContentsDialogConfigStrategy,\n  DesktopContentsDialogConfigStrategy,\n  MobileContentsDialogConfigStrategy\n} from './contents-dialog-config-strategy';\n\n@Injectable()\nexport class ContentsDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ContentsDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n      ? new MobileContentsDialogConfigStrategy()\n      : new DesktopContentsDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\nimport { Manifest } from './../core/models/manifest';\n\n@Component({\n  selector: 'mime-contents',\n  templateUrl: './contents-dialog.component.html',\n  styleUrls: ['./contents-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ContentsDialogComponent implements OnInit, OnDestroy {\n  public manifest: Manifest | null = null;\n  public tabHeight = {};\n  public showToc = false;\n  public selectedIndex = 0;\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    public mediaObserver: MediaObserver,\n    private dialogRef: MatDialogRef<ContentsDialogComponent>,\n    private el: ElementRef,\n    private mimeDomHelper: MimeDomHelper,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    mimeResizeService: MimeResizeService\n  ) {\n    this.subscriptions.add(\n      mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n  }\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.showToc =\n            this.manifest !== null &&\n            this.manifest.structures !== undefined &&\n            this.manifest.structures.length > 0;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.resizeTabHeight();\n  }\n\n  onCanvasChanged() {\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.dialogRef.close();\n    }\n  }\n\n  private resizeTabHeight(): void {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      height -= 104;\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 278;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { ContentsDialogConfigStrategyFactory } from './contents-dialog-config-strategy-factory';\nimport { ContentsDialogComponent } from './contents-dialog.component';\n\n@Injectable()\nexport class ContentsDialogService {\n  private _el: ElementRef | null = null;\n  private isContentsDialogOpen = false;\n  private dialogRef: MatDialogRef<ContentsDialogComponent> | null = null;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private contentsDialogConfigStrategyFactory: ContentsDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        if (this.isContentsDialogOpen) {\n          const config = this.getDialogConfig();\n          if (this.dialogRef) {\n            this.dialogRef.updatePosition(config.position);\n            this.dialogRef.updateSize(config.width, config.height);\n          }\n        }\n      })\n    );\n  }\n\n  public destroy() {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(selectedIndex?: number) {\n    if (!this.isContentsDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ContentsDialogComponent, config);\n\n      if (selectedIndex) {\n        this.dialogRef.componentInstance.selectedIndex = selectedIndex;\n      }\n\n      this.dialogRef\n        .afterClosed()\n        .pipe(take(1))\n        .subscribe((result) => {\n          this.isContentsDialogOpen = false;\n        });\n      this.isContentsDialogOpen = true;\n    }\n  }\n\n  public close() {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isContentsDialogOpen = false;\n    }\n    this.isContentsDialogOpen = false;\n  }\n\n  public toggle() {\n    this.isContentsDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isContentsDialogOpen;\n  }\n\n  public getSelectedIndex(): number {\n    return this.dialogRef && this.dialogRef.componentInstance\n      ? this.dialogRef.componentInstance.selectedIndex\n      : 0;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    if (!this._el) {\n      throw new Error('No element');\n    }\n    return this.contentsDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el);\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { String } from '../../alto-service/alto.model';\n\nexport class StringsBuilder {\n  private stringXml: any | undefined;\n\n  withStringXml(stringXml: any): StringsBuilder {\n    this.stringXml = stringXml;\n    return this;\n  }\n\n  build(): String[] {\n    return this.stringXml\n      ? this.stringXml.map((string: any) => {\n          return { content: string.$.CONTENT };\n        })\n      : [];\n  }\n}\n","import { TextLine } from '../../alto-service/alto.model';\nimport { StringsBuilder } from './strings.builder';\n\nexport class TextLinesBuilder {\n  private stringBuilder = new StringsBuilder();\n  private textLinesXml: any | undefined;\n\n  withTextLinesXml(textLinesXml: any) {\n    this.textLinesXml = textLinesXml;\n    return this;\n  }\n\n  build(): TextLine[] {\n    return this.textLinesXml\n      ? this.textLinesXml.map((textLine: any) => {\n          return {\n            strings: this.stringBuilder.withStringXml(textLine.String).build(),\n          };\n        })\n      : [];\n  }\n}\n","import { TextBlock, TextStyle } from '../../alto-service/alto.model';\nimport { TextLinesBuilder } from './text-lines.builder';\n\nexport class TextBlocksBuilder {\n  private textLinesBuilder = new TextLinesBuilder();\n  private textStyles: Map<string, TextStyle> | undefined;\n  private textBlocksXml: any | undefined;\n\n  withTextBlocksXml(textBlocksXml: any) {\n    this.textBlocksXml = textBlocksXml;\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): TextBlocksBuilder {\n    this.textStyles = textStyles;\n    return this;\n  }\n\n  build(): TextBlock[] {\n    return this.textBlocksXml\n      ? this.textBlocksXml.map((textBlock: any) => {\n          const styleRef = textBlock.$.STYLEREFS?.split(' ');\n          let textStyle = undefined;\n          if (styleRef && this.textStyles) {\n            textStyle = this.textStyles.get(styleRef[0]);\n          }\n          return {\n            textLines: this.textLinesBuilder\n              .withTextLinesXml(textBlock.TextLine)\n              .build(),\n            textStyle: {\n              fontStyle: textStyle?.fontStyle,\n            },\n          };\n        })\n      : [];\n  }\n}\n","import { PrintSpace, TextStyle } from '../../alto-service/alto.model';\nimport { TextBlocksBuilder } from './text-blocks.builder';\n\nexport class PrintSpaceBuilder {\n  private textStyles: Map<string, TextStyle> | undefined;\n  private printSpaceXml: any | undefined;\n\n  withPrintSpaceXml(printSpaceXml: any) {\n    this.printSpaceXml = printSpaceXml;\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): PrintSpaceBuilder {\n    this.textStyles = textStyles;\n    return this;\n  }\n\n  build(): PrintSpace {\n    let textBlocks: any[] = [];\n\n    if (this.printSpaceXml.$$) {\n      textBlocks = this.extractTextBlocks(this.printSpaceXml.$$);\n    }\n    return {\n      textBlocks: new TextBlocksBuilder()\n        .withTextBlocksXml(textBlocks)\n        .withTextStyles(this.textStyles)\n        .build(),\n    };\n  }\n\n  private extractTextBlocks(node: any): any[] {\n    let blocks: any[] = [];\n    node.forEach((n: any) => {\n      if (this.isTextBlock(n)) {\n        blocks = [...blocks, n];\n      } else if (this.isComposedBlock(n)) {\n        if (n.$$) {\n          blocks = [...blocks, ...this.extractTextBlocks(n.$$)];\n        }\n      }\n    });\n    return blocks;\n  }\n\n  private isTextBlock(n: any): boolean {\n    return n['#name'] && n['#name'] === 'TextBlock';\n  }\n\n  private isComposedBlock(n: any): boolean {\n    return n['#name'] && n['#name'] === 'ComposedBlock';\n  }\n}\n","import { Page, TextStyle } from '../../alto-service/alto.model';\nimport { PrintSpaceBuilder } from './print-space.builder';\n\nexport class PageBuilder {\n  private printSpaceBuilder = new PrintSpaceBuilder();\n  private pageXml: any | undefined;\n\n  withPageXml(pageXml: any) {\n    this.pageXml = pageXml;\n    return this;\n  }\n\n  withTextStyles(textStyles: Map<string, TextStyle> | undefined): PageBuilder {\n    this.printSpaceBuilder.withTextStyles(textStyles);\n    return this;\n  }\n\n  build(): Page {\n    return {\n      topMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(this.pageXml.TopMargin[0])\n        .build(),\n      leftMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(this.pageXml.LeftMargin[0])\n        .build(),\n      rightMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(this.pageXml.RightMargin[0])\n        .build(),\n      bottomMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(this.pageXml.BottomMargin[0])\n        .build(),\n      printSpace: this.printSpaceBuilder\n        .withPrintSpaceXml(this.pageXml.PrintSpace[0])\n        .build(),\n    };\n  }\n}\n","import { Layout, TextStyle } from '../../alto-service/alto.model';\nimport { PageBuilder } from './page.builder';\n\nexport class LayoutBuilder {\n  private pageBuilder = new PageBuilder();\n\n  withLayoutXml(layoutXml: any): LayoutBuilder {\n    this.pageBuilder.withPageXml(layoutXml.Page[0]);\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): LayoutBuilder {\n    this.pageBuilder.withTextStyles(textStyles);\n    return this;\n  }\n\n  build(): Layout {\n    return {\n      page: this.pageBuilder.build(),\n    };\n  }\n}\n","import { TextStyle } from '../../alto-service/alto.model';\n\nexport class StylesBuilder {\n  constructor(private stylesXml: any) {}\n\n  build(): Map<string, TextStyle> {\n    const textStyles: Map<string, TextStyle> = new Map();\n    if (this.stylesXml.TextStyle) {\n      this.stylesXml.TextStyle.forEach((textStyle: any) => {\n        textStyles.set(textStyle.$.ID, {\n          fontStyle: textStyle.$.FONTSTYLE,\n        });\n      });\n    }\n    return textStyles;\n  }\n}\n","import { Alto } from '../../alto-service/alto.model';\nimport { LayoutBuilder } from './layout.builder';\nimport { StylesBuilder } from './styles.builder';\n\nexport class AltoBuilder {\n  private layoutBuilder = new LayoutBuilder();\n  private altoXml: any | undefined;\n\n  withAltoXml(altoXml: any): AltoBuilder {\n    this.altoXml = altoXml;\n    return this;\n  }\n\n  build(): Alto {\n    if (this.altoXml.Styles) {\n      this.layoutBuilder.withTextStyles(\n        new StylesBuilder(this.altoXml.Styles[0]).build()\n      );\n    }\n    this.layoutBuilder.withLayoutXml(this.altoXml.Layout[0]);\n\n    return {\n      layout: this.layoutBuilder.build(),\n    };\n  }\n}\n","import { Point } from './point';\nimport { Rect } from './rect';\n\nexport class CanvasGroups {\n  canvasGroupRects: Rect[] = [];\n  canvasRects: Rect[] = [];\n  canvasesPerCanvasGroup: number[][] = [];\n\n  public add(rect: Rect): void {\n    this.canvasGroupRects.push(rect);\n  }\n\n  public addRange(rects: Rect[]): void {\n    this.canvasGroupRects = rects;\n  }\n\n  public get(index: number): Rect {\n    return { ...this.canvasGroupRects[index] };\n  }\n\n  public findClosestIndex(point: Point): number {\n    let i = 0;\n    let lastDelta: any;\n\n    if (point === null) {\n      return -1;\n    }\n    this.canvasGroupRects.some(function(rect: Rect, index: number) {\n      const delta = Math.abs(point.x - rect.centerX);\n      if (delta >= lastDelta) {\n        return true;\n      }\n      i = index;\n      lastDelta = delta;\n      return false;\n    });\n    return i;\n  }\n\n  public getMaxHeight(): number {\n    return Math.max.apply(\n      Math,\n      this.canvasGroupRects.map(function(rect) {\n        return rect.height;\n      })\n    );\n  }\n\n  public getMaxWidth(): number {\n    return Math.max.apply(\n      Math,\n      this.canvasGroupRects.map(function(rect) {\n        return rect.width;\n      })\n    );\n  }\n\n  public length(): number {\n    return this.canvasGroupRects.length;\n  }\n}\n","import { Rect } from './../models/rect';\nimport { CanvasGroups } from './../models/canvas-groups';\n\nexport interface AbstractCanvasGroupStrategy {\n  addAll(canvasRects: Rect[]): CanvasGroups;\n}\n\nexport class OneCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy {\n  addAll = (canvasRects: Rect[]) => {\n    const canvasGroups = new CanvasGroups();\n    canvasGroups.addRange(canvasRects);\n    canvasGroups.canvasRects = canvasRects;\n    for (let i = 0; i < canvasRects.length; i++) {\n      canvasGroups.canvasesPerCanvasGroup.push([i]);\n    }\n    return canvasGroups;\n  };\n}\n\nexport class TwoCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy {\n  addAll = (canvasRects: Rect[]) => {\n    const canvasGroups = new CanvasGroups();\n    // Single first page\n    canvasGroups.add(canvasRects[0]);\n    canvasGroups.canvasRects = canvasRects;\n    canvasGroups.canvasesPerCanvasGroup.push([0]);\n\n    for (let i = 1; i < canvasRects.length; i = i + 2) {\n      if (i + 1 < canvasRects.length) {\n        // Paired pages\n        const thisRect = canvasRects[i];\n        const nextRect = canvasRects[i + 1];\n        const groupedRect = new Rect({\n          x: Math.min(thisRect.x, nextRect.x),\n          y: Math.min(thisRect.y, nextRect.y),\n          height: Math.max(thisRect.height, nextRect.height),\n          width: thisRect.width + nextRect.width\n        });\n        canvasGroups.add(groupedRect);\n        canvasGroups.canvasesPerCanvasGroup.push([i, i + 1]);\n      } else {\n        // Single last page, if applicable\n        canvasGroups.add(canvasRects[i]);\n        canvasGroups.canvasesPerCanvasGroup.push([i]);\n      }\n    }\n    return canvasGroups;\n  };\n}\n","import { ViewerLayout } from '../models/viewer-layout';\nimport {\n  OneCanvasPerCanvasGroupStrategy,\n  TwoCanvasPerCanvasGroupStrategy\n} from './canvas-group.strategy';\n\nexport class CanvasGroupStrategyFactory {\n  public static create(layout: ViewerLayout) {\n    if (layout === ViewerLayout.ONE_PAGE) {\n      return new OneCanvasPerCanvasGroupStrategy();\n    } else {\n      return new TwoCanvasPerCanvasGroupStrategy();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { CanvasGroups } from './../models/canvas-groups';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { CanvasGroupStrategyFactory } from './canvas-groups-strategy.factory';\n\n@Injectable()\nexport class CanvasService {\n  protected _currentNumberOfCanvasGroups: BehaviorSubject<\n    number\n  > = new BehaviorSubject(0);\n  protected _currentCanvasGroupIndex: BehaviorSubject<\n    number\n  > = new BehaviorSubject(0);\n\n  protected canvasGroups: CanvasGroups = new CanvasGroups();\n  protected _numberOfCanvases = 0;\n\n  constructor() {}\n\n  addAll(canvasRects: Rect[], layout: ViewerLayout) {\n    this.numberOfCanvases = canvasRects.length;\n    const canvasGroupStrategy = CanvasGroupStrategyFactory.create(layout);\n    this.canvasGroups = canvasGroupStrategy.addAll(canvasRects);\n    this._currentNumberOfCanvasGroups.next(this.canvasGroups.length());\n  }\n\n  reset() {\n    this.numberOfCanvases = 0;\n    this._currentCanvasGroupIndex.next(0);\n    this.canvasGroups = new CanvasGroups();\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this._currentCanvasGroupIndex\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  get onNumberOfCanvasGroupsChange(): Observable<number> {\n    return this._currentNumberOfCanvasGroups\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  set currentCanvasGroupIndex(currentCanvasGroupIndex: number) {\n    if (!this.isWithinBounds(currentCanvasGroupIndex)) {\n      return;\n    }\n    this._currentCanvasGroupIndex.next(currentCanvasGroupIndex);\n  }\n\n  get currentCanvasGroupIndex(): number {\n    return this._currentCanvasGroupIndex.value;\n  }\n\n  get numberOfCanvases(): number {\n    return this._numberOfCanvases;\n  }\n\n  set numberOfCanvases(numberOfCanvases: number) {\n    this._numberOfCanvases = numberOfCanvases;\n  }\n\n  get numberOfCanvasGroups(): number {\n    return this.canvasGroups.length();\n  }\n\n  get currentCanvasIndex(): number {\n    const canvases = this.canvasGroups.canvasesPerCanvasGroup[\n      this.currentCanvasGroupIndex\n    ]\n    return canvases && canvases.length >= 1 ? canvases[0] : 0;\n  }\n\n  isWithinBounds(canvasGroupIndex: number): boolean {\n    return (\n      canvasGroupIndex > -1 && canvasGroupIndex <= this.numberOfCanvasGroups - 1\n    );\n  }\n\n  isCurrentCanvasGroupValid(): boolean {\n    return this.isWithinBounds(this.currentCanvasGroupIndex);\n  }\n\n  // Returns -1 if next canvas index is out of bounds\n  getNextCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex + 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex++;\n    return this.currentCanvasGroupIndex;\n  }\n\n  // Returns -1 if previous canvas index is out of bounds\n  getPrevCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex - 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex--;\n    return this.currentCanvasGroupIndex;\n  }\n\n  constrainToRange(canvasGroupsIndex: number): number {\n    if (canvasGroupsIndex < 0) {\n      return 0;\n    } else if (canvasGroupsIndex >= this.numberOfCanvasGroups - 1) {\n      return this.numberOfCanvasGroups - 1;\n    } else {\n      return canvasGroupsIndex;\n    }\n  }\n\n  findClosestCanvasGroupIndex(point: Point): number {\n    return this.canvasGroups.findClosestIndex(point);\n  }\n\n  findCanvasGroupByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.findIndex(function(\n      canvasForCanvasGroup: number[]\n    ) {\n      return canvasForCanvasGroup.indexOf(canvasIndex) >= 0;\n    });\n  }\n\n  findCanvasByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.length === 0\n      ? -1\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex][0];\n  }\n\n  getCanvasGroupLabel(canvasGroupIndex: number): string {\n    if (\n      !this.canvasGroups.canvasGroupRects ||\n      this.canvasGroups.canvasesPerCanvasGroup.length === 0\n    ) {\n      return '1';\n    }\n\n    const canvasGroup = this.canvasGroups.canvasesPerCanvasGroup[\n      canvasGroupIndex\n    ];\n    let canvasGroupLabel = '' + (canvasGroup[0] + 1);\n\n    if (canvasGroup.length > 1) {\n      canvasGroupLabel =\n        canvasGroupLabel + '-' + (canvasGroup[canvasGroup.length - 1] + 1);\n    }\n\n    return canvasGroupLabel;\n  }\n\n  getCanvasesPerCanvasGroup(canvasIndex: number): number[] {\n    return !this.canvasGroups.canvasGroupRects\n      ? [0]\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex];\n  }\n\n  getCanvasRect(canvasIndex: number): Rect {\n    return this.canvasGroups.canvasRects[canvasIndex];\n  }\n\n  getCurrentCanvasGroupRect(): Rect {\n    return this.getCanvasGroupRect(this.currentCanvasGroupIndex);\n  }\n\n  getCanvasGroupRect(canvasGroupIndex: number): Rect {\n    return this.canvasGroups.get(canvasGroupIndex);\n  }\n\n  getMaxHeight(): number {\n    return this.canvasGroups.getMaxHeight();\n  }\n\n  getMaxWidth(): number {\n    return this.canvasGroups.getMaxWidth();\n  }\n}\n","import { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { Alto, String, TextLine } from './alto.model';\n\nexport class HtmlFormatter {\n  constructor(private sanitizer: DomSanitizer) {}\n\n  altoToHtml(alto: Alto): SafeHtml {\n    const page = alto.layout.page;\n    let html = '';\n    let textBlocks: any[] = [];\n\n    if (page.topMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.topMargin.textBlocks];\n    }\n    if (page.leftMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.leftMargin.textBlocks];\n    }\n    if (page.printSpace.textBlocks) {\n      textBlocks = [...textBlocks, ...page.printSpace.textBlocks];\n    }\n    if (page.bottomMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.bottomMargin.textBlocks];\n    }\n\n    textBlocks.forEach((textBlock) => {\n      let words: string[] = [];\n      textBlock.textLines.forEach((textLine: TextLine) => {\n        textLine.strings.forEach((string: String) => {\n          words.push(string.content);\n        });\n      });\n      const styles: string[] = [];\n      if (textBlock?.textStyle?.fontStyle === 'bold') {\n        styles.push('font-weight: bold');\n      }\n\n      html += '<p';\n      if (styles && styles.length > 0) {\n        html += ` style=\"${styles.join(';')}\"`;\n      }\n      html += `>${words.join(' ')}<p/>`;\n    });\n\n    return this.sanitizer.bypassSecurityTrustHtml(html);\n  }\n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport {\n  BehaviorSubject,\n  forkJoin,\n  Observable,\n  of,\n  Subject,\n  Subscriber,\n  Subscription,\n} from 'rxjs';\nimport { catchError, debounceTime, finalize, take } from 'rxjs/operators';\nimport { parseString } from 'xml2js';\nimport { AltoBuilder } from '../builders/alto';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { IiifManifestService } from '../iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../intl/viewer-intl';\nimport { Manifest } from '../models/manifest';\nimport { Alto } from './alto.model';\nimport { HtmlFormatter } from './html.formatter';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AltoService {\n  private altos: SafeHtml[] = [];\n  private recognizedTextContentToggle = new BehaviorSubject(false);\n  private isLoading = new BehaviorSubject(false);\n  private textContentReady = new Subject<void>();\n  private textError = new Subject<string>();\n  private manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n  private altoBuilder = new AltoBuilder();\n  private htmlFormatter: HtmlFormatter;\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private http: HttpClient,\n    private iiifManifestService: IiifManifestService,\n    private canvasService: CanvasService,\n    sanitizer: DomSanitizer\n  ) {\n    this.htmlFormatter = new HtmlFormatter(sanitizer);\n  }\n\n  get onRecognizedTextContentToggleChange$(): Observable<boolean> {\n    return this.recognizedTextContentToggle.asObservable();\n  }\n\n  get onTextContentReady$(): Observable<void> {\n    return this.textContentReady.asObservable();\n  }\n\n  get isLoading$(): Observable<boolean> {\n    return this.isLoading.asObservable();\n  }\n\n  get hasErrors$(): Observable<string> {\n    return this.textError.asObservable();\n  }\n\n  get onRecognizedTextContentToggle() {\n    return this.recognizedTextContentToggle.value;\n  }\n\n  set onRecognizedTextContentToggle(value: boolean) {\n    this.recognizedTextContentToggle.next(value);\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.clearCache();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange\n        .pipe(debounceTime(200))\n        .subscribe((currentCanvasGroupIndex: number) => {\n          this.textError.next(undefined);\n          const sources: Observable<void>[] = [];\n\n          const canvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.addAltoSource(canvasGroup[0], sources);\n          if (canvasGroup.length === 2) {\n            this.addAltoSource(canvasGroup[1], sources);\n          }\n          this.isLoading.next(true);\n          forkJoin(sources)\n            .pipe(\n              take(1),\n              finalize(() => this.isLoading.next(false))\n            )\n            .subscribe();\n        })\n    );\n  }\n\n  destroy() {\n    this.subscriptions.unsubscribe();\n    this.clearCache();\n  }\n\n  toggle() {\n    this.onRecognizedTextContentToggle = !this.recognizedTextContentToggle.getValue();\n  }\n\n  getHtml(index: number): SafeHtml | undefined {\n    return this.altos && this.altos.length >= index + 1\n      ? this.altos[index]\n      : undefined;\n  }\n\n  clearCache() {\n    this.altos = [];\n  }\n\n  private addAltoSource(index: number, sources: Observable<void>[]) {\n    if (this.manifest && this.manifest.sequences) {\n      const seq = this.manifest.sequences[0];\n      if (seq.canvases) {\n        const canvas = seq.canvases[index];\n        if (canvas && canvas.altoUrl) {\n          sources.push(this.add(index, canvas.altoUrl));\n        }\n      }\n    }\n  }\n\n  private add(index: number, url: string): Observable<void> {\n    return new Observable((observer) => {\n      if (this.isInCache(index)) {\n        this.done(observer);\n      } else {\n        this.load(observer, index, url);\n      }\n    });\n  }\n\n  private isInCache(index: number) {\n    return this.altos[index];\n  }\n\n  private load(observer: Subscriber<void>, index: number, url: string) {\n    this.http\n      .get(url, {\n        headers: new HttpHeaders().set('Content-Type', 'text/xml'),\n        responseType: 'text',\n      })\n      .pipe(\n        take(1),\n        catchError((err) => of({ isError: true, error: err }))\n      )\n      .subscribe((data: Alto | any) => {\n        try {\n          if (!data.isError) {\n            parseString(data, { explicitChildren: true, preserveChildrenOrder: true}, (error, result) => {\n              const alto = this.altoBuilder.withAltoXml(result.alto).build();\n              this.addToCache(index, alto);\n              this.done(observer);\n            });\n          } else {\n            throw data.err;\n          }\n        } catch {\n          this.error(observer);\n        }\n      });\n  }\n\n  private addToCache(index: number, alto: Alto) {\n    this.altos[index] = this.htmlFormatter.altoToHtml(alto);\n  }\n\n  private done(observer: Subscriber<void>) {\n    this.textContentReady.next();\n    this.complete(observer);\n  }\n\n  private error(observer: Subscriber<void>) {\n    this.textError.next(this.intl.textContentErrorLabel);\n    this.complete(observer);\n  }\n\n  private complete(observer: Subscriber<void>) {\n    observer.next();\n    observer.complete();\n  }\n}\n","import { ViewerMode } from '../models/viewer-mode';\n\nexport class ModeChanges {\n  public currentValue?: ViewerMode;\n  public previousValue?: ViewerMode;\n\n  constructor(fields?: {\n    currentValue?: ViewerMode;\n    previousValue?: ViewerMode;\n  }) {\n    if (fields) {\n      this.currentValue = fields.currentValue || this.currentValue;\n      this.previousValue = fields.previousValue || this.previousValue;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ModeChanges } from '../models/modeChanges';\nimport { ViewerMode } from '../models/viewer-mode';\n\n@Injectable()\nexport class ModeService {\n  private _initialMode: ViewerMode;\n  private _mode: ViewerMode;\n  private toggleModeSubject: BehaviorSubject<ModeChanges>;\n  private modeChanges = new ModeChanges();\n\n  constructor() {\n    const mimeConfig = new MimeViewerConfig();\n    this.toggleModeSubject = new BehaviorSubject(new ModeChanges());\n    this._initialMode = mimeConfig.initViewerMode;\n    this._mode = this._initialMode;\n  }\n\n  get onChange(): Observable<ModeChanges> {\n    return this.toggleModeSubject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  set mode(mode: ViewerMode) {\n    this._mode = mode;\n    this.change();\n  }\n\n  get mode(): ViewerMode {\n    return this._mode;\n  }\n\n  set initialMode(mode: ViewerMode) {\n    this._initialMode = mode;\n    this.mode = mode;\n  }\n\n  get initialMode(): ViewerMode {\n    return this._initialMode;\n  }\n\n  toggleMode(): void {\n    if (this.mode === ViewerMode.DASHBOARD) {\n      this.mode = ViewerMode.PAGE;\n    } else if (\n      this.mode === ViewerMode.PAGE ||\n      this.mode === ViewerMode.PAGE_ZOOMED\n    ) {\n      this.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  isPageZoomed(): boolean {\n    return this.mode  === ViewerMode.PAGE_ZOOMED\n  }\n\n  private change() {\n    this.modeChanges.previousValue = this.modeChanges.currentValue;\n    this.modeChanges.currentValue = this._mode;\n    this.toggleModeSubject.next({\n      ...this.modeChanges,\n    });\n  }\n}\n","export class AccessKeys {\n  public static PAGEDOWN = [34];\n  public static PAGEUP = [33];\n  public static ARROWRIGHT = [39];\n  public static ARROWLEFT = [37];\n  public static firstCanvasGroupCodes = [36]; // Home\n  public static lastCanvasGroupCodes = [35]; // End\n  public static zoomInCodes = [107, 187, 171]; // +, numpad and standard position, Firefox uses 171 for standard position\n  public static zoomOutCodes = [109, 189, 173]; // -, numpad and standard position, Firefox uses 173 for standard position\n  public static zoomHomeCodes = [96, 48]; // 0\n  public static nextHit = [78]; // n\n  public static previousHit = [80]; // p\n  public static toggleSearchDialogCodes = [83]; // s\n  public static toggleContentsDialogCodes = [67]; // C\n  public static toggleFullscreenCodes = [70]; // f\n  public static resetSearch = [83]; // s\n  public static rotateCwCodes = [82]; // r\n  public static recognizedTextContentCodes = [84]; // t\n  private keyCode: number;\n  private altKey = false;\n  private shiftKey = false;\n  private ctrlkey = false;\n\n  constructor(event: KeyboardEvent) {\n    this.keyCode = event.keyCode;\n    this.altKey = event.altKey;\n    this.shiftKey = event.shiftKey;\n    this.ctrlkey = event.ctrlKey;\n  }\n\n  public isArrowRightKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWRIGHT);\n  }\n\n  public isArrowLeftKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWLEFT);\n  }\n\n  public isPageUpKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEUP);\n  }\n\n  public isPageDownKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEDOWN);\n  }\n\n  public isFirstCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.firstCanvasGroupCodes)\n    );\n  }\n\n  public isLastCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.lastCanvasGroupCodes)\n    );\n  }\n\n  public isSliderKeys() {\n    return (\n      this.isArrowLeftKeys() ||\n      this.isArrowRightKeys() ||\n      this.isPageDownKeys() ||\n      this.isPageUpKeys() ||\n      this.isFirstCanvasGroupKeys() ||\n      this.isLastCanvasGroupKeys()\n    );\n  }\n\n  public isZoomInKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomInCodes)\n    );\n  }\n\n  public isZoomOutKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomOutCodes)\n    );\n  }\n\n  public isZoomHomeKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomHomeCodes)\n    );\n  }\n\n  public isNextHitKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.nextHit);\n  }\n\n  public isPreviousHitKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.previousHit)\n    );\n  }\n\n  public isSearchDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleSearchDialogCodes)\n    );\n  }\n\n  public isContentsDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleContentsDialogCodes)\n    );\n  }\n\n  public isFullscreenKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleFullscreenCodes)\n    );\n  }\n\n  public isResetSearchKeys() {\n    return (\n      this.isShiftPressed() && this.arrayContainsKeys(AccessKeys.resetSearch)\n    );\n  }\n\n  public isRotateKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.rotateCwCodes)\n    );\n  }\n\n  public isRecognizedTextContentKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.recognizedTextContentCodes)\n    );\n  }\n\n  private isMultiKeys(): boolean {\n    return this.altKey || this.shiftKey || this.ctrlkey;\n  }\n\n  private arrayContainsKeys(keys: number[]): boolean {\n    return keys.indexOf(this.keyCode) > -1;\n  }\n\n  private isShiftPressed(): boolean {\n    return this.shiftKey;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { CanvasService } from '../../canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from '../../models/search-result';\nimport { Hit } from '../../models/hit';\nimport { Subscription } from 'rxjs';\n\n@Injectable()\nexport class ContentSearchNavigationService {\n  private currentIndex = 0;\n  private isHitOnActiveCanvasGroup = false;\n  private _isFirstHitOnCanvasGroup = false;\n  private _isLastHitOnCanvasGroup = false;\n  private canvasesPerCanvasGroup = [-1];\n  private searchResult: SearchResult | null = null;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService\n  ) {\n    this.initialize();\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe(\n        (result: SearchResult) => {\n          this.searchResult = result;\n        }\n      )\n    );\n  }\n\n  destroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  update(canvasGroupIndex: number) {\n    this.canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n      canvasGroupIndex\n    );\n    this.currentIndex = this.findCurrentHitIndex(this.canvasesPerCanvasGroup);\n    this.isHitOnActiveCanvasGroup = this.findHitOnActiveCanvasGroup();\n    this._isFirstHitOnCanvasGroup = this.isFirstHitOnCanvasGroup();\n    this._isLastHitOnCanvasGroup = this.findLastHitOnCanvasGroup();\n  }\n\n  getCurrentIndex(): number {\n    return this.currentIndex;\n  }\n\n  getHitOnActiveCanvasGroup(): boolean {\n    return this.isHitOnActiveCanvasGroup;\n  }\n\n  getFirstHitCanvasGroup(): boolean {\n    return this._isFirstHitOnCanvasGroup;\n  }\n\n  getLastHitCanvasGroup(): boolean {\n    return this._isLastHitOnCanvasGroup;\n  }\n\n  goToNextCanvasGroupHit() {\n    if (this.searchResult && !this._isLastHitOnCanvasGroup) {\n      let nextHit: Hit | undefined;\n      if (this.currentIndex === -1) {\n        nextHit = this.searchResult.get(0);\n      } else {\n        const current = this.searchResult.get(this.currentIndex);\n        const canvasGroup = this.canvasService.findCanvasGroupByCanvasIndex(\n          current.index\n        );\n        const canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n          canvasGroup\n        );\n        const lastCanvasGroupIndex = this.getLastCanvasGroupIndex(\n          canvasesPerCanvasGroup\n        );\n        nextHit = this.searchResult.hits.find(\n          (h) => h.index > lastCanvasGroupIndex\n        );\n      }\n      if (nextHit) {\n        this.goToCanvasIndex(nextHit);\n      }\n    }\n  }\n\n  goToPreviousCanvasGroupHit() {\n    const previousIndex = this.isHitOnActiveCanvasGroup\n      ? this.currentIndex - 1\n      : this.currentIndex;\n    const previousHit = this.findFirstHitOnCanvasGroup(previousIndex);\n    if (previousHit) {\n      this.goToCanvasIndex(previousHit);\n    }\n  }\n\n  private goToCanvasIndex(hit: Hit): void {\n    this.currentIndex = this.findCurrentHitIndex([hit.index]);\n    this.iiifContentSearchService.selected(hit);\n  }\n\n  private findLastHitOnCanvasGroup(): boolean {\n    if (!this.searchResult) {\n      return false;\n    }\n    const lastCanvasIndex = this.searchResult.get(this.searchResult.size() - 1)\n      .index;\n    const currentHit = this.searchResult.get(this.currentIndex);\n    return currentHit.index === lastCanvasIndex;\n  }\n\n  private findFirstHitOnCanvasGroup(previousIndex: number): Hit | undefined {\n    if (!this.searchResult) {\n      return;\n    }\n    let previousHit: Hit | undefined = this.searchResult.get(previousIndex);\n    const canvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      previousHit.index\n    );\n    const canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n      canvasGroupIndex\n    );\n    const leftCanvas = canvasesPerCanvasGroup[0];\n    const leftCanvasHit = this.searchResult.hits.find(\n      (h) => h.index === leftCanvas\n    );\n    if (leftCanvasHit) {\n      previousHit = leftCanvasHit;\n    } else if (canvasesPerCanvasGroup.length === 2) {\n      const rightCanvas = canvasesPerCanvasGroup[1];\n      previousHit = this.searchResult.hits.find((h) => h.index === rightCanvas);\n    }\n    return previousHit;\n  }\n\n  private findHitOnActiveCanvasGroup(): boolean {\n    if (!this.searchResult) {\n      return false;\n    }\n    return (\n      this.canvasesPerCanvasGroup.indexOf(\n        this.searchResult.get(this.currentIndex).index\n      ) >= 0\n    );\n  }\n\n  private findCurrentHitIndex(canvasGroupIndexes: number[]): number {\n    if (!this.searchResult) {\n      return -1;\n    }\n\n    for (let i = 0; i < this.searchResult.size(); i++) {\n      const hit = this.searchResult.get(i);\n      if (canvasGroupIndexes.indexOf(hit.index) >= 0) {\n        return i;\n      }\n      if (hit.index >= canvasGroupIndexes[canvasGroupIndexes.length - 1]) {\n        if (i === 0) {\n          return -1;\n        } else {\n          const phit = this.searchResult.get(i - 1);\n          return this.searchResult.hits.findIndex(\n            (sr) => sr.index === phit.index\n          );\n        }\n      }\n    }\n    return this.searchResult.size() - 1;\n  }\n\n  private isFirstHitOnCanvasGroup() {\n    return this.currentIndex <= 0;\n  }\n\n  private getLastCanvasGroupIndex(canvasesPerCanvasGroup: number[]) {\n    return canvasesPerCanvasGroup.length === 1\n      ? canvasesPerCanvasGroup[0]\n      : canvasesPerCanvasGroup[1];\n  }\n}\n","/****************************************************************\n * MIME-viewer options\n ****************************************************************/\n\nexport const ViewerOptions = {\n  zoom: {\n    zoomFactor: 1.15,\n    dblClickZoomFactor: 2.7,\n    // How many pixels since lastDistance before it is considered a pinch\n    pinchZoomThreshold: 3\n  },\n\n  pan: {\n    // Sensitivity when determining swipe-direction.\n    // Higher threshold means that swipe must be more focused in\n    // x-direction before the gesture is recognized as \"left\" or \"right\"\n    swipeDirectionThreshold: 70\n  },\n\n  // All transition times in milliseconds\n  transitions: {\n    toolbarsEaseInTime: 400,\n    toolbarsEaseOutTime: 500,\n    OSDAnimationTime: 600 // Animation-time for OSD-animations\n  },\n\n  overlays: {\n    // Margin between canvas groups in Dashboard View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInDashboardView: 300,\n    // Margin between canvas groups in Page View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInPageView: 20\n  },\n\n  padding: {\n    // Padding in viewer container in pixels\n    header: 80, // Placeholder above viewer for header in Dashboard View\n    footer: 80 // Placeholder below viewer for footer in Dashboard View\n  },\n\n  colors: {\n    canvasGroupBackgroundColor: '#fafafa'\n  }\n};\n","import { Rect } from '../models/rect';\nimport { CanvasGroupPositionCriteria } from './calculate-canvas-group-position-strategy';\n\nexport const canvasRectFromCriteria = (\n  rotation: number,\n  criteria: CanvasGroupPositionCriteria,\n  x: number\n) => {\n  let rect = {};\n  const scale =\n    (criteria.canvasSource.service?.service?.physicalScale\n      ? criteria.canvasSource.service?.service?.physicalScale\n      : 1) * 400;\n\n  if (rotation === 90 || rotation === 270) {\n    rect = {\n      height: Math.trunc(criteria.canvasSource.width * scale),\n      width: Math.trunc(criteria.canvasSource.height * scale),\n      x: x,\n      y: Math.trunc((criteria.canvasSource.width * scale) / 2) * -1,\n    };\n  } else {\n    rect = {\n      height: Math.trunc(criteria.canvasSource.height * scale),\n      width: Math.trunc(criteria.canvasSource.width * scale),\n      x: x,\n      y: Math.trunc((criteria.canvasSource.height * scale) / 2) * -1,\n    };\n  }\n  return new Rect(rect);\n};\n","import { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class OnePageCalculatePagePositionStrategy\n  implements CalculateCanvasGroupPositionStrategy {\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation: number = 0\n  ): Rect {\n    let x: number;\n    if (!criteria.canvasGroupIndex) {\n      if (rotation === 90 || rotation === 270) {\n        x = (criteria.canvasSource.height / 2) * -1;\n      } else {\n        x = (criteria.canvasSource.width / 2) * -1;\n      }\n    } else {\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateLtrX(criteria)\n          : this.calculateRtlX(criteria);\n    }\n    return canvasRectFromCriteria(rotation, criteria, x);\n  }\n\n  private calculateLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.previousCanvasGroupPosition.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n}\n","import { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class TwoPageCalculateCanvasGroupPositionStrategy\n  implements CalculateCanvasGroupPositionStrategy {\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation: number = 0\n  ): Rect {\n    let x: number;\n\n    if (!criteria.canvasGroupIndex) {\n      // First page\n      x = 0;\n    } else if (criteria.canvasGroupIndex % 2) {\n      // Even page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateEvenLtrX(criteria)\n          : this.calculateEvenRtlX(criteria);\n    } else {\n      // Odd page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateOddLtrX(criteria)\n          : this.calculateOddRtlX(criteria);\n    }\n\n    return canvasRectFromCriteria(rotation, criteria, x);\n  }\n\n  private calculateEvenLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width\n    );\n  }\n\n  private calculateEvenRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.canvasSource.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddRtlX(criteria: CanvasGroupPositionCriteria) {\n    return criteria.previousCanvasGroupPosition.x - criteria.canvasSource.width;\n  }\n}\n","import { CalculateCanvasGroupPositionStrategy } from './calculate-canvas-group-position-strategy';\nimport { OnePageCalculatePagePositionStrategy } from './one-page-calculate-page-position-strategy';\nimport { TwoPageCalculateCanvasGroupPositionStrategy } from './two-page-calculate-page-position-strategy';\nimport { ViewerLayout } from '../models/viewer-layout';\n\nexport class CalculateCanvasGroupPositionFactory {\n  public static create(\n    viewerLayout: ViewerLayout,\n    paged: boolean\n  ): CalculateCanvasGroupPositionStrategy {\n    if (viewerLayout === ViewerLayout.ONE_PAGE || !paged) {\n      return new OnePageCalculatePagePositionStrategy();\n    } else {\n      return new TwoPageCalculateCanvasGroupPositionStrategy();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ClickService {\n  private singleClickHandlers: Array<(event: any) => void> = [];\n  private doubleClickHandlers: Array<(event: any) => void> = [];\n  private clickCount = 0;\n  private dblClickTimeOut: any;\n\n  constructor() {}\n\n  reset(): void {\n    this.singleClickHandlers = [];\n    this.doubleClickHandlers = [];\n  }\n\n  addSingleClickHandler(singleClickHandler: (event: any) => void) {\n    this.singleClickHandlers.push(singleClickHandler);\n  }\n\n  addDoubleClickHandler(doubleClickHandler: (event: any) => void) {\n    this.doubleClickHandlers.push(doubleClickHandler);\n  }\n\n  private triggerSingleClick(event: any) {\n    this.singleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  private triggerDoubleClick(event: any) {\n    this.doubleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  click = (event: any) => {\n    event.preventDefaultAction = true;\n    if (event.quick) {\n      this.clickCount++;\n      if (this.clickCount === 1) {\n        this.dblClickTimeOut = setTimeout(() => {\n          this.clickCount = 0;\n          this.triggerSingleClick(event);\n        }, event.tracker.dblClickTimeThreshold);\n      } else if (this.clickCount === 2) {\n        clearTimeout(this.dblClickTimeOut);\n        this.clickCount = 0;\n        this.triggerDoubleClick(event);\n      }\n    }\n  };\n}\n","declare const OpenSeadragon: any;\n\n// OpenSeadragon SVG Overlay plugin 0.0.4\n\nexport function createSvgOverlay() {\n  if (!OpenSeadragon) {\n    console.error('[openseadragon-svg-overlay] requires OpenSeadragon');\n    return;\n  }\n\n  const svgNS = 'http://www.w3.org/2000/svg';\n\n  // ----------\n  class Overlay {\n    // ----------\n\n    _viewer: any;\n    _containerWidth: any;\n    _containerHeight: any;\n    _svg: any;\n    _node: any;\n\n    constructor(viewer: any) {\n      const self = this;\n\n      this._viewer = viewer;\n      this._containerWidth = 0;\n      this._containerHeight = 0;\n\n      this._svg = document.createElementNS(svgNS, 'svg');\n      this._svg.style.position = 'absolute';\n      this._svg.style.left = 0;\n      this._svg.style.top = 0;\n      this._svg.style.width = '100%';\n      this._svg.style.height = '100%';\n      this._viewer.canvas.appendChild(this._svg);\n\n      this._node = document.createElementNS(svgNS, 'g');\n      this._svg.appendChild(this._node);\n\n      this._viewer.addHandler('animation', function() {\n        self.resize();\n      });\n\n      this._viewer.addHandler('open', function() {\n        self.resize();\n      });\n\n      this._viewer.addHandler('rotate', function(evt: any) {\n        self.resize();\n      });\n\n      this._viewer.addHandler('resize', function() {\n        self.resize();\n      });\n\n      this.resize();\n    }\n    node() {\n      return this._node;\n    }\n\n    // ----------\n    resize() {\n      if (this._containerWidth !== this._viewer.container.clientWidth) {\n        this._containerWidth = this._viewer.container.clientWidth;\n        this._svg.setAttribute('width', this._containerWidth);\n      }\n\n      if (this._containerHeight !== this._viewer.container.clientHeight) {\n        this._containerHeight = this._viewer.container.clientHeight;\n        this._svg.setAttribute('height', this._containerHeight);\n      }\n\n      const p = this._viewer.viewport.pixelFromPoint(\n        new OpenSeadragon.Point(0, 0),\n        true\n      );\n      const zoom = this._viewer.viewport.getZoom(true);\n      const rotation = this._viewer.viewport.getRotation();\n      // TODO: Expose an accessor for _containerInnerSize in the OSD API so we don't have to use the private variable.\n      const scale = this._viewer.viewport._containerInnerSize.x * zoom;\n      this._node.setAttribute(\n        'transform',\n        'translate(' +\n          p.x +\n          ',' +\n          p.y +\n          ') scale(' +\n          scale +\n          ') rotate(' +\n          rotation +\n          ')'\n      );\n    }\n\n    // ----------\n    onClick(node: any, handler: any) {\n      // TODO: Fast click for mobile browsers\n\n      new OpenSeadragon.MouseTracker({\n        element: node,\n        clickHandler: handler\n      }).setTracking(true);\n    }\n  }\n\n  // ----------\n\n  // ----------\n  OpenSeadragon.Viewer.prototype.svgOverlay = function() {\n    if (this._svgOverlayInfo) {\n      return this._svgOverlayInfo;\n    }\n\n    this._svgOverlayInfo = new Overlay(this);\n    return this._svgOverlayInfo;\n  };\n}\n","import { Manifest, Sequence } from '../models/manifest';\n\nexport class ManifestUtils {\n  static isManifestPaged(manifest: Manifest): boolean {\n    return (\n      ManifestUtils.isManifestViewingHintPaged(manifest) ||\n      ManifestUtils.isSequenceViewingHintPaged(manifest)\n    );\n  }\n\n  static isManifestViewingHintPaged(manifest: Manifest): boolean {\n    return manifest && manifest.viewingHint === 'paged';\n  }\n\n  static isSequenceViewingHintPaged(manifest: Manifest): boolean {\n    let firstSequence: Sequence | null = null;\n    if (manifest && manifest.sequences && manifest.sequences.length > 0) {\n      firstSequence = manifest.sequences[0];\n    }\n    return firstSequence ? firstSequence.viewingHint === 'paged' : false;\n  }\n\n  static hasRecognizedTextContent(manifest: Manifest): boolean {\n    if (manifest.sequences && manifest.sequences.length > 0) {\n      const firstSequence = manifest.sequences[0];\n      if (firstSequence.canvases && firstSequence.canvases.length > 0) {\n        return firstSequence.canvases.find((c: any) => c.altoUrl) !== undefined;\n      }\n    }\n    return false;\n  }\n}\n","export class PinchStatus {\n  public active = false;\n  public previousGestureId = 0;\n  public shouldStop = false;\n}\n","export enum Side {\n  LEFT,\n  RIGHT,\n  TOP,\n  BOTTOM\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { interval, ReplaySubject, Observable, Subscription } from 'rxjs';\nimport { switchMap, tap, distinctUntilChanged, filter } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StyleService {\n  private currentRgbColor: string | undefined;\n  private colorSubject: ReplaySubject<string> = new ReplaySubject();\n  private subscriptions!: Subscription;\n\n  constructor(private zone: NgZone) {}\n\n  get onChange(): Observable<string> {\n    return this.colorSubject.asObservable().pipe(\n      filter(c => c !== null),\n      distinctUntilChanged()\n    );\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.zone.runOutsideAngular(() => {\n      this.subscriptions.add(interval(1000)\n        .pipe(\n          tap(() => {\n            const previousRgbColor = this.currentRgbColor;\n            const currentRgbColor = this.getComputedBackgroundColor(1);\n            if (previousRgbColor !== currentRgbColor) {\n              this.currentRgbColor = currentRgbColor;\n              this.colorSubject.next(currentRgbColor);\n            }\n          })\n        )\n        .subscribe());\n    });\n  }\n\n  destroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  public convertToRgba(rgbColor: string, opacity: number) {\n    return rgbColor.replace(/rgb/i, 'rgba').replace(/\\)/i, `,${opacity})`);\n  }\n\n  private getComputedBackgroundColor(opacity: number): string | undefined {\n    const matAppBackground = document.getElementsByClassName(\n      'mat-app-background'\n    );\n    const matSidenavContainer = document.getElementsByTagName(\n      'mat-sidenav-container'\n    );\n\n    if (matAppBackground.length > 0) {\n      return this.getComputedStyle(matAppBackground[0], 'background-color');\n    } else if (matSidenavContainer.length > 0) {\n      return this.getComputedStyle(matSidenavContainer[0], 'background-color');\n    } else {\n      return undefined;\n    }\n  }\n\n  private getComputedStyle(el: any, property: string) {\n    return window.getComputedStyle(el, null).getPropertyValue(property);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerLayout } from '../models/viewer-layout';\n\n@Injectable()\nexport class ViewerLayoutService {\n  private mimeConfig = new MimeViewerConfig();\n  private _layout!: ViewerLayout;\n  private subject: BehaviorSubject<ViewerLayout> = new BehaviorSubject<\n    ViewerLayout\n  >(this.mimeConfig.initViewerLayout);\n  constructor(private mediaObserver: MediaObserver) {}\n\n  init(isPagedManifest?: boolean): void {\n    if (\n      this.mimeConfig.initViewerLayout === ViewerLayout.TWO_PAGE &&\n      isPagedManifest &&\n      !this.isMobile()\n    ) {\n      this._layout = ViewerLayout.TWO_PAGE;\n      this.change();\n    } else {\n      this._layout = ViewerLayout.ONE_PAGE;\n      this.change();\n    }\n  }\n\n  get onChange(): Observable<ViewerLayout> {\n    return this.subject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get layout(): ViewerLayout {\n    return this._layout;\n  }\n\n  setLayout(viewerLayout: ViewerLayout) {\n    this._layout = viewerLayout;\n    this.change();\n  }\n\n  toggle() {\n    if (this._layout === ViewerLayout.TWO_PAGE) {\n      this.setLayout(ViewerLayout.ONE_PAGE);\n    } else if (this._layout === ViewerLayout.ONE_PAGE) {\n      this.setLayout(ViewerLayout.TWO_PAGE);\n    }\n  }\n\n  private change() {\n    this.subject.next(this._layout);\n  }\n\n  private isMobile(): boolean {\n    return this.mediaObserver.isActive('lt-md');\n  }\n}\n","export enum Direction {\n  UNDEFINED = 0,\n  LEFT = 1,\n  RIGHT = 2,\n  UP = 3,\n  DOWN = 4,\n  NEXT = 5,\n  PREVIOUS = 6\n}\n","import { Direction } from '../models/direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class NavigatorCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n\n    let nextCanvasGroup = 1;\n    nextCanvasGroup =\n      direction === Direction.NEXT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup = currentCanvasGroupIndex + nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class DashboardModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = criteria.currentCanvasGroupCenter;\n\n    let nextCanvasGroup: number;\n    let canvasGroupDelta = this.calculateNumberOfCanvasGroupsToGo(speed);\n    if (canvasGroupDelta === 0) {\n      nextCanvasGroup = currentCanvasGroupCenter;\n    } else {\n      canvasGroupDelta =\n        direction === Direction.LEFT ? canvasGroupDelta : canvasGroupDelta * -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? currentCanvasGroupIndex + canvasGroupDelta\n          : currentCanvasGroupIndex - canvasGroupDelta;\n    }\n    return nextCanvasGroup;\n  }\n\n  private calculateNumberOfCanvasGroupsToGo(speed: number | undefined): number {\n    let canvasGroupsToGo = 10;\n    if (speed !== undefined) {\n      if (speed < 500) {\n        canvasGroupsToGo = 0;\n      } else if (speed >= 500 && speed < 1500) {\n        canvasGroupsToGo = 1;\n      } else if (speed >= 1500 && speed < 2500) {\n        canvasGroupsToGo = 3;\n      } else if (speed >= 2500 && speed < 3500) {\n        canvasGroupsToGo = 5;\n      }\n    }\n    return canvasGroupsToGo;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const isNewCanvasGroupInCenter =\n      criteria.currentCanvasGroupIndex !== criteria.currentCanvasGroupCenter;\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n    let nextCanvasGroup = criteria.currentCanvasGroupIndex;\n    if (speed && speed >= 200) {\n      const diff = direction === Direction.LEFT ? 1 : -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? criteria.currentCanvasGroupIndex + diff\n          : criteria.currentCanvasGroupIndex - diff;\n    } else if (isNewCanvasGroupInCenter) {\n      nextCanvasGroup = criteria.currentCanvasGroupCenter;\n    }\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageZoomedModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const canvasGroupEndHitCountReached =\n      criteria.canvasGroupEndHitCountReached;\n\n    let nextCanvasGroup = canvasGroupEndHitCountReached ? 1 : 0;\n\n    nextCanvasGroup =\n      direction === Direction.LEFT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup =\n      criteria.viewingDirection === ViewingDirection.LTR\n        ? currentCanvasGroupIndex + nextCanvasGroup\n        : currentCanvasGroupIndex - nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { ViewerMode } from '../models/viewer-mode';\nimport { NavigatorCalculateNextCanvasGroupStrategy } from './navigator-calculate-next-canvas-group-strategy';\nimport { CalculateNextCanvasGroupStrategy } from './calculate-next-canvas-group-strategy';\nimport { DashboardModeCalculateNextCanvasGroupStrategy } from './dashboard-mode-calculate-next-canvas-group-strategy';\nimport { PageModeCalculateNextCanvasGroupStrategy } from './page-mode-calculate-next-canvas-group-strategy';\nimport { PageZoomedModeCalculateNextCanvasGroupStrategy } from './page-zoomed-mode-calculate-next-canvas-group-strategy';\n\nexport class CalculateNextCanvasGroupFactory {\n  public static create(mode: ViewerMode): CalculateNextCanvasGroupStrategy {\n    if (mode === ViewerMode.DASHBOARD) {\n      return new DashboardModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE) {\n      return new PageModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE_ZOOMED) {\n      return new PageZoomedModeCalculateNextCanvasGroupStrategy();\n    } else {\n      return new NavigatorCalculateNextCanvasGroupStrategy();\n    }\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\nimport { Subscription } from 'rxjs';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { StyleService } from '../style-service/style.service';\n\nexport class CanvasGroupMask {\n  viewer: any;\n  canvasGroupRect = new Rect();\n\n  leftMask: any;\n  rightMask: any;\n\n  disableResize = false;\n  center!: Point;\n\n  backgroundColor!: string;\n  private subscriptions!: Subscription;\n\n  constructor(viewer: any, private styleService: StyleService) {\n    this.viewer = viewer;\n  }\n\n  public initialize(pageBounds: Rect, visible: boolean): void {\n    this.unsubscribe();\n    this.subscriptions = new Subscription();\n\n    this.subscriptions.add(\n      this.styleService.onChange.subscribe((c) => {\n        this.backgroundColor = c;\n        if (this.leftMask) {\n          this.leftMask.style('fill', this.backgroundColor);\n        }\n        if (this.rightMask) {\n          this.rightMask.style('fill', this.backgroundColor);\n        }\n      })\n    );\n\n    this.canvasGroupRect = pageBounds;\n\n    this.addCanvasGroupMask();\n\n    this.setCenter();\n    this.resize();\n\n    if (visible) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  public destroy() {\n    this.unsubscribe();\n  }\n\n  public changeCanvasGroup(pageBounds: Rect) {\n    this.canvasGroupRect = pageBounds;\n    this.resize();\n  }\n\n  public show(): void {\n    this.addHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.setCenter();\n    this.resize();\n    this.leftMask.attr('height', '100%');\n    this.rightMask.attr('height', '100%');\n  }\n\n  public hide(): void {\n    this.removeHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.leftMask.attr('height', '0');\n    this.rightMask.attr('height', '0');\n  }\n\n  private addHandlers() {\n    this.viewer.addHandler('animation', this.animationHandler);\n    this.viewer.addHandler('resize', this.resizeHandler);\n    this.viewer.addHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.addHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.addHandler('canvas-drag-end', this.canvasGroupDragEndHandler);\n  }\n\n  private removeHandlers() {\n    this.viewer.removeHandler('animation', this.animationHandler);\n    this.viewer.removeHandler('resize', this.resizeHandler);\n    this.viewer.removeHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.removeHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.removeHandler(\n      'canvas-drag-end',\n      this.canvasGroupDragEndHandler\n    );\n  }\n\n  private animationHandler = () => {\n    this.resize();\n  };\n\n  private resizeHandler = () => {\n    this.setCenter();\n    this.resize();\n  };\n\n  private canvasGroupPinchHandler = () => {\n    this.disableResize = false;\n  };\n\n  private canvasGroupDragHandler = (e: any) => {\n    if ((e.delta.x || e.delta.y) && e.speed > 0 && e.direction !== 0) {\n      this.disableResize = true;\n    }\n  };\n\n  private canvasGroupDragEndHandler = () => {\n    this.disableResize = false;\n    this.resize();\n  };\n\n  private addCanvasGroupMask() {\n    const overlays = d3.select(this.viewer.svgOverlay().node().parentNode);\n\n    const mask = overlays.append('g').attr('id', 'page-mask');\n\n    this.leftMask = mask\n      .append('rect')\n      .attr('id', 'mime-left-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n\n    this.rightMask = mask\n      .append('rect')\n      .attr('id', 'mime-right-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n  }\n\n  private setCenter(): void {\n    this.center = new OpenSeadragon.Point(\n      this.viewer.viewport._containerInnerSize.x / 2,\n      this.viewer.viewport._containerInnerSize.y / 2\n    );\n  }\n\n  private resize(): void {\n    if (this.disableResize || !this.leftMask || !this.rightMask) {\n      return;\n    }\n\n    const leftMaskRect = this.getLeftMaskRect();\n    const rightMaskRect = this.getRightMaskRect();\n    this.leftMask.attr('width', leftMaskRect.width).attr('x', leftMaskRect.x);\n    this.rightMask\n      .attr('width', rightMaskRect.width)\n      .attr('x', Math.round(rightMaskRect.x));\n  }\n\n  private getLeftMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topLeft = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopLeft()\n    );\n    let width = topLeft.x - ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: 0,\n      width: width,\n    });\n  }\n\n  private getRightMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topRight = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopRight()\n    );\n    let width = this.viewer.viewport._containerInnerSize.x - topRight.x;\n    const x =\n      this.viewer.viewport._containerInnerSize.x -\n      width +\n      ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: x,\n      width: width,\n    });\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { CanvasService } from '../canvas-service/canvas-service';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Direction } from '../models/direction';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { Strategy } from './zoom-strategy';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  direction?: Direction;\n  immediately?: boolean;\n}\n\nexport interface GoToCanvasGroupStrategy {\n  goToCanvasGroup(canvasGroup: CanvasGroup): void;\n  goToPreviousCanvasGroup(currentCanvasIndex: number): void;\n  goToNextCanvasGroup(currentCanvasIndex: number): void;\n  centerCurrentCanvas(): void;\n}\n\nexport class DefaultGoToCanvasGroupStrategy implements GoToCanvasGroupStrategy {\n  constructor(\n    private viewer: any,\n    private zoomStrategy: Strategy,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private config: MimeViewerConfig,\n    private viewingDirection: ViewingDirection\n  ) {}\n\n  goToCanvasGroup(canvasGroup: CanvasGroup) {\n    const oldCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    this.canvasService.currentCanvasGroupIndex = this.canvasService.constrainToRange(\n      canvasGroup.canvasGroupIndex\n    );\n    const newCanvasGroup = this.canvasService.getCanvasGroupRect(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    if (\n      this.modeService.isPageZoomed() &&\n      this.config.preserveZoomOnCanvasGroupChange\n    ) {\n      let x: number;\n\n      if (oldCanvasGroupIndex > canvasGroup.canvasGroupIndex) {\n        if (this.config.startOnTopOnCanvasGroupChange) {\n          const canvasGroupIndexes = this.canvasService.getCanvasesPerCanvasGroup(\n            canvasGroup.canvasGroupIndex\n          );\n          const previousCanvasIndex =\n            canvasGroupIndexes[canvasGroupIndexes.length - 1];\n          const previousCanvasRect = this.canvasService.getCanvasRect(\n            previousCanvasIndex\n          );\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.leftX(previousCanvasRect)\n              : this.rightX(newCanvasGroup);\n        } else {\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.rightX(newCanvasGroup)\n              : this.leftX(newCanvasGroup);\n        }\n      } else {\n        x =\n          this.viewingDirection === ViewingDirection.LTR\n            ? this.leftX(newCanvasGroup)\n            : this.rightX(newCanvasGroup);\n      }\n\n      const y =\n        this.config.startOnTopOnCanvasGroupChange &&\n        oldCanvasGroupIndex !== canvasGroup.canvasGroupIndex\n          ? newCanvasGroup.y +\n            this.getViewportBounds().height / 2 -\n            this.viewer.collectionTileMargin\n          : this.getViewportCenter().y;\n\n      this.panTo(x, y, canvasGroup.immediately);\n    } else if (this.modeService.isPageZoomed()) {\n      const oldCanvasGroupCenter = this.canvasService.getCanvasGroupRect(\n        oldCanvasGroupIndex\n      );\n      this.panToCenter(oldCanvasGroupCenter, canvasGroup.immediately);\n      this.zoomStrategy.goToHomeZoom();\n      setTimeout(() => {\n        this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n        this.modeService.mode = ViewerMode.PAGE;\n      }, ViewerOptions.transitions.OSDAnimationTime);\n    } else {\n      this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n    }\n  }\n\n  public goToPreviousCanvasGroup(currentCanvasIndex: number): void {\n    if (this.canvasService.currentCanvasGroupIndex > 0) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        viewportCenter\n      );\n\n      const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n        ViewerMode.NAVIGATOR\n      );\n      const newCanvasGroupIndex = calculateNextCanvasGroupStrategy.calculateNextCanvasGroup(\n        {\n          direction: Direction.PREVIOUS,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection,\n        }\n      );\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n      });\n    }\n  }\n\n  public goToNextCanvasGroup(currentCanvasIndex: number): void {\n    if (\n      this.canvasService.currentCanvasGroupIndex <\n      this.canvasService.numberOfCanvasGroups\n    ) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        viewportCenter\n      );\n\n      const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n        ViewerMode.NAVIGATOR\n      );\n      const newCanvasGroupIndex = calculateNextCanvasGroupStrategy.calculateNextCanvasGroup(\n        {\n          direction: Direction.NEXT,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection,\n        }\n      );\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n      });\n    }\n  }\n\n  public centerCurrentCanvas(): void {\n    const currentCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = this.canvasService.getCanvasGroupRect(\n      currentCanvasGroupIndex\n    );\n    this.panToCenter(currentCanvasGroupCenter, false);\n  }\n\n  private leftX(canvas: Rect): number {\n    return canvas.x + this.getViewportBounds().width / 2;\n  }\n\n  private rightX(canvas: Rect): number {\n    return canvas.x + canvas.width - this.getViewportBounds().width / 2;\n  }\n\n  private panToCenter(canvasGroup: Rect, immediately = false): void {\n    this.panTo(canvasGroup.centerX, canvasGroup.centerY, immediately);\n  }\n\n  private panTo(x: number, y: number, immediately = false): void {\n    this.viewer.viewport.panTo(\n      {\n        x: x,\n        y: y,\n      },\n      immediately\n    );\n  }\n\n  private getViewportCenter(): Point {\n    return this.viewer.viewport.getCenter(true);\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer.viewport.getBounds(true);\n  }\n}\n","import { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerOptions } from '../models/viewer-options';\nimport * as OpenSeadragon from 'openseadragon';\n\nexport class OptionsFactory {\n  public static create(\n    mimeViewerConfig: MimeViewerConfig\n  ): OpenSeadragon.Options {\n    let options: OpenSeadragon.Options = OpenSeadragon.DEFAULT_SETTINGS;\n    return {\n      ...options,\n      id: 'openseadragon',\n      useCanvas: !options.iOSDevice,\n      panVertical: true,\n      minZoomImageRatio: 1,\n      maxZoomPixelRatio: 1,\n      smoothTileEdgesMinZoom: 1,\n      preserveImageSizeOnResize: true,\n      visibilityRatio: 0,\n      showNavigationControl: false,\n      animationTime: ViewerOptions.transitions.OSDAnimationTime / 1000,\n      ajaxWithCredentials: mimeViewerConfig.withCredentials,\n      loadTilesWithAjax: mimeViewerConfig.loadTilesWithAjax,\n      crossOriginPolicy: mimeViewerConfig.crossOriginPolicy,\n      ajaxHeaders: mimeViewerConfig.ajaxHeaders,\n      gestureSettingsMouse: {\n        ...options.gestureSettingsMouse,\n        scrollToZoom: false,\n        clickToZoom: false,\n      },\n      gestureSettingsTouch: {\n        ...options.gestureSettingsTouch,\n        dblClickToZoom: false,\n        pinchToZoom: false,\n        flickEnabled: false,\n      },\n      gestureSettingsPen: {\n        ...options.gestureSettingsPen,\n        clickToZoom: false,\n      },\n      gestureSettingsUnknown: {\n        ...options.gestureSettingsUnknown,\n        scrollToZoom: false,\n        dblClickToZoom: false,\n        pinchToZoom: false,\n        flickEnabled: false,\n      },\n    };\n  }\n}\n","import { Direction } from '../models/direction';\nimport { Side } from '../models/side';\nexport class SwipeDragEndCounter {\n  public leftCount = 0;\n  public rightCount = 0;\n\n  constructor() {\n    this.reset();\n  }\n\n  public reset(): void {\n    this.leftCount = 0;\n    this.rightCount = 0;\n  }\n\n  /**\n   * @param direction of swipe / pan\n   * @param side hit by swipe\n   */\n  public addHit(side: Side | null, dir: Direction | null): void {\n    if (side !== null) {\n      this.incrementSide(side);\n    }\n    if (dir !== null) {\n      this.clearOppositeSideOfDragDirection(dir);\n    }\n  }\n\n  public hitCountReached(): boolean {\n    return this.leftCount >= 2 || this.rightCount >= 2;\n  }\n\n  private incrementSide(side: Side): void {\n    if (side === Side.LEFT) {\n      this.leftCount++;\n      this.rightCount = 0;\n    } else if (side === Side.RIGHT) {\n      this.rightCount++;\n      this.leftCount = 0;\n    }\n  }\n\n  /**\n   * Clear opposite side if swiping in the other direction\n   * @param Direction of swipe / pan\n   */\n  private clearOppositeSideOfDragDirection(dir: Direction): void {\n    if (dir === Direction.LEFT) {\n      this.leftCount = 0;\n    } else if (dir === Direction.RIGHT) {\n      this.rightCount = 0;\n    }\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\nimport { Side } from '../models/side';\nimport { Direction } from '../models/direction';\nimport { ViewerOptions } from '../models/viewer-options';\nexport class SwipeUtils {\n  // Added threshold to prevent sensitive direction-calculation when zoomed in\n  static getSwipeDirection(\n    start: Point,\n    end: Point,\n    useThreshold?: boolean\n  ): Direction {\n    let deltaX = Math.abs(start.x - end.x);\n    const deltaY = Math.abs(start.y - end.y);\n    deltaX = useThreshold\n      ? deltaX - ViewerOptions.pan.swipeDirectionThreshold\n      : deltaX;\n\n    if (start.x > end.x && deltaX >= deltaY) {\n      return Direction.LEFT;\n    } else if (start.x < end.x && deltaX >= deltaY) {\n      return Direction.RIGHT;\n    } else {\n      return Direction.UNDEFINED;\n    }\n  }\n\n  static getSideIfPanningPastEndOfCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): Side | null {\n    if (this.isPanningOutsideLeft(canvasGroupRect, vpBounds)) {\n      return Side.LEFT;\n    } else if (this.isPanningOutsideRight(canvasGroupRect, vpBounds)) {\n      return Side.RIGHT;\n    } else {\n      return null;\n    }\n  }\n\n  static isPanningOutsideCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): boolean {\n    return (\n      this.isPanningOutsideLeft(canvasGroupRect, vpBounds) ||\n      this.isPanningOutsideRight(canvasGroupRect, vpBounds)\n    );\n  }\n\n  static isPanningOutsideLeft(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return vpBounds.x < canvasGroupRect.x;\n  }\n\n  static isPanningOutsideRight(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return (\n      vpBounds.x + vpBounds.width > canvasGroupRect.x + canvasGroupRect.width\n    );\n  }\n\n  /**\n   *\n   * @param direction Current computed direction, expressed as an\n   * angle counterclockwise relative to the positive X axis (-pi to pi, in radians).\n   * Only valid if speed > 0.\n   */\n  static isDirectionInRightSemicircle(direction: number): boolean {\n    return direction > -Math.PI / 2 && direction < Math.PI / 2;\n  }\n\n  /**\n   * @param direction @see isDirectionInRightSemicircle\n   */\n  static isDirectionInLeftSemicircle(direction: number): boolean {\n    return !this.isDirectionInRightSemicircle(direction) || direction === 0; // fix for speed = 0\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class IiifTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Resource): any {\n    let tileSource: any;\n    if (resource?.service?.service) {\n      tileSource = resource.service;\n      tileSource.tileOverlap = 0.1; // Workaround for https://github.com/openseadragon/openseadragon/issues/1722\n    } else {\n      tileSource = (<any>resource.service)['@id'];\n      if (!tileSource) {\n        tileSource = (<any>resource)['@id'];\n      }\n\n      tileSource =\n        tileSource && tileSource.startsWith('//')\n          ? `${location.protocol}${tileSource}`\n          : tileSource;\n      tileSource =\n        tileSource && !tileSource.endsWith('/info.json')\n          ? `${tileSource}/info.json`\n          : tileSource;\n    }\n    return tileSource;\n  }\n}\n","import { Service } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class StaticImageTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Service | any): any {\n    return {\n      type: 'image',\n      url: resource['@id']\n    };\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { IiifTileSourceStrategy } from './iiif-tile-source-strategy';\nimport { StaticImageTileSourceStrategy } from './static-image-tile-source-strategy';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class TileSourceStrategyFactory {\n  public static create(resource: Resource): TileSourceStrategy {\n    if (resource.service) {\n      return new IiifTileSourceStrategy();\n    } else {\n      return new StaticImageTileSourceStrategy();\n    }\n  }\n}\n","export class Utils {\n  static numbersAreClose(\n    thing: number,\n    realThing: number,\n    epsilon: number\n  ): boolean {\n    return Math.abs(thing - realThing) <= epsilon;\n  }\n  static shortenDecimals(zoom: any, precision: number): number {\n    const short = Number(zoom).toPrecision(precision);\n    return Number(short);\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\n\nexport class ZoomUtils {\n  /**\n   *\n   * @param Point in OSD-viewport-coordinates\n   * @param Rect canvasGroupBounds\n   */\n  static constrainPositionToCanvasGroup(\n    point: Point,\n    canvasGroupBounds: Rect\n  ): Point {\n    if (point.x < canvasGroupBounds.x) {\n      point.x = canvasGroupBounds.x;\n    } else if (point.x > canvasGroupBounds.x + canvasGroupBounds.width) {\n      point.x = canvasGroupBounds.x + canvasGroupBounds.width;\n    }\n    return point;\n  }\n\n  static constraintZoomFactor(\n    zoomFactor: number,\n    currentZoom: number,\n    maxZoom: number\n  ): number {\n    const target = currentZoom * zoomFactor;\n    return target > maxZoom ? (maxZoom / target) * zoomFactor : zoomFactor;\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Dimensions } from '../models/dimensions';\nimport { Direction } from '../models/direction';\nimport { Point } from '../models/point';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { Utils } from '../utils';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { ZoomUtils } from './zoom-utils';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  canvasGroupEndHitCountReached?: boolean;\n  direction: Direction;\n  immediately: boolean;\n}\n\nexport interface Strategy {\n  setMinZoom(mode: ViewerMode): void;\n  getMinZoom(): number;\n  getMaxZoom(): number;\n  getZoom(): number;\n  goToHomeZoom(): void;\n  zoomTo(level: number, position?: Point): void;\n  zoomIn(zoomFactor?: number, position?: Point): void;\n  zoomOut(zoomFactor?: number, position?: Point): void;\n}\n\nexport class ZoomStrategy {\n  constructor(\n    protected viewer: any,\n    protected canvasService: CanvasService,\n    protected modeService: ModeService,\n    protected viewerLayoutService: ViewerLayoutService\n  ) {}\n\n  setMinZoom(mode: ViewerMode): void {\n    this.viewer.viewport.minZoomLevel = this.getHomeZoomLevel(mode);\n  }\n\n  getMinZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMinZoom(), 5);\n  }\n\n  getMaxZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMaxZoom(), 5);\n  }\n\n  getZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getZoom(true), 5);\n  }\n\n  goToHomeZoom(): void {\n    this.zoomTo(this.getHomeZoomLevel(this.modeService.mode));\n    if (this.modeService.isPageZoomed()) {\n      this.modeService.mode = ViewerMode.PAGE;\n    }\n  }\n\n  zoomTo(level: number, position?: Point): void {\n    this.viewer.viewport.zoomTo(level, position);\n  }\n\n  private getHomeZoomLevel(mode: ViewerMode): number {\n    if (!this.viewer || !this.canvasService) {\n      return 1;\n    }\n\n    let canvasGroupHeight: number;\n    let canvasGroupWidth: number;\n    let viewportBounds: any;\n\n    if (mode === ViewerMode.DASHBOARD) {\n      canvasGroupHeight = this.canvasService.getMaxHeight();\n      canvasGroupWidth = this.canvasService.getMaxWidth();\n      viewportBounds = this.getDashboardViewportBounds();\n    } else {\n      const currentCanvasGroupRect = this.canvasService.getCurrentCanvasGroupRect();\n      canvasGroupHeight = currentCanvasGroupRect.height;\n      canvasGroupWidth = currentCanvasGroupRect.width;\n      viewportBounds = this.viewer.viewport.getBounds();\n    }\n\n    return this.getFittedZoomLevel(\n      viewportBounds,\n      canvasGroupHeight,\n      canvasGroupWidth\n    );\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    if (!zoomFactor) {\n      zoomFactor = ViewerOptions.zoom.zoomFactor;\n    }\n\n    if (position) {\n      position = this.viewer.viewport.pointFromPixel(position);\n      if (position) {\n        position = ZoomUtils.constrainPositionToCanvasGroup(\n          position,\n          this.canvasService.getCurrentCanvasGroupRect()\n        );\n      }\n    }\n\n    if (this.modeService.mode !== ViewerMode.PAGE_ZOOMED) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n    }\n\n    this.zoomBy(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    if (!zoomFactor) {\n      zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, -1);\n    }\n\n    if (position) {\n      position = this.viewer.viewport.pointFromPixel(position);\n      if (position) {\n        position = ZoomUtils.constrainPositionToCanvasGroup(\n          position,\n          this.canvasService.getCurrentCanvasGroupRect()\n        );\n      }\n    }\n\n    if (this.isViewportLargerThanCanvasGroup()) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomBy(zoomFactor, position);\n    }\n  }\n\n  private getDashboardViewportBounds(): any {\n    if (!this.viewer) {\n      return;\n    }\n\n    const homeZoomFactor = this.getHomeZoomFactor();\n    const maxViewportDimensions = new Dimensions(\n      d3\n        .select(this.viewer.container.parentNode.parentNode)\n        .node()\n        .getBoundingClientRect()\n    );\n    const viewportHeight =\n      maxViewportDimensions.height -\n      ViewerOptions.padding.header -\n      ViewerOptions.padding.footer;\n    const viewportWidth = maxViewportDimensions.width * homeZoomFactor;\n\n    const viewportSizeInViewportCoordinates = this.viewer.viewport.deltaPointsFromPixels(\n      new OpenSeadragon.Point(viewportWidth, viewportHeight)\n    );\n\n    return new OpenSeadragon.Rect(\n      0,\n      0,\n      viewportSizeInViewportCoordinates.x,\n      viewportSizeInViewportCoordinates.y\n    );\n  }\n\n  private getFittedZoomLevel(\n    viewportBounds: any,\n    canvasGroupHeight: number,\n    canvasGroupWidth: number\n  ) {\n    const currentZoom: number = this.viewer.viewport.getZoom();\n    const resizeRatio: number = viewportBounds.height / canvasGroupHeight;\n\n    if (resizeRatio * canvasGroupWidth <= viewportBounds.width) {\n      return Utils.shortenDecimals(resizeRatio * currentZoom, 5);\n    } else {\n      // Canvas group at full height is wider than viewport.  Return fit by width instead.\n      return Utils.shortenDecimals(\n        (viewportBounds.width / canvasGroupWidth) * currentZoom,\n        5\n      );\n    }\n  }\n\n  private zoomBy(zoomFactor: number, position?: Point): void {\n    const currentZoom = this.viewer.viewport.getZoom(false);\n    zoomFactor = ZoomUtils.constraintZoomFactor(\n      zoomFactor,\n      currentZoom,\n      this.getMaxZoom()\n    );\n    this.viewer.viewport.zoomBy(zoomFactor, position);\n  }\n\n  private isViewportLargerThanCanvasGroup(): boolean {\n    const canvasGroupRec = this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds = this.viewer.viewport.getBounds();\n    const pbWidth = Math.round(canvasGroupRec.width);\n    const pbHeight = Math.round(canvasGroupRec.height);\n    const vpWidth = Math.round(viewportBounds.width);\n    const vpHeight = Math.round(viewportBounds.height);\n    return vpHeight >= pbHeight || vpWidth >= pbWidth;\n  }\n\n  private getHomeZoomFactor() {\n    return this.modeService.mode === ViewerMode.DASHBOARD\n      ? this.getDashboardZoomHomeFactor()\n      : 1;\n  }\n\n  private getDashboardZoomHomeFactor() {\n    return this.viewerLayoutService.layout === ViewerLayout.ONE_PAGE\n      ? 0.85\n      : 0.66;\n  }\n}\n\nexport class DefaultZoomStrategy extends ZoomStrategy implements Strategy {\n  constructor(\n    viewer: any,\n    canvasService: CanvasService,\n    modeService: ModeService,\n    viewerLayoutService: ViewerLayoutService\n  ) {\n    super(viewer, canvasService, modeService, viewerLayoutService);\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport * as d3 from 'd3';\nimport {\n  BehaviorSubject,\n  interval,\n  Observable,\n  Subject,\n  Subscription,\n} from 'rxjs';\nimport { distinctUntilChanged, sample } from 'rxjs/operators';\nimport { ModeService } from '../../core/mode-service/mode.service';\nimport { AltoService } from '../alto-service/alto.service';\nimport { CalculateCanvasGroupPositionFactory } from '../canvas-group-position/calculate-canvas-group-position-factory';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ClickService } from '../click-service/click.service';\nimport { createSvgOverlay } from '../ext/svg-overlay';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { ManifestUtils } from '../iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { Direction } from '../models/direction';\nimport { Manifest, Resource } from '../models/manifest';\nimport { ModeChanges } from '../models/modeChanges';\nimport { PinchStatus } from '../models/pinchStatus';\nimport { Side } from '../models/side';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { StyleService } from '../style-service/style.service';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { Hit } from './../models/hit';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { SearchResult } from './../models/search-result';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { CanvasGroupMask } from './canvas-group-mask';\nimport {\n  DefaultGoToCanvasGroupStrategy,\n  GoToCanvasGroupStrategy,\n} from './go-to-canvas-group-strategy';\nimport { OptionsFactory } from './options.factory';\nimport { SwipeDragEndCounter } from './swipe-drag-end-counter';\nimport { SwipeUtils } from './swipe-utils';\nimport { TileSourceStrategyFactory } from './tile-source-strategy-factory';\nimport { DefaultZoomStrategy, ZoomStrategy } from './zoom-strategy';\n\ndeclare const OpenSeadragon: any;\n\n@Injectable()\nexport class ViewerService {\n  private viewer?: any;\n  private svgOverlay: any;\n  private svgNode: any;\n  private config!: MimeViewerConfig;\n\n  private overlays: Array<SVGRectElement> = [];\n  private tileSources: Array<Resource> = [];\n  private subscriptions!: Subscription;\n\n  public isCanvasPressed: Subject<boolean> = new BehaviorSubject<boolean>(\n    false\n  );\n\n  private currentCenter: Subject<Point> = new Subject();\n  private currentCanvasIndex: BehaviorSubject<number> = new BehaviorSubject(0);\n  private currentHit = new Subject<Hit>();\n  private osdIsReady = new BehaviorSubject<boolean>(false);\n  private swipeDragEndCounter = new SwipeDragEndCounter();\n  private canvasGroupMask!: CanvasGroupMask;\n  private pinchStatus = new PinchStatus();\n  private dragStartPosition: any;\n  private manifest!: Manifest;\n  private isManifestPaged = false;\n  private defaultKeyDownHandler: any;\n\n  public currentSearch: SearchResult | null = null;\n  private zoomStrategy!: ZoomStrategy;\n  private goToCanvasGroupStrategy!: GoToCanvasGroupStrategy;\n\n  private rotation: BehaviorSubject<number> = new BehaviorSubject(0);\n  private dragStatus = false;\n\n  constructor(\n    private zone: NgZone,\n    private clickService: ClickService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private viewerLayoutService: ViewerLayoutService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private styleService: StyleService,\n    private altoService: AltoService\n  ) {}\n\n  get onRotationChange(): Observable<number> {\n    return this.rotation.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onCenterChange(): Observable<Point> {\n    return this.currentCenter.asObservable();\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this.currentCanvasIndex.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onHitChange(): Observable<Hit> {\n    return this.currentHit.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onOsdReadyChange(): Observable<boolean> {\n    return this.osdIsReady.asObservable().pipe(distinctUntilChanged());\n  }\n\n  initialize() {\n    this.unsubscribe();\n    this.subscriptions = new Subscription();\n  }\n\n  public getViewer(): any {\n    return this.viewer;\n  }\n\n  public getTilesources(): Resource[] {\n    return this.tileSources;\n  }\n\n  public getOverlays(): SVGRectElement[] {\n    return this.overlays;\n  }\n\n  public getZoom(): number {\n    return this.zoomStrategy.getZoom();\n  }\n\n  public getMinZoom(): number {\n    return this.zoomStrategy.getMinZoom();\n  }\n\n  public getMaxZoom(): number {\n    return this.zoomStrategy.getMaxZoom();\n  }\n\n  public home(): void {\n    if (!this.osdIsReady.getValue()) {\n      return;\n    }\n    this.zoomStrategy.setMinZoom(this.modeService.mode);\n\n    this.goToCanvasGroupStrategy.centerCurrentCanvas();\n\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToPreviousCanvasGroup(\n      this.currentCanvasIndex.getValue()\n    );\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToNextCanvasGroup(\n      this.currentCanvasIndex.getValue()\n    );\n  }\n\n  public goToCanvasGroup(canvasGroupIndex: number, immediately: boolean): void {\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately,\n    });\n  }\n\n  public goToCanvas(canvasIndex: number, immediately: boolean): void {\n    const canvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      canvasIndex\n    );\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately,\n    });\n  }\n\n  public highlight(searchResult: SearchResult): void {\n    this.clearHightlight();\n    if (this.viewer) {\n      if (searchResult.q) {\n        this.currentSearch = searchResult;\n      }\n\n      const rotation = this.rotation.getValue();\n\n      for (const hit of searchResult.hits) {\n        for (const rect of hit.rects) {\n          const canvasRect = this.canvasService.getCanvasRect(hit.index);\n          if (canvasRect) {\n            let width = rect.width;\n            let height = rect.height;\n            let x = canvasRect.x;\n            let y = canvasRect.y;\n\n            /* hit rect are relative to each unrotated page canvasRect so x,y must be adjusted by the remaining space */\n            switch (rotation) {\n              case 0:\n                x += rect.x;\n                y += rect.y;\n                break;\n\n              case 90:\n                x += canvasRect.width - rect.y - rect.height;\n                y += rect.x;\n                /* Flip height & width */\n                width = rect.height;\n                height = rect.width;\n                break;\n\n              case 180:\n                x += canvasRect.width - (rect.x + rect.width);\n                y += canvasRect.height - (rect.y + rect.height);\n                break;\n\n              case 270:\n                x += rect.y;\n                y += canvasRect.height - rect.x - rect.width;\n                /* Flip height & width */\n                width = rect.height;\n                height = rect.width;\n                break;\n            }\n\n            const currentOverlay: SVGRectElement = this.svgNode\n              .append('rect')\n              .attr('mimeHitIndex', hit.id)\n              .attr('x', x)\n              .attr('y', y)\n              .attr('width', width)\n              .attr('height', height)\n              .attr('class', 'hit');\n          }\n        }\n      }\n    }\n  }\n\n  private highlightCurrentHit(hit: Hit) {\n    this.svgNode.selectAll(`g > rect.selected`).attr('class', 'hit');\n    this.svgNode\n      .selectAll(`g > rect[mimeHitIndex='${hit.id}']`)\n      .attr('class', 'hit selected');\n  }\n\n  public clearHightlight(): void {\n    if (this.svgNode) {\n      this.svgNode.selectAll('.hit').remove();\n      this.currentSearch = null;\n    }\n  }\n\n  setUpViewer(manifest: Manifest, config: MimeViewerConfig) {\n    this.config = config;\n    if (manifest && manifest.tileSource) {\n      this.tileSources = manifest.tileSource;\n      this.zone.runOutsideAngular(() => {\n        this.manifest = manifest;\n        this.isManifestPaged = ManifestUtils.isManifestPaged(this.manifest);\n        this.viewer = new OpenSeadragon.Viewer(\n          OptionsFactory.create(this.config)\n        );\n        createSvgOverlay();\n        this.zoomStrategy = new DefaultZoomStrategy(\n          this.viewer,\n          this.canvasService,\n          this.modeService,\n          this.viewerLayoutService\n        );\n        this.goToCanvasGroupStrategy = new DefaultGoToCanvasGroupStrategy(\n          this.viewer,\n          this.zoomStrategy,\n          this.canvasService,\n          this.modeService,\n          this.config,\n          this.manifest.viewingDirection\n        );\n\n        /*\n          This disables keyboard navigation in openseadragon.\n          We use s for opening search dialog and OSD use the same key for panning.\n          Issue: https://github.com/openseadragon/openseadragon/issues/794\n         */\n        this.defaultKeyDownHandler = this.viewer.innerTracker.keyDownHandler;\n        this.disableKeyDownHandler();\n        this.viewer.innerTracker.keyHandler = null;\n        this.canvasService.reset();\n        this.canvasGroupMask = new CanvasGroupMask(\n          this.viewer,\n          this.styleService\n        );\n      });\n\n      this.addToWindow();\n      this.setupOverlays();\n      this.createOverlays();\n      this.addEvents();\n      this.addSubscriptions();\n    }\n  }\n\n  addSubscriptions(): void {\n    this.initialize();\n    this.subscriptions.add(\n      this.modeService.onChange.subscribe((mode: ModeChanges) => {\n        this.modeChanged(mode);\n      })\n    );\n\n    this.zone.runOutsideAngular(() => {\n      this.subscriptions.add(\n        this.onCenterChange\n          .pipe(sample(interval(500)))\n          .subscribe((center: Point) => {\n            this.calculateCurrentCanvasGroup(center);\n            if (center && center !== null) {\n              this.osdIsReady.next(true);\n            }\n          })\n      );\n    });\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          this.swipeDragEndCounter.reset();\n          if (canvasGroupIndex !== -1) {\n            this.canvasGroupMask.changeCanvasGroup(\n              this.canvasService.getCanvasGroupRect(canvasGroupIndex)\n            );\n            if (this.modeService.mode === ViewerMode.PAGE) {\n              this.zoomStrategy.goToHomeZoom();\n            }\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.onOsdReadyChange.subscribe((state: boolean) => {\n        if (state) {\n          this.initialCanvasGroupLoaded();\n          this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe((state: ViewerLayout) => {\n        this.layoutPages();\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onSelected.subscribe((hit: Hit | null) => {\n        if (hit) {\n          this.highlightCurrentHit(hit);\n          this.goToCanvas(hit.index, false);\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.onRotationChange.subscribe((rotation: number) => {\n        this.layoutPages();\n      })\n    );\n  }\n\n  private layoutPages() {\n    if (this.osdIsReady.getValue()) {\n      const currentCanvasIndex = this.canvasService.currentCanvasIndex;\n      this.destroy(true);\n      this.setUpViewer(this.manifest, this.config);\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex: this.canvasService.findCanvasGroupByCanvasIndex(\n          currentCanvasIndex\n        ),\n        immediately: false,\n      });\n\n      // Recreate highlights if there is an active search going on\n      if (this.currentSearch) {\n        this.highlight(this.currentSearch);\n      }\n    }\n  }\n\n  addToWindow() {\n    (<any>window).openSeadragonViewer = this.viewer;\n  }\n\n  setupOverlays(): void {\n    this.svgOverlay = this.viewer.svgOverlay();\n    this.svgNode = d3.select(this.svgOverlay.node());\n  }\n\n  disableKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = null;\n  }\n\n  resetKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = this.defaultKeyDownHandler;\n  }\n\n  /**\n   *\n   * @param layoutSwitch true if switching between layouts\n   * to keep current search-state and rotation\n   */\n  destroy(layoutSwitch?: boolean) {\n    this.osdIsReady.next(false);\n    this.currentCenter.next(undefined);\n    if (this.viewer != null && this.viewer.isOpen()) {\n      if (this.viewer.container != null) {\n        d3.select(this.viewer.container.parentNode).style('opacity', '0');\n      }\n      this.viewer.destroy();\n      this.viewer = null;\n    }\n    this.overlays = [];\n    this.canvasService.reset();\n    if (this.canvasGroupMask) {\n      this.canvasGroupMask.destroy();\n    }\n    // Keep search-state and rotation only if layout-switch\n    if (!layoutSwitch) {\n      this.altoService.destroy();\n      this.currentSearch = null;\n      this.iiifContentSearchService.destroy();\n      this.rotation.next(0);\n      this.unsubscribe();\n    }\n  }\n\n  addEvents(): void {\n    this.clickService.reset();\n    this.clickService.addSingleClickHandler(this.singleClickHandler);\n    this.clickService.addDoubleClickHandler(this.dblClickHandler);\n    this.viewer.addHandler('animation-finish', () => {\n      this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n    });\n    this.viewer.addHandler('canvas-click', this.clickService.click);\n    this.viewer.addHandler(\n      'canvas-double-click',\n      (e: any) => (e.preventDefaultAction = true)\n    );\n    this.viewer.addHandler('canvas-press', (e: any) => {\n      this.pinchStatus.active = false;\n      this.dragStartPosition = e.position;\n      this.isCanvasPressed.next(true);\n    });\n    this.viewer.addHandler('canvas-release', () =>\n      this.isCanvasPressed.next(false)\n    );\n    this.viewer.addHandler('canvas-scroll', this.scrollHandler);\n    this.viewer.addHandler('canvas-pinch', this.pinchHandler);\n\n    this.viewer.addHandler('canvas-drag', (e: any) => {\n      this.dragStatus = true;\n      this.dragHandler(e);\n    });\n    this.viewer.addHandler('canvas-drag-end', (e: any) => {\n      if (this.dragStatus) {\n        this.constraintCanvas();\n        this.swipeToCanvasGroup(e);\n      }\n      this.dragStatus = false;\n    });\n    this.viewer.addHandler('animation', (e: any) => {\n      this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n    });\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomIn(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomOut(zoomFactor, position);\n  }\n\n  rotate(): void {\n    if (this.osdIsReady.getValue()) {\n      this.rotation.next((this.rotation.getValue() + 90) % 360);\n    }\n  }\n\n  /**\n   * Callback for mode-change\n   * @param mode ViewerMode\n   */\n  modeChanged(mode: ModeChanges): void {\n    if (mode.currentValue === ViewerMode.DASHBOARD) {\n      this.viewer.panVertical = false;\n      this.toggleToDashboard();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE) {\n      this.viewer.panVertical = false;\n      this.toggleToPage();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE_ZOOMED) {\n      this.viewer.panVertical = true;\n      this.resetKeyDownHandler();\n    }\n  }\n\n  /**\n   * Switches to DASHBOARD-mode, repositions canvas group and removes max-width on viewer\n   */\n  private toggleToDashboard(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false,\n    });\n\n    this.canvasGroupMask.hide();\n\n    this.zoomStrategy.setMinZoom(ViewerMode.DASHBOARD);\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  /**\n   * Switches to PAGE-mode, centers current canvas group and repositions other canvas groups\n   */\n  private toggleToPage(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false,\n    });\n\n    this.canvasGroupMask.show();\n\n    this.zoomStrategy.setMinZoom(ViewerMode.PAGE);\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  /**\n   * Scroll-handler\n   */\n  scrollHandler = (event: any) => {\n    const zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, event.scroll);\n    // Scrolling up\n    if (event.scroll > 0) {\n      this.zoomInGesture(event.position, zoomFactor);\n      // Scrolling down\n    } else if (event.scroll < 0) {\n      this.zoomOutGesture(event.position, zoomFactor);\n    }\n  };\n\n  /**\n   * Pinch-handler\n   */\n  pinchHandler = (event: any) => {\n    this.pinchStatus.active = true;\n    const zoomFactor = event.distance / event.lastDistance;\n    // Pinch Out\n    if (\n      event.distance >\n      event.lastDistance + ViewerOptions.zoom.pinchZoomThreshold\n    ) {\n      this.zoomInPinchGesture(event, zoomFactor);\n      // Pinch In\n    } else if (\n      event.distance + ViewerOptions.zoom.pinchZoomThreshold <\n      event.lastDistance\n    ) {\n      this.zoomOutPinchGesture(event, zoomFactor);\n    }\n  };\n\n  /**\n   *\n   * @param point to zoom to. If not set, the viewer will zoom to center\n   */\n  zoomInGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      if (position) {\n        this.zoomStrategy.zoomIn(zoomFactor, position);\n      } else {\n        this.zoomStrategy.zoomIn();\n      }\n    }\n  }\n\n  zoomOutGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.isPageZoomed()) {\n      this.zoomStrategy.zoomOut(zoomFactor, position);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  /**\n   * Process zoom in pinch gesture (pinch out)\n   *\n   * Toggle to page mode and Zoom in\n   *\n   * @param event from pinch gesture\n   */\n  zoomInPinchGesture(event: any, zoomFactor: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomIn(zoomFactor, this.dragStartPosition || event.center);\n    }\n  }\n\n  /**\n   * Process zoom out pinch gesture (pinch in)\n   *\n   * Zoom out and toggle to dashboard when all zoomed out.\n   * Stop between zooming out and toggling to dashboard.\n   *\n   * @param event from pinch gesture\n   */\n  zoomOutPinchGesture(event: any, zoomFactor: number): void {\n    const gestureId = event.gesturePoints[0].id;\n    if (this.modeService.isPageZoomed()) {\n      this.pinchStatus.shouldStop = true;\n      this.zoomStrategy.zoomOut(zoomFactor, event.center);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      if (\n        !this.pinchStatus.shouldStop ||\n        gestureId === this.pinchStatus.previousGestureId + 2\n      ) {\n        this.pinchStatus.shouldStop = false;\n        this.modeService.toggleMode();\n      }\n      this.pinchStatus.previousGestureId = gestureId;\n    }\n  }\n\n  goToHomeZoom(): void {\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  /**\n   * Single-click-handler\n   * Single-click toggles between page/dashboard-mode if a page is hit\n   */\n  singleClickHandler = (event: any) => {\n    const tileIndex = this.getOverlayIndexFromClickEvent(event);\n    const requestedCanvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      tileIndex\n    );\n    if (requestedCanvasGroupIndex !== -1) {\n      this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n    } else {\n      this.calculateCurrentCanvasGroup(this.viewer?.viewport.getCenter(true));\n    }\n    this.modeService.toggleMode();\n  };\n\n  /**\n   * Double-click-handler\n   * Double-click dashboard-mode should go to page-mode\n   * Double-click page-mode should\n   *    a) Zoom in if page is fitted vertically, or\n   *    b) Fit vertically if page is already zoomed in\n   */\n  dblClickHandler = (event: any) => {\n    // Page is fitted vertically, so dbl-click zooms in\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n      this.zoomStrategy.zoomIn(\n        ViewerOptions.zoom.dblClickZoomFactor,\n        event.position\n      );\n    } else {\n      this.modeService.mode = ViewerMode.PAGE;\n      const canvasIndex: number = this.getOverlayIndexFromClickEvent(event);\n      const requestedCanvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n        canvasIndex\n      );\n      if (requestedCanvasGroupIndex >= 0) {\n        this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n      } else {\n        this.calculateCurrentCanvasGroup(this.viewer?.viewport.getCenter(true));\n      }\n    }\n  };\n\n  /**\n   * Checks if hit element is a <rect>-element\n   * @param target\n   */\n  isCanvasGroupHit(target: HTMLElement): boolean {\n    return target instanceof SVGRectElement;\n  }\n\n  /**\n   * Iterates tilesources and adds them to viewer\n   * Creates svg clickable overlays for each tile\n   */\n  createOverlays(): void {\n    this.overlays = [];\n    const canvasRects: Rect[] = [];\n    const calculateCanvasGroupPositionStrategy = CalculateCanvasGroupPositionFactory.create(\n      this.viewerLayoutService.layout,\n      this.isManifestPaged\n    );\n\n    const isTwoPageView: boolean =\n      this.viewerLayoutService.layout === ViewerLayout.TWO_PAGE;\n    const rotation = this.rotation.getValue();\n    let group: any = this.svgNode.append('g').attr('class', 'page-group');\n\n    this.tileSources.forEach((tile, i) => {\n      const position = calculateCanvasGroupPositionStrategy.calculateCanvasGroupPosition(\n        {\n          canvasGroupIndex: i,\n          canvasSource: tile,\n          previousCanvasGroupPosition: canvasRects[i - 1],\n          viewingDirection: this.manifest.viewingDirection,\n        },\n        rotation\n      );\n\n      canvasRects.push(position);\n\n      const tileSourceStrategy = TileSourceStrategyFactory.create(tile);\n      const tileSource = tileSourceStrategy.getTileSource(tile);\n\n      this.zone.runOutsideAngular(() => {\n        const rotated = rotation === 90 || rotation === 270;\n\n        let bounds;\n\n        /* Because image scaling is performed before rotation,\n         * we must invert width & height and translate position so that tile rotation ends up correct\n         */\n        if (rotated) {\n          bounds = new OpenSeadragon.Rect(\n            position.x + (position.width - position.height) / 2,\n            position.y - (position.width - position.height) / 2,\n            position.height,\n            position.width\n          );\n        } else {\n          bounds = new OpenSeadragon.Rect(\n            position.x,\n            position.y,\n            position.width,\n            position.height\n          );\n        }\n\n        this.viewer.addTiledImage({\n          index: i,\n          tileSource: tileSource,\n          fitBounds: bounds,\n          degrees: rotation,\n        });\n      });\n\n      if (isTwoPageView && i % 2 !== 0) {\n        group = this.svgNode.append('g').attr('class', 'page-group');\n      }\n\n      const currentOverlay = group\n        .append('rect')\n        .attr('x', position.x)\n        .attr('y', position.y)\n        .attr('width', position.width)\n        .attr('height', position.height)\n        .attr('class', 'tile');\n\n      // Make custom borders if current layout is two-paged\n      if (isTwoPageView) {\n        if (i % 2 === 0 && i !== 0) {\n          const noLeftStrokeStyle =\n            Number(position.width * 2 + position.height) +\n            ', ' +\n            position.width * 2;\n          currentOverlay.style('stroke-dasharray', noLeftStrokeStyle);\n        } else if (i % 2 !== 0 && i !== 0) {\n          const noRightStrokeStyle =\n            position.width +\n            ', ' +\n            position.height +\n            ', ' +\n            Number(position.width * 2 + position.height);\n          currentOverlay.style('stroke-dasharray', noRightStrokeStyle);\n        }\n      }\n\n      const currentOverlayNode: SVGRectElement = currentOverlay.node();\n      this.overlays[i] = currentOverlayNode;\n    });\n\n    const layout =\n      this.viewerLayoutService.layout === ViewerLayout.ONE_PAGE ||\n      !this.isManifestPaged\n        ? ViewerLayout.ONE_PAGE\n        : ViewerLayout.TWO_PAGE;\n    this.canvasService.addAll(canvasRects, layout);\n  }\n\n  /**\n   * Sets viewer size and opacity once the first canvas group has fully loaded\n   */\n  private initialCanvasGroupLoaded(): void {\n    this.home();\n    this.canvasGroupMask.initialize(\n      this.canvasService.getCurrentCanvasGroupRect(),\n      this.modeService.mode !== ViewerMode.DASHBOARD\n    );\n    if (this.viewer) {\n      d3.select(this.viewer.container.parentNode)\n        .transition()\n        .duration(ViewerOptions.transitions.OSDAnimationTime)\n        .style('opacity', '1');\n    }\n  }\n\n  /**\n   * Returns overlay-index for click-event if hit\n   * @param target hit <rect>\n   */\n  getOverlayIndexFromClickEvent(event: any) {\n    const target = this.getOriginalTarget(event);\n    if (this.isCanvasGroupHit(target)) {\n      const requestedCanvasGroup: number = this.overlays.indexOf(target);\n      if (requestedCanvasGroup >= 0) {\n        return requestedCanvasGroup;\n      }\n    }\n    return -1;\n  }\n\n  private calculateCurrentCanvasGroup(center: Point) {\n    if (center) {\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        center\n      );\n      this.currentCanvasIndex.next(currentCanvasGroupIndex);\n    }\n  }\n\n  private dragHandler = (e: any) => {\n    this.viewer.panHorizontal = true;\n    if (this.modeService.isPageZoomed()) {\n      const canvasGroupRect: Rect = this.canvasService.getCurrentCanvasGroupRect();\n      const vpBounds: Rect = this.getViewportBounds();\n      const pannedPastCanvasGroup = SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n        canvasGroupRect,\n        vpBounds\n      );\n      const direction: number = e.direction;\n      if (\n        (pannedPastCanvasGroup === Side.LEFT &&\n          SwipeUtils.isDirectionInRightSemicircle(direction)) ||\n        (pannedPastCanvasGroup === Side.RIGHT &&\n          SwipeUtils.isDirectionInLeftSemicircle(direction))\n      ) {\n        this.viewer.panHorizontal = false;\n      }\n    }\n  };\n\n  private constraintCanvas() {\n    if (this.modeService.isPageZoomed()) {\n      const viewportBounds: Rect = this.getViewportBounds();\n      const currentCanvasBounds = this.getCurrentCanvasBounds();\n      this.isCanvasOutsideViewport(viewportBounds, currentCanvasBounds)\n        ? this.constraintCanvasOutsideViewport(\n            viewportBounds,\n            currentCanvasBounds\n          )\n        : this.constraintCanvasInsideViewport(viewportBounds);\n    }\n  }\n\n  private getCurrentCanvasBounds(): Rect {\n    return this.viewer.world\n      .getItemAt(this.canvasService.currentCanvasGroupIndex)\n      .getBounds();\n  }\n\n  private isCanvasOutsideViewport(\n    viewportBounds: Rect,\n    canvasBounds: Rect\n  ): boolean {\n    return viewportBounds.height < canvasBounds.height;\n  }\n\n  private constraintCanvasOutsideViewport(\n    viewportBounds: Rect,\n    canvasBounds: Rect\n  ): void {\n    let rect: Rect | undefined = undefined;\n    if (this.isCanvasBelowViewportTop(viewportBounds, canvasBounds)) {\n      rect = new Rect({\n        x: viewportBounds.x + viewportBounds.width / 2,\n        y: canvasBounds.y + viewportBounds.height / 2,\n      });\n    } else if (this.isCanvasAboveViewportBottom(viewportBounds, canvasBounds)) {\n      rect = new Rect({\n        x: viewportBounds.x + viewportBounds.width / 2,\n        y: canvasBounds.y + canvasBounds.height - viewportBounds.height / 2,\n      });\n    }\n    this.panTo(rect, true);\n  }\n\n  private constraintCanvasInsideViewport(viewportBounds: Rect): void {\n    const canvasGroupRect = this.canvasService.getCanvasGroupRect(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    const rect = new Rect({\n      x: viewportBounds.x + viewportBounds.width / 2,\n      y: canvasGroupRect.centerY,\n    });\n    this.panTo(rect, true);\n  }\n\n  private isCanvasBelowViewportTop(\n    viewportBounds: Rect,\n    canvasBounds: Rect\n  ): boolean {\n    return viewportBounds.y < canvasBounds.y;\n  }\n\n  private isCanvasAboveViewportBottom(\n    viewportBounds: Rect,\n    canvasBounds: Rect\n  ): boolean {\n    return (\n      canvasBounds.y + canvasBounds.height <\n      viewportBounds.y + viewportBounds.height\n    );\n  }\n\n  private swipeToCanvasGroup(e: any) {\n    // Don't swipe on pinch actions\n    if (this.pinchStatus.active) {\n      return;\n    }\n\n    const speed: number = e.speed;\n    const dragEndPosision = e.position;\n\n    const canvasGroupRect: Rect = this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds: Rect = this.getViewportBounds();\n\n    const direction: Direction = SwipeUtils.getSwipeDirection(\n      this.dragStartPosition,\n      dragEndPosision,\n      this.modeService.isPageZoomed()\n    );\n\n    const currentCanvasGroupIndex: number = this.canvasService\n      .currentCanvasGroupIndex;\n    const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n      this.modeService.mode\n    );\n\n    let pannedPastSide: Side | null;\n    let canvasGroupEndHitCountReached = false;\n    if (this.modeService.isPageZoomed()) {\n      pannedPastSide = SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n        canvasGroupRect,\n        viewportBounds\n      );\n      this.swipeDragEndCounter.addHit(pannedPastSide, direction);\n      canvasGroupEndHitCountReached = this.swipeDragEndCounter.hitCountReached();\n    }\n\n    const newCanvasGroupIndex = this.canvasService.constrainToRange(\n      calculateNextCanvasGroupStrategy.calculateNextCanvasGroup({\n        currentCanvasGroupCenter: this.currentCanvasIndex.getValue(),\n        speed: speed,\n        direction: direction,\n        currentCanvasGroupIndex: currentCanvasGroupIndex,\n        canvasGroupEndHitCountReached: canvasGroupEndHitCountReached,\n        viewingDirection: this.manifest.viewingDirection,\n      })\n    );\n    if (\n      this.modeService.mode === ViewerMode.DASHBOARD ||\n      this.modeService.mode === ViewerMode.PAGE ||\n      (canvasGroupEndHitCountReached && direction)\n    ) {\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n        direction: direction,\n      });\n    }\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer?.viewport.getBounds();\n  }\n\n  private getOriginalTarget(event: any) {\n    return event.originalTarget\n      ? event.originalTarget\n      : event.originalEvent.target;\n  }\n\n  private panTo(rect: Rect | undefined, immediately = false): void {\n    if (rect) {\n      this.viewer.viewport.panTo(\n        {\n          x: rect.x,\n          y: rect.y,\n        },\n        immediately\n      );\n    }\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ContentSearchDialogService } from '../../content-search-dialog/content-search-dialog.service';\nimport { ContentsDialogService } from '../../contents-dialog/contents-dialog.service';\nimport { AltoService } from '../alto-service/alto.service';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../iiif-manifest-service/iiif-manifest-service';\nimport { MimeDomHelper } from '../mime-dom-helper';\nimport { ModeService } from '../mode-service/mode.service';\nimport { AccessKeys } from '../models/AccessKeys';\nimport { Manifest } from '../models/manifest';\nimport { SearchResult } from '../models/search-result';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { ContentSearchNavigationService } from '../navigation/content-search-navigation-service/content-search-navigation.service';\nimport { ViewerService } from '../viewer-service/viewer.service';\n\n@Injectable()\nexport class AccessKeysService {\n  private isSearchable = false;\n  private hasHits = false;\n  private disabledKeys: number[] = [];\n  private subscriptions = new Subscription();\n  private invert = false;\n\n  constructor(\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private contentsDialogService: ContentsDialogService,\n    private mimeDomHelper: MimeDomHelper,\n    private contentSearchNavigationService: ContentSearchNavigationService,\n    private altoService: AltoService\n  ) {\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.isSearchable = this.isManifestSearchable(manifest);\n            this.invert = manifest.viewingDirection === ViewingDirection.RTL;\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe(\n        (result: SearchResult) => {\n          this.hasHits = result.hits.length > 0;\n        }\n      )\n    );\n  }\n\n  destroy(): void {\n    this.unsubscribe();\n  }\n\n  public handleKeyEvents(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (!this.isKeyDisabled(event.keyCode)) {\n      if (accessKeys.isArrowLeftKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? this.goToNextCanvasGroup()\n            : this.goToPreviousCanvasGroup();\n        }\n      } else if (accessKeys.isArrowRightKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? this.goToPreviousCanvasGroup()\n            : this.goToNextCanvasGroup();\n        }\n      } else if (accessKeys.isFirstCanvasGroupKeys()) {\n        this.goToFirstCanvasGroup();\n      } else if (accessKeys.isLastCanvasGroupKeys()) {\n        this.goToLastCanvasGroup();\n      } else if (accessKeys.isNextHitKeys() && this.hasHits) {\n        this.goToNextHit();\n      } else if (accessKeys.isPreviousHitKeys() && this.hasHits) {\n        this.goToPreviousHit();\n      } else if (accessKeys.isFullscreenKeys()) {\n        this.toggleFullscreen();\n      } else if (accessKeys.isSearchDialogKeys() && this.isSearchable) {\n        this.toggleSearchDialog();\n      } else if (accessKeys.isContentsDialogKeys()) {\n        this.toggleContentsDialog();\n      } else if (accessKeys.isResetSearchKeys()) {\n        this.resetSearch();\n      } else if (accessKeys.isPageDownKeys()) {\n        this.goToNextCanvasGroup();\n      } else if (accessKeys.isPageUpKeys()) {\n        this.goToPreviousCanvasGroup();\n      } else if (accessKeys.isZoomInKeys()) {\n        this.zoomIn();\n      } else if (accessKeys.isZoomOutKeys()) {\n        this.zoomOut();\n      } else if (accessKeys.isZoomHomeKeys()) {\n        this.zoomHome();\n      } else if (accessKeys.isRotateKeys()) {\n        this.rotateClockWise();\n      } else if (accessKeys.isRecognizedTextContentKeys()) {\n        this.toggleRecognizedTextContent();\n      }\n    }\n  }\n\n  private goToNextCanvasGroup() {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private goToPreviousCanvasGroup() {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  private goToFirstCanvasGroup() {\n    this.viewerService.goToCanvasGroup(0, false);\n  }\n\n  private goToLastCanvasGroup() {\n    this.viewerService.goToCanvasGroup(\n      this.canvasService.numberOfCanvasGroups - 1,\n      false\n    );\n  }\n\n  private rotateClockWise() {\n    this.viewerService.rotate();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private toggleRecognizedTextContent() {\n    this.altoService.toggle();\n  }\n\n  private goToNextHit() {\n    this.contentSearchNavigationService.goToNextCanvasGroupHit();\n  }\n\n  private goToPreviousHit() {\n    this.contentSearchNavigationService.goToPreviousCanvasGroupHit();\n  }\n\n  private zoomIn() {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.toggleMode();\n    } else {\n      this.viewerService.zoomIn();\n    }\n  }\n\n  private zoomOut() {\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.toggleMode();\n    } else if (this.modeService.isPageZoomed()) {\n      this.viewerService.zoomOut();\n    }\n  }\n\n  private zoomHome() {\n    if (this.modeService.isPageZoomed()) {\n      this.viewerService.home();\n    }\n  }\n\n  private toggleSearchDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.isPageZoomed()\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.contentSearchDialogService.open();\n    } else {\n      if (this.contentSearchDialogService.isOpen()) {\n        this.contentSearchDialogService.close();\n      } else {\n        this.contentSearchDialogService.open();\n      }\n    }\n\n    this.contentsDialogService.close();\n  }\n\n  private toggleContentsDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.isPageZoomed()\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.contentsDialogService.open();\n    } else {\n      if (this.contentsDialogService.isOpen()) {\n        this.contentsDialogService.close();\n      } else {\n        this.contentsDialogService.open();\n      }\n    }\n    this.contentSearchDialogService.close();\n  }\n\n  private toggleFullscreen() {\n    this.mimeDomHelper.toggleFullscreen();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private resetSearch() {\n    this.iiifContentSearchService.destroy();\n  }\n\n  private isManifestSearchable(manifest: Manifest): boolean {\n    return manifest.service ? true : false;\n  }\n\n  private isZoomedIn(): boolean {\n    return this.modeService.isPageZoomed();\n  }\n\n  private updateDisabledKeys() {\n    this.resetDisabledKeys();\n    if (this.contentsDialogService.isOpen()) {\n      this.disableKeysForContentDialog();\n    } else if (this.contentSearchDialogService.isOpen()) {\n      this.diableKeysForContentSearchDialog();\n    }\n  }\n\n  private disableKeysForContentDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT);\n  }\n\n  private diableKeysForContentSearchDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT)\n      .concat(AccessKeys.firstCanvasGroupCodes)\n      .concat(AccessKeys.lastCanvasGroupCodes)\n      .concat(AccessKeys.zoomInCodes)\n      .concat(AccessKeys.zoomOutCodes)\n      .concat(AccessKeys.zoomHomeCodes)\n      .concat(AccessKeys.nextHit)\n      .concat(AccessKeys.previousHit)\n      .concat(AccessKeys.toggleSearchDialogCodes)\n      .concat(AccessKeys.toggleContentsDialogCodes)\n      .concat(AccessKeys.toggleFullscreenCodes);\n  }\n\n  private resetDisabledKeys() {\n    this.disabledKeys = [];\n  }\n\n  private isKeyDisabled(keyCode: number): boolean {\n    this.updateDisabledKeys();\n    return this.disabledKeys.indexOf(keyCode) > -1;\n  }\n\n  unsubscribe(): void {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n\n}\n","import { Injectable, ElementRef } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { Dimensions } from './../core/models/dimensions';\n\n@Injectable()\nexport class AttributionDialogResizeService {\n  private _el: ElementRef | null = null;\n  private resizeSubject: ReplaySubject<Dimensions> = new ReplaySubject();\n  private dimensions = new Dimensions();\n\n  constructor(private mimeDomHelper: MimeDomHelper) {}\n\n  set el(el: ElementRef | null) {\n    this._el = el;\n  }\n\n  get el(): ElementRef | null {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.asObservable();\n  }\n\n  markForCheck() {\n    if (this.el) {\n      const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n      if (\n        this.dimensions.bottom !== dimensions.bottom ||\n        this.dimensions.height !== dimensions.height ||\n        this.dimensions.left !== dimensions.left ||\n        this.dimensions.right !== dimensions.right ||\n        this.dimensions.top !== dimensions.top ||\n        this.dimensions.width !== dimensions.width\n      ) {\n        this.dimensions = dimensions;\n        this.resizeSubject.next({ ...this.dimensions });\n      }\n    }\n  }\n}\n","import {\n  AfterViewChecked,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { Manifest } from '../core/models/manifest';\nimport { StyleService } from '../core/style-service/style.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\n\n@Component({\n  templateUrl: './attribution-dialog.component.html',\n  styleUrls: ['./attribution-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AttributionDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy, AfterViewChecked {\n  public manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n  @ViewChild('container', { static: true }) container?: ElementRef;\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private renderer: Renderer2,\n    private el: ElementRef,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private styleService: StyleService,\n    private accessKeysHandlerService: AccessKeysService\n  ) {\n    attributionDialogResizeService.el = el;\n  }\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.changeDetectorRef.markForCheck();\n        }\n      )\n    );\n  }\n\n  ngAfterViewInit() {\n    this.subscriptions.add(\n      this.styleService.onChange.subscribe((c) => {\n        const backgroundRgbaColor = this.styleService.convertToRgba(c, 0.3);\n        this.renderer.setStyle(\n          this.container?.nativeElement,\n          'background-color',\n          backgroundRgbaColor\n        );\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  @HostListener('keyup', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.attributionDialogResizeService.markForCheck();\n  }\n\n  ngAfterViewChecked() {\n    this.attributionDialogResizeService.markForCheck();\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n} from '@angular/material/dialog';\nimport { interval, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\nimport { AttributionDialogComponent } from './attribution-dialog.component';\n\n@Injectable()\nexport class AttributionDialogService {\n  private isAttributionDialogOpen = false;\n  private dialogRef: MatDialogRef<AttributionDialogComponent> | null = null;\n  private _el: ElementRef | null = null;\n  private attributionDialogHeight = 0;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private mimeResizeService: MimeResizeService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        if (this.dialogRef && this.isAttributionDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n        }\n      })\n    );\n    this.subscriptions.add(\n      this.attributionDialogResizeService.onResize.subscribe(\n        (dimensions: Dimensions) => {\n          if (this.dialogRef && this.isAttributionDialogOpen) {\n            this.attributionDialogHeight = dimensions.height;\n            const config = this.getDialogConfig();\n            this.dialogRef.updatePosition(config.position);\n          }\n        }\n      )\n    );\n  }\n\n  public destroy() {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(timeout?: number): void {\n    if (!this.isAttributionDialogOpen) {\n      /**\n       * Sleeping for material animations to finish\n       * fix: https://github.com/angular/material2/issues/7438\n       */\n      interval(1000)\n        .pipe(take(1))\n        .subscribe(() => {\n          const config = this.getDialogConfig();\n          this.dialogRef = this.dialog.open(AttributionDialogComponent, config);\n          this.dialogRef\n            .afterClosed()\n            .pipe(take(1))\n            .subscribe((result) => {\n              this.isAttributionDialogOpen = false;\n              this.mimeDomHelper.setFocusOnViewer();\n            });\n          this.isAttributionDialogOpen = true;\n          this.closeDialogAfter(timeout);\n        });\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isAttributionDialogOpen = false;\n    }\n  }\n\n  public toggle(): void {\n    this.isAttributionDialogOpen ? this.close() : this.open();\n  }\n\n  private closeDialogAfter(seconds: number | undefined) {\n    if (seconds && seconds > 0) {\n      interval(seconds * 1000)\n        .pipe(take(1))\n        .subscribe(() => {\n          this.close();\n        });\n    }\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    const dimensions = this.getPosition();\n    return {\n      hasBackdrop: false,\n      width: '180px',\n      panelClass: 'attribution-panel',\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      autoFocus: true,\n      restoreFocus: false,\n    };\n  }\n\n  private getPosition() {\n    if (!this._el) {\n      throw new Error(`Could not find position because element is missing`)\n    }\n    const padding = 20;\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this._el);\n    return new Dimensions({\n      top:\n        dimensions.top + dimensions.height - this.attributionDialogHeight - 68,\n      left: dimensions.left + padding,\n    });\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { AttributionDialogComponent } from './attribution-dialog.component';\nimport { AttributionDialogService } from './attribution-dialog.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [AttributionDialogComponent],\n  providers: [\n    AttributionDialogService,\n    AttributionDialogResizeService,\n    MimeDomHelper\n  ]\n})\nexport class AttributionDialogModule {}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\n\n@Component({\n  templateUrl: './canvas-group-dialog.component.html',\n  styleUrls: ['./canvas-group-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasGroupDialogComponent implements OnInit, OnDestroy {\n  numberOfCanvases: number;\n  canvasGroupForm!: FormGroup;\n  canvasGroupControl!: FormControl;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private dialogRef: MatDialogRef<CanvasGroupDialogComponent>,\n    private fb: FormBuilder,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    this.numberOfCanvases = this.canvasService.numberOfCanvases;\n    this.createForm();\n  }\n\n  createForm() {\n    this.canvasGroupControl = new FormControl('', [\n      Validators.required,\n      Validators.min(1),\n      Validators.max(this.numberOfCanvases),\n    ]);\n    this.canvasGroupForm = this.fb.group({\n      canvasGroupControl: this.canvasGroupControl,\n    });\n  }\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  onSubmit(): void {\n    if (this.canvasGroupForm.valid) {\n      const pageNumber = this.canvasGroupControl.value - 1;\n      this.viewerService.goToCanvasGroup(\n        this.canvasService.findCanvasGroupByCanvasIndex(pageNumber),\n        false\n      );\n      this.dialogRef.close();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n} from '@angular/material/dialog';\nimport { take } from 'rxjs/operators';\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog.component';\n\n@Injectable()\nexport class CanvasGroupDialogService {\n  private isCanvasGroupDialogOpen = false;\n  private dialogRef: MatDialogRef<CanvasGroupDialogComponent> | null = null;\n\n  constructor(private dialog: MatDialog) {}\n\n  public initialize(): void {}\n\n  public destroy() {\n    this.close();\n  }\n\n  public open(timeout?: number): void {\n    if (!this.isCanvasGroupDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(CanvasGroupDialogComponent, config);\n      this.dialogRef\n        .afterClosed()\n        .pipe(take(1))\n        .subscribe((result) => {\n          this.isCanvasGroupDialogOpen = false;\n        });\n      this.isCanvasGroupDialogOpen = true;\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isCanvasGroupDialogOpen = false;\n    }\n  }\n\n  public toggle(): void {\n    this.isCanvasGroupDialogOpen ? this.close() : this.open();\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: true,\n      panelClass: 'canvas-group-panel',\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog.component';\nimport { CanvasGroupDialogService } from './canvas-group-dialog.service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [CanvasGroupDialogComponent],\n  providers: [CanvasGroupDialogService]\n})\nexport class CanvasGroupDialogModule {}\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { ContentSearchDialogService } from './content-search-dialog.service';\nimport { ContentSearchDialogConfigStrategyFactory } from './content-search-dialog-config-strategy-factory';\nimport { ContentSearchDialogComponent } from './content-search-dialog.component';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [ContentSearchDialogComponent],\n  providers: [\n    ContentSearchDialogService,\n    ContentSearchDialogConfigStrategyFactory\n  ]\n})\nexport class ContentSearchDialogModule {}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { Manifest } from './../../core/models/manifest';\n\n@Component({\n  selector: 'mime-metadata',\n  templateUrl: './metadata.component.html',\n  styleUrls: ['./metadata.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MetadataComponent implements OnInit, OnDestroy {\n  public manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.changeDetectorRef.markForCheck();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../core/intl/viewer-intl';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewerService } from '../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-toc',\n  templateUrl: './table-of-contents.component.html',\n  styleUrls: ['./table-of-contents.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TocComponent implements OnInit, OnDestroy {\n  @Output()\n  canvasChanged: EventEmitter<number> = new EventEmitter();\n  public manifest: Manifest | null = null;\n  public currentCanvasGroupIndex = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.currentCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          this.currentCanvasGroupIndex = canvasGroupIndex;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  goToCanvas(event: Event, canvasIndex: number | undefined): void {\n    if (canvasIndex) {\n      event.preventDefault();\n      this.viewerService.goToCanvas(canvasIndex, false);\n      this.canvasChanged.emit(canvasIndex);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport {\n  ErrorStateMatcher,\n  ShowOnDirtyErrorStateMatcher\n} from '@angular/material/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { ContentsDialogService } from './contents-dialog.service';\nimport { ContentsDialogConfigStrategyFactory } from './contents-dialog-config-strategy-factory';\nimport { ContentsDialogComponent } from './contents-dialog.component';\nimport { MetadataComponent } from './metadata/metadata.component';\nimport { TocComponent } from './table-of-contents/table-of-contents.component';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [ContentsDialogComponent, MetadataComponent, TocComponent],\n  providers: [\n    ContentsDialogService,\n    ContentsDialogConfigStrategyFactory,\n    { provide: ErrorStateMatcher, useClass: ShowOnDirtyErrorStateMatcher }\n  ]\n})\nexport class ContentsDialogModule {}\n","import { NgModule } from '@angular/core';\nimport { AccessKeysService } from './access-keys-handler-service/access-keys.service';\nimport { AltoService } from './alto-service/alto.service';\nimport { CanvasService } from './canvas-service/canvas-service';\nimport { ClickService } from './click-service/click.service';\nimport { FullscreenService } from './fullscreen-service/fullscreen.service';\nimport { IiifContentSearchService } from './iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from './iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './intl/viewer-intl';\nimport { MimeResizeService } from './mime-resize-service/mime-resize.service';\nimport { ModeService } from './mode-service/mode.service';\nimport { ContentSearchNavigationService } from './navigation/content-search-navigation-service/content-search-navigation.service';\nimport { SpinnerService } from './spinner-service/spinner.service';\nimport { StyleService } from './style-service/style.service';\nimport { ViewerLayoutService } from './viewer-layout-service/viewer-layout-service';\nimport { ViewerService } from './viewer-service/viewer.service';\n\n@NgModule({\n  providers: [\n    MimeViewerIntl,\n    IiifManifestService,\n    IiifContentSearchService,\n    MimeResizeService,\n    FullscreenService,\n    ViewerService,\n    ClickService,\n    CanvasService,\n    ModeService,\n    SpinnerService,\n    AccessKeysService,\n    ViewerLayoutService,\n    ContentSearchNavigationService,\n    StyleService,\n    AltoService,\n  ],\n})\nexport class CoreModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { Subscription } from 'rxjs';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\n\n@Component({\n  selector: 'mime-help',\n  templateUrl: './help-dialog.component.html',\n  styleUrls: ['./help-dialog.component.scss'],\n})\nexport class HelpDialogComponent implements OnInit, OnDestroy {\n  public tabHeight = {};\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public mediaObserver: MediaObserver,\n    public intl: MimeViewerIntl,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  private resizeTabHeight() {\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n  }\n}\n","import { ElementRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { Dimensions } from '../core/models/dimensions';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n\nexport interface HelpDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef): MatDialogConfig;\n}\n\nexport class MobileHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'help-panel'\n    };\n  }\n}\n\nexport class DesktopHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: `${DesktopHelpDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'help-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopHelpDialogConfigStrategy.dialogWidth -\n        DesktopHelpDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  DesktopHelpDialogConfigStrategy,\n  HelpDialogConfigStrategy,\n  MobileHelpDialogConfigStrategy\n} from './help-dialog-config-strategy';\n\n@Injectable()\nexport class HelpDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): HelpDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n    ? new MobileHelpDialogConfigStrategy()\n    : new DesktopHelpDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { HelpDialogConfigStrategyFactory } from './help-dialog-config-strategy-factory';\nimport { HelpDialogComponent } from './help-dialog.component';\n\n@Injectable()\nexport class HelpDialogService {\n  private _el: ElementRef | null = null;\n  private isHelpDialogOpen = false;\n  private dialogRef!: MatDialogRef<HelpDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private helpDialogConfigStrategyFactory: HelpDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe(() => {\n        if (this.isHelpDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n          this.dialogRef.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy(): void {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(): void {\n    if (!this.isHelpDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(HelpDialogComponent, config);\n      this.dialogRef\n        .afterClosed()\n        .pipe(take(1))\n        .subscribe(() => {\n          this.isHelpDialogOpen = false;\n        });\n      this.isHelpDialogOpen = true;\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n    }\n    this.isHelpDialogOpen = false;\n  }\n\n  public toggle(): void {\n    this.isHelpDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isHelpDialogOpen;\n  }\n\n  private getDialogConfig() {\n    return this._el\n      ? this.helpDialogConfigStrategyFactory.create().getConfig(this._el)\n      : {};\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { HelpDialogComponent } from './help-dialog.component';\nimport { HelpDialogService } from './help-dialog.service';\nimport { HelpDialogConfigStrategyFactory } from './help-dialog-config-strategy-factory';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [HelpDialogComponent],\n  providers: [\n    HelpDialogService,\n    HelpDialogConfigStrategyFactory\n  ]\n})\nexport class HelpDialogModule {}\n","import {\n  animate,\n  group,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { ViewingDirection } from '../../core/models/viewing-direction';\nimport { StyleService } from '../../core/style-service/style.service';\nimport { CanvasService } from './../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { MimeResizeService } from './../../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from './../../core/models/dimensions';\nimport { ViewerService } from './../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-osd-toolbar',\n  templateUrl: './osd-toolbar.component.html',\n  styleUrls: ['./osd-toolbar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('osdToolbarState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(-120px, 0)',\n          display: 'none',\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0px, 0px)',\n          display: 'block',\n        })\n      ),\n      transition('hide => show', [\n        group([\n          style({ display: 'block' }),\n          animate(`${ViewerOptions.transitions.toolbarsEaseInTime}ms ease-out`),\n        ]),\n      ]),\n      transition(\n        'show => hide',\n        animate(`${ViewerOptions.transitions.toolbarsEaseOutTime}ms ease-in`)\n      ),\n    ]),\n  ],\n})\nexport class OsdToolbarComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('container', { static: true }) container!: ElementRef;\n  @HostBinding('@osdToolbarState')\n  get osdToolbarState() {\n    return this.state;\n  }\n  public osdToolbarStyle = {};\n  public numberOfCanvasGroups = 0;\n  public isFirstCanvasGroup = false;\n  public isLastCanvasGroup = false;\n  public state = 'hide';\n  invert = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private renderer: Renderer2,\n    private changeDetectorRef: ChangeDetectorRef,\n    private mimeService: MimeResizeService,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private styleService: StyleService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n            this.changeDetectorRef.detectChanges();\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.mimeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.osdToolbarStyle = {\n          top: dimensions.top + 110 + 'px',\n        };\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onCanvasGroupIndexChange.subscribe(\n        (currentCanvasGroupIndex: number) => {\n          this.numberOfCanvasGroups = this.canvasService.numberOfCanvasGroups;\n          this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n  }\n\n  ngAfterViewInit() {\n    this.subscriptions.add(\n      this.styleService.onChange.subscribe((c) => {\n        const backgroundRgbaColor = this.styleService.convertToRgba(c, 0.3);\n        this.renderer.setStyle(\n          this.container.nativeElement,\n          'background-color',\n          backgroundRgbaColor\n        );\n      })\n    );\n  }\n\n  zoomIn(): void {\n    this.viewerService.zoomIn();\n  }\n\n  zoomOut(): void {\n    this.viewerService.zoomOut();\n  }\n\n  home(): void {\n    this.viewerService.home();\n  }\n\n  rotate(): void {\n    this.viewerService.rotate();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { Subscription } from 'rxjs';\nimport { AltoService } from '../../core/alto-service/alto.service';\nimport { CanvasService } from '../../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../core/intl/viewer-intl';\n\n@Component({\n  selector: 'mime-recognized-text-content',\n  templateUrl: './recognized-text-content.component.html',\n  styleUrls: ['./recognized-text-content.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RecognizedTextContentComponent implements OnInit, OnDestroy {\n  @ViewChild('recognizedTextContentContainer', { read: ElementRef })\n  recognizedTextContentContainer!: ElementRef;\n  firstCanvasRecognizedTextContent: SafeHtml | undefined;\n  secondCanvasRecognizedTextContent: SafeHtml | undefined;\n  isLoading = false;\n  error: string | undefined = undefined;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private cdr: ChangeDetectorRef,\n    private canvasService: CanvasService,\n    private altoService: AltoService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(() => {\n        this.clearRecognizedText();\n        this.altoService.initialize();\n        this.cdr.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.altoService.onTextContentReady$.subscribe(() => {\n        this.clearRecognizedText();\n        this.scrollToTop();\n        this.updateRecognizedText();\n        this.cdr.detectChanges();\n      })\n    );\n    this.subscriptions.add(\n      this.altoService.isLoading$.subscribe((isLoading: boolean) => {\n        this.isLoading = isLoading;\n        this.cdr.detectChanges();\n      })\n    );\n    this.subscriptions.add(\n      this.altoService.hasErrors$.subscribe((error: string) => {\n        this.error = error;\n        this.cdr.detectChanges();\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n    this.altoService.destroy();\n  }\n\n  private clearRecognizedText() {\n    this.firstCanvasRecognizedTextContent = '';\n    this.secondCanvasRecognizedTextContent = '';\n  }\n\n  private scrollToTop() {\n    this.recognizedTextContentContainer.nativeElement.scrollTop = 0;\n  }\n\n  private updateRecognizedText() {\n    const canvases = this.canvasService.getCanvasesPerCanvasGroup(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    this.firstCanvasRecognizedTextContent = this.altoService.getHtml(canvases[0]);\n\n    if (canvases.length === 2) {\n      this.secondCanvasRecognizedTextContent = this.altoService.getHtml(canvases[1]);\n    }\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { MatSliderChange } from '@angular/material/slider';\nimport { Subscription } from 'rxjs';\nimport { CanvasGroupDialogService } from '../../../canvas-group-dialog/canvas-group-dialog.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { AccessKeys } from '../../../core/models/AccessKeys';\nimport { Manifest } from '../../../core/models/manifest';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { CanvasService } from './../../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../../core/intl/viewer-intl';\nimport { SearchResult } from './../../../core/models/search-result';\nimport { ViewerService } from './../../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-page-navigator',\n  templateUrl: './canvas-group-navigator.component.html',\n  styleUrls: ['./canvas-group-navigator.component.scss'],\n})\nexport class CanvasGroupNavigatorComponent implements OnInit, OnDestroy {\n  @Input() public searchResult!: SearchResult;\n  public numberOfCanvases = 0;\n  public canvasGroupLabel = '';\n  public numberOfCanvasGroups = 0;\n  public currentCanvasGroupIndex: number | null = -1;\n  public isFirstCanvasGroup = false;\n  public isLastCanvasGroup = false;\n  invert = false;\n  private currentSliderCanvasGroupIndex: number | null = -1;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private pageDialogService: CanvasGroupDialogService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n            this.changeDetectorRef.detectChanges();\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (currentCanvasGroupIndex: number) => {\n          if (\n            this.currentSliderCanvasGroupIndex !== -1 &&\n            this.currentSliderCanvasGroupIndex === currentCanvasGroupIndex\n          ) {\n            this.currentSliderCanvasGroupIndex = -1;\n          } else if (this.currentSliderCanvasGroupIndex === -1) {\n            this.currentCanvasGroupIndex = currentCanvasGroupIndex;\n            this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n              this.currentCanvasGroupIndex\n            );\n          }\n          this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onNumberOfCanvasGroupsChange.subscribe(\n        (numberOfCanvasGroups: number) => {\n          this.numberOfCanvasGroups = numberOfCanvasGroups;\n          this.numberOfCanvases = this.canvasService.numberOfCanvases;\n          if (this.currentCanvasGroupIndex !== null) {\n            this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n              this.currentCanvasGroupIndex\n            );\n            this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n              this.currentCanvasGroupIndex\n            );\n          }\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  onSliderChange(change: MatSliderChange): void {\n    this.currentSliderCanvasGroupIndex = change.value;\n    this.currentCanvasGroupIndex = change.value;\n    if (this.currentCanvasGroupIndex !== null) {\n      this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n        this.currentCanvasGroupIndex\n      );\n      this.viewerService.goToCanvasGroup(this.currentCanvasGroupIndex, false);\n    }\n    this.changeDetectorRef.detectChanges();\n  }\n\n  onSliderHotKey(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (accessKeys.isSliderKeys()) {\n      event.stopPropagation();\n    }\n  }\n\n  openCanvasGroupDialog(): void {\n    this.pageDialogService.toggle();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../../../core/canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../../core/intl/viewer-intl';\nimport { Manifest } from '../../../core/models/manifest';\nimport { SearchResult } from '../../../core/models/search-result';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { ContentSearchNavigationService } from '../../../core/navigation/content-search-navigation-service/content-search-navigation.service';\n\n@Component({\n  selector: 'mime-content-search-navigator',\n  templateUrl: './content-search-navigator.component.html',\n  styleUrls: ['./content-search-navigator.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ContentSearchNavigatorComponent implements OnInit, OnDestroy {\n  @Input() searchResult!: SearchResult;\n  public isHitOnActiveCanvasGroup = false;\n  public isFirstCanvasGroupHit = false;\n  public isLastCanvasGroupHit = false;\n  public currentIndex = 0;\n  invert = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchNavigationService: ContentSearchNavigationService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.contentSearchNavigationService.initialize();\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n            this.changeDetectorRef.detectChanges();\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex) => {\n          this.contentSearchNavigationService.update(canvasGroupIndex);\n          this.currentIndex = this.contentSearchNavigationService.getCurrentIndex();\n          this.isHitOnActiveCanvasGroup = this.contentSearchNavigationService.getHitOnActiveCanvasGroup();\n          this.isFirstCanvasGroupHit = this.contentSearchNavigationService.getFirstHitCanvasGroup();\n          this.isLastCanvasGroupHit = this.contentSearchNavigationService.getLastHitCanvasGroup();\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n    this.contentSearchNavigationService.destroy();\n  }\n\n  clear(): void {\n    this.iiifContentSearchService.destroy();\n  }\n\n  goToPreviousCanvasGroupHit() {\n    this.contentSearchNavigationService.goToPreviousCanvasGroupHit();\n  }\n\n  goToNextCanvasGroupHit() {\n    this.contentSearchNavigationService.goToNextCanvasGroupHit();\n  }\n}\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport {\n  ChangeDetectorRef,\n  Component,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { MediaChange, MediaObserver } from '@angular/flex-layout';\nimport { Subscription } from 'rxjs';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { IiifContentSearchService } from './../../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../../core/models/search-result';\n\n@Component({\n  selector: 'mime-viewer-footer',\n  templateUrl: './viewer-footer.component.html',\n  styleUrls: ['./viewer-footer.component.scss'],\n  animations: [\n    trigger('footerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, 100%)',\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0, 0)',\n        })\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in')\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out')\n      ),\n    ]),\n  ],\n})\nexport class ViewerFooterComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeFooterBefore', { read: ViewContainerRef, static: true })\n  mimeFooterBefore!: ViewContainerRef;\n  @ViewChild('mimeFooterAfter', { read: ViewContainerRef, static: true })\n  mimeFooterAfter!: ViewContainerRef;\n  public state = 'hide';\n  public showNavigationToolbar = true;\n  public searchResult: SearchResult = new SearchResult();\n  public showPageNavigator = true;\n  public showContentSearchNavigator = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private iiifContentSearchService: IiifContentSearchService,\n    public mediaObserver: MediaObserver,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  @HostBinding('@footerState')\n  get footerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.searchResult = sr;\n        this.showContentSearchNavigator = this.searchResult.size() > 0;\n        this.showPageNavigator =\n          this.searchResult.size() === 0 || !this.isMobile();\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.mediaObserver.asObservable().subscribe((changes: MediaChange[]) => {\n        this.showPageNavigator =\n          this.searchResult.size() === 0 || !this.isMobile();\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  private isMobile(): boolean {\n    return this.mediaObserver.isActive('lt-md');\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'mime-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IconComponent {\n  @Input() iconName = '';\n}\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { AltoService } from '../../core/alto-service/alto.service';\nimport { ManifestUtils } from '../../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeDomHelper } from '../../core/mime-dom-helper';\nimport { ViewerLayout } from '../../core/models/viewer-layout';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { ViewerLayoutService } from '../../core/viewer-layout-service/viewer-layout-service';\nimport { HelpDialogService } from '../../help-dialog/help-dialog.service';\nimport { ContentSearchDialogService } from './../../content-search-dialog/content-search-dialog.service';\nimport { ContentsDialogService } from './../../contents-dialog/contents-dialog.service';\nimport { FullscreenService } from './../../core/fullscreen-service/fullscreen.service';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { Manifest } from './../../core/models/manifest';\n\n@Component({\n  selector: 'mime-viewer-header',\n  templateUrl: './viewer-header.component.html',\n  styleUrls: ['./viewer-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.Default,\n  animations: [\n    trigger('headerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, -100%)',\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0px, 0px)',\n        })\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in')\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out')\n      ),\n    ]),\n  ],\n})\nexport class ViewerHeaderComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeHeaderBefore', { read: ViewContainerRef, static: true })\n  mimeHeaderBefore!: ViewContainerRef;\n  @ViewChild('mimeHeaderAfter', { read: ViewContainerRef, static: true })\n  mimeHeaderAfter!: ViewContainerRef;\n  public manifest: Manifest | null = null;\n  public state = 'hide';\n  isContentSearchEnabled = false;\n  isFullscreenEnabled = false;\n  isInFullscreen = false;\n  fullscreenLabel = this.intl.fullScreenLabel;\n  isPagedManifest = false;\n  hasRecognizedTextContent = false;\n  viewerLayout: ViewerLayout = ViewerLayout.ONE_PAGE;\n\n  ViewerLayout: typeof ViewerLayout = ViewerLayout; // enables parsing of enum in template\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private contentsDialogService: ContentsDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private helpDialogService: HelpDialogService,\n    private iiifManifestService: IiifManifestService,\n    private fullscreenService: FullscreenService,\n    private mimeDomHelper: MimeDomHelper,\n    private viewerLayoutService: ViewerLayoutService,\n    private altoService: AltoService,\n    el: ElementRef\n  ) {\n    contentsDialogService.el = el;\n    contentSearchDialogService.el = el;\n    helpDialogService.el = el;\n  }\n\n  @HostBinding('@headerState')\n  get headerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.isFullscreenEnabled = this.fullscreenService.isEnabled();\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n\n    this.subscriptions.add(\n      this.fullscreenService.onChange.subscribe(() => {\n        this.isInFullscreen = this.fullscreenService.isFullscreen();\n        this.fullscreenLabel = this.isInFullscreen\n          ? this.intl.exitFullScreenLabel\n          : this.intl.fullScreenLabel;\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.isContentSearchEnabled =\n            manifest && manifest.service ? true : false;\n          this.isPagedManifest = manifest\n            ? ManifestUtils.isManifestPaged(manifest)\n            : false;\n          this.hasRecognizedTextContent = manifest ? ManifestUtils.hasRecognizedTextContent(manifest) : false;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe(\n        (viewerLayout: ViewerLayout) => {\n          this.viewerLayout = viewerLayout;\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  toggleRecognizedTextContent(): void {\n    this.altoService.toggle();\n  }\n\n  public toggleContents() {\n    this.contentSearchDialogService.close();\n    this.helpDialogService.close();\n    this.contentsDialogService.toggle();\n  }\n\n  public toggleSearch() {\n    this.contentsDialogService.close();\n    this.helpDialogService.close();\n    this.contentSearchDialogService.toggle();\n  }\n\n  public toggleHelp() {\n    this.contentsDialogService.close();\n    this.contentSearchDialogService.close();\n    this.helpDialogService.toggle();\n  }\n\n  public toggleFullscreen(): void {\n    return this.mimeDomHelper.toggleFullscreen();\n  }\n\n  public isInFullScreen(): boolean {\n    return this.fullscreenService.isFullscreen();\n  }\n\n  public toggleViewerLayout(): void {\n    this.viewerLayoutService.toggle();\n  }\n\n  public setLayoutOnePage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.ONE_PAGE);\n  }\n\n  public setLayoutTwoPage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.TWO_PAGE);\n  }\n}\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport {\n  SpinnerService,\n  SpinnerState,\n} from '../../core/spinner-service/spinner.service';\n\n@Component({\n  selector: 'mime-spinner',\n  templateUrl: './viewer-spinner.component.html',\n  styleUrls: ['./viewer-spinner.component.scss'],\n})\nexport class ViewerSpinnerComponent implements OnDestroy, OnInit {\n  public visible = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private spinnerService: SpinnerService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.spinnerService.spinnerState.subscribe((state: SpinnerState) => {\n        this.visible = state.show;\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","export class ContentDialogState {\n  public isOpen = false;\n  public selectedIndex = 0;\n\n  constructor(fields?: { isOpen?: boolean; selectedIndex?: number }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n      this.selectedIndex =\n        fields.selectedIndex !== undefined\n          ? fields.selectedIndex\n          : this.selectedIndex;\n    }\n  }\n}\n","export class ContentsSearchDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","export class HelpDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","import { ContentDialogState } from './content-dialog-state';\nimport { ContentsSearchDialogState } from './contents-search-dialog-state';\nimport { HelpDialogState } from './help-dialog-state';\n\nexport class ViewerState {\n  public contentDialogState = new ContentDialogState();\n  public contentsSearchDialogState = new ContentsSearchDialogState();\n  public helpDialogState = new HelpDialogState();\n\n  constructor(fields?: {\n    contentDialogState?: ContentDialogState;\n    contentsSearchDialogState?: ContentsSearchDialogState;\n    helpDialogState?: HelpDialogState;\n  }) {\n    if (fields) {\n      this.contentDialogState = fields.contentDialogState\n        ? fields.contentDialogState\n        : this.contentDialogState;\n      this.contentsSearchDialogState = fields.contentsSearchDialogState\n        ? fields.contentsSearchDialogState\n        : this.contentsSearchDialogState;\n      this.helpDialogState = fields.helpDialogState\n        ? fields.helpDialogState\n        : this.helpDialogState;\n    }\n  }\n}\n","import {\n  AfterViewChecked,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { interval, Subscription } from 'rxjs';\nimport { take, throttle } from 'rxjs/operators';\nimport { AttributionDialogService } from '../attribution-dialog/attribution-dialog.service';\nimport { ContentSearchDialogService } from '../content-search-dialog/content-search-dialog.service';\nimport { ContentsDialogService } from '../contents-dialog/contents-dialog.service';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { AltoService } from '../core/alto-service/alto.service';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { ManifestUtils } from '../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { MimeViewerConfig } from '../core/mime-viewer-config';\nimport { ModeService } from '../core/mode-service/mode.service';\nimport { Manifest } from '../core/models/manifest';\nimport { ModeChanges } from '../core/models/modeChanges';\nimport { ViewerLayout } from '../core/models/viewer-layout';\nimport { ViewerMode } from '../core/models/viewer-mode';\nimport { ViewerOptions } from '../core/models/viewer-options';\nimport { ViewerState } from '../core/models/viewerState';\nimport { StyleService } from '../core/style-service/style.service';\nimport { ViewerLayoutService } from '../core/viewer-layout-service/viewer-layout-service';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\nimport { HelpDialogService } from '../help-dialog/help-dialog.service';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../core/models/search-result';\nimport { OsdToolbarComponent } from './osd-toolbar/osd-toolbar.component';\nimport { ViewerFooterComponent } from './viewer-footer/viewer-footer.component';\nimport { ViewerHeaderComponent } from './viewer-header/viewer-header.component';\n\n@Component({\n  selector: 'mime-viewer',\n  templateUrl: './viewer.component.html',\n  styleUrls: ['./viewer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ViewerComponent\n  implements OnInit, AfterViewChecked, OnDestroy, OnChanges {\n  @Input() public manifestUri!: string;\n  @Input() public q!: string;\n  @Input() public canvasIndex = 0;\n  @Input() public config: MimeViewerConfig = new MimeViewerConfig();\n  @Input() public tabIndex = 0;\n  @Output() viewerModeChanged: EventEmitter<ViewerMode> = new EventEmitter();\n  @Output() canvasChanged: EventEmitter<number> = new EventEmitter();\n  @Output() qChanged: EventEmitter<string> = new EventEmitter();\n  @Output() manifestChanged: EventEmitter<Manifest> = new EventEmitter();\n  @Output()\n  recognizedTextContentToggleChanged: EventEmitter<boolean> = new EventEmitter();\n\n  private subscriptions = new Subscription();\n  private isCanvasPressed = false;\n  private currentManifest!: Manifest | null;\n  private viewerLayout: ViewerLayout | null = null;\n  private viewerState = new ViewerState();\n\n  isRecognizedTextContentToggled = false;\n  showHeaderAndFooterState = 'hide';\n  public errorMessage: string | null = null;\n\n  // Viewchilds\n  @ViewChild('mimeHeader', { static: true })\n  private header!: ViewerHeaderComponent;\n  @ViewChild('mimeFooter', { static: true })\n  private footer!: ViewerFooterComponent;\n  @ViewChild('mimeOsdToolbar')\n  private osdToolbar!: OsdToolbarComponent;\n\n  constructor(\n    public snackBar: MatSnackBar,\n    public intl: MimeViewerIntl,\n    private el: ElementRef,\n    private iiifManifestService: IiifManifestService,\n    private contentsDialogService: ContentsDialogService,\n    private attributionDialogService: AttributionDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private helpDialogService: HelpDialogService,\n    private viewerService: ViewerService,\n    private resizeService: MimeResizeService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private modeService: ModeService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private accessKeysHandlerService: AccessKeysService,\n    private canvasService: CanvasService,\n    private viewerLayoutService: ViewerLayoutService,\n    private styleService: StyleService,\n    private altoService: AltoService,\n    public zone: NgZone\n  ) {\n    contentsDialogService.el = el;\n    attributionDialogService.el = el;\n    contentSearchDialogService.el = el;\n    helpDialogService.el = el;\n    resizeService.el = el;\n  }\n\n  get mimeHeaderBeforeRef(): ViewContainerRef {\n    return this.header.mimeHeaderBefore;\n  }\n\n  get mimeHeaderAfterRef(): ViewContainerRef {\n    return this.header.mimeHeaderAfter;\n  }\n\n  get mimeFooterBeforeRef(): ViewContainerRef {\n    return this.footer.mimeFooterBefore;\n  }\n\n  get mimeFooterAfterRef(): ViewContainerRef {\n    return this.footer.mimeFooterAfter;\n  }\n\n  ngOnInit(): void {\n    this.styleService.initialize();\n    this.modeService.initialMode = this.config.initViewerMode;\n    this.altoService.onRecognizedTextContentToggle = this.config.initRecognizedTextContentToggle;\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.initialize();\n            this.currentManifest = manifest;\n            this.manifestChanged.next(manifest);\n            this.viewerLayoutService.init(\n              ManifestUtils.isManifestPaged(manifest)\n            );\n            this.isRecognizedTextContentToggled =\n              this.altoService.onRecognizedTextContentToggle && manifest\n                ? ManifestUtils.hasRecognizedTextContent(manifest)\n                : false;\n            this.changeDetectorRef.detectChanges();\n            this.viewerService.setUpViewer(manifest, this.config);\n            if (this.config.attributionDialogEnabled && manifest.attribution) {\n              this.attributionDialogService.open(\n                this.config.attributionDialogHideTimeout\n              );\n            }\n\n            if (this.q) {\n              this.iiifContentSearchService.search(manifest, this.q);\n            }\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onOsdReadyChange.subscribe((state: boolean) => {\n        // Don't reset current page when switching layout\n        if (\n          state &&\n          this.canvasIndex &&\n          !this.canvasService.currentCanvasGroupIndex\n        ) {\n          this.viewerService.goToCanvas(this.canvasIndex, false);\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.errorMessage.subscribe(\n        (error: string | null) => {\n          this.resetCurrentManifest();\n          this.errorMessage = error;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onQChange.subscribe((q: string) => {\n        this.qChanged.emit(q);\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.viewerService.highlight(sr);\n      })\n    );\n\n    this.subscriptions.add(\n      this.viewerService.isCanvasPressed.subscribe((value: boolean) => {\n        this.isCanvasPressed = value;\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.modeService.onChange.subscribe((mode: ModeChanges) => {\n        if (mode.currentValue !== undefined) {\n          this.toggleToolbarsState(mode.currentValue);\n        }\n        if (\n          mode.previousValue === ViewerMode.DASHBOARD &&\n          mode.currentValue === ViewerMode.PAGE\n        ) {\n          this.viewerState.contentDialogState.isOpen = this.contentsDialogService.isOpen();\n          this.viewerState.contentDialogState.selectedIndex = this.contentsDialogService.getSelectedIndex();\n          this.viewerState.contentsSearchDialogState.isOpen = this.contentSearchDialogService.isOpen();\n          this.viewerState.helpDialogState.isOpen = this.helpDialogService.isOpen();\n          this.zone.run(() => {\n            this.contentsDialogService.close();\n            this.contentSearchDialogService.close();\n            this.helpDialogService.close();\n          });\n        }\n        if (mode.currentValue === ViewerMode.DASHBOARD) {\n          this.zone.run(() => {\n            if (this.viewerState.contentDialogState.isOpen) {\n              this.contentsDialogService.open(\n                this.viewerState.contentDialogState.selectedIndex\n              );\n            }\n            if (this.viewerState.contentsSearchDialogState.isOpen) {\n              this.contentSearchDialogService.open();\n            }\n            if (this.viewerState.helpDialogState.isOpen) {\n              this.helpDialogService.open();\n            }\n          });\n        }\n        this.viewerModeChanged.emit(mode.currentValue);\n      })\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          const canvasIndex = this.canvasService.findCanvasByCanvasIndex(\n            canvasGroupIndex\n          );\n          if (canvasIndex !== -1) {\n            this.canvasChanged.emit(canvasIndex);\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.resizeService.onResize\n        .pipe(\n          throttle((val) =>\n            interval(ViewerOptions.transitions.OSDAnimationTime)\n          )\n        )\n        .subscribe(() => {\n          setTimeout(() => {\n            this.viewerService.home();\n          }, ViewerOptions.transitions.OSDAnimationTime);\n        })\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe(\n        (viewerLayout: ViewerLayout) => {\n          this.viewerLayout = viewerLayout;\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.altoService.onRecognizedTextContentToggleChange$.subscribe(\n        (isRecognizedTextContentToggled: boolean) => {\n          this.isRecognizedTextContentToggled = isRecognizedTextContentToggled;\n          this.recognizedTextContentToggleChanged.emit(\n            isRecognizedTextContentToggled\n          );\n          this.changeDetectorRef.markForCheck();\n        }\n      )\n    );\n\n    this.loadManifest();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    let manifestUriIsChanged = false;\n    let qIsChanged = false;\n    let canvasIndexChanged = false;\n    if (changes['q']) {\n      const qChanges: SimpleChange = changes['q'];\n      if (\n        !qChanges.isFirstChange() &&\n        qChanges.currentValue !== qChanges.firstChange\n      ) {\n        this.q = qChanges.currentValue;\n        qIsChanged = true;\n      }\n    }\n    if (changes['canvasIndex']) {\n      const canvasIndexChanges: SimpleChange = changes['canvasIndex'];\n      if (\n        !canvasIndexChanges.isFirstChange() &&\n        canvasIndexChanges.currentValue !== canvasIndexChanges.firstChange\n      ) {\n        this.canvasIndex = canvasIndexChanges.currentValue;\n        canvasIndexChanged = true;\n      }\n    }\n    if (changes['manifestUri']) {\n      const manifestUriChanges: SimpleChange = changes['manifestUri'];\n      if (!manifestUriChanges.isFirstChange()) {\n        this.cleanup();\n      }\n      if (\n        !manifestUriChanges.isFirstChange() &&\n        manifestUriChanges.currentValue !== manifestUriChanges.previousValue\n      ) {\n        this.modeService.mode = this.config.initViewerMode;\n        this.manifestUri = manifestUriChanges.currentValue;\n        manifestUriIsChanged = true;\n      }\n    }\n\n    if (manifestUriIsChanged) {\n      this.loadManifest();\n    } else {\n      if (qIsChanged && this.currentManifest) {\n        this.iiifContentSearchService.search(this.currentManifest, this.q);\n      }\n      if (canvasIndexChanged) {\n        this.viewerService.goToCanvas(this.canvasIndex, true);\n      }\n    }\n  }\n\n  @HostListener('keyup', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('drop', ['$event'])\n  public onDrop(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.config.isDropEnabled) {\n      const url = event.dataTransfer.getData('URL');\n      const params = new URL(url).searchParams;\n      const manifestUri = params.get('manifest');\n      const startCanvasId = params.get('canvas');\n      if (manifestUri) {\n        this.manifestUri = manifestUri.startsWith('//')\n          ? `${location.protocol}${manifestUri}`\n          : manifestUri;\n        this.cleanup();\n        this.loadManifest();\n        if (startCanvasId) {\n          this.manifestChanged.pipe(take(1)).subscribe((manifest) => {\n            const canvasIndex = manifest.sequences\n              ? manifest.sequences[0]?.canvases?.findIndex(\n                  (c) => c.id === startCanvasId\n                )\n              : -1;\n            if (canvasIndex && canvasIndex !== -1) {\n              setTimeout(() => {\n                this.viewerService.goToCanvas(canvasIndex, true);\n              }, 0);\n            }\n          });\n        }\n      }\n    } else {\n      this.snackBar.open(this.intl.dropDisabled, undefined, {\n        duration: 3000,\n      });\n    }\n  }\n\n  @HostListener('dragover', ['$event'])\n  public onDragOver(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  @HostListener('dragleave', ['$event'])\n  public onDragLeave(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.cleanup();\n    this.iiifManifestService.destroy();\n    this.iiifContentSearchService.destroy();\n    this.styleService.destroy();\n  }\n\n  toggleToolbarsState(mode: ViewerMode): void {\n    if (this.header && this.footer) {\n      switch (mode) {\n        case ViewerMode.DASHBOARD:\n          this.showHeaderAndFooterState = this.header.state = this.footer.state =\n            'show';\n          if (this.config.navigationControlEnabled && this.osdToolbar) {\n            this.osdToolbar.state = 'hide';\n          }\n          break;\n        case ViewerMode.PAGE:\n          this.showHeaderAndFooterState = this.header.state = this.footer.state =\n            'hide';\n          if (this.config.navigationControlEnabled && this.osdToolbar) {\n            this.osdToolbar.state = 'show';\n          }\n          break;\n      }\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  ngAfterViewChecked() {\n    this.resizeService.markForCheck();\n  }\n\n  private loadManifest(): void {\n    this.iiifManifestService.load(this.manifestUri).pipe(take(1)).subscribe();\n  }\n\n  private initialize() {\n    this.accessKeysHandlerService.initialize();\n    this.attributionDialogService.initialize();\n    this.contentsDialogService.initialize();\n    this.contentSearchDialogService.initialize();\n    this.helpDialogService.initialize();\n    this.viewerService.initialize();\n  }\n\n  private cleanup() {\n    this.viewerState = new ViewerState();\n    this.accessKeysHandlerService.destroy();\n    this.attributionDialogService.destroy();\n    this.contentsDialogService.destroy();\n    this.contentSearchDialogService.destroy();\n    this.helpDialogService.destroy();\n    this.viewerService.destroy();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest(): void {\n    this.currentManifest = null;\n  }\n\n  private resetErrorMessage(): void {\n    this.errorMessage = null;\n  }\n\n  goToHomeZoom(): void {\n    this.viewerService.goToHomeZoom();\n  }\n\n  setClasses() {\n    return {\n      'mode-page': this.modeService.mode === ViewerMode.PAGE,\n      'mode-page-zoomed': this.modeService.isPageZoomed(),\n      'mode-dashboard': this.modeService.mode === ViewerMode.DASHBOARD,\n      'layout-one-page': this.viewerLayout === ViewerLayout.ONE_PAGE,\n      'layout-two-page': this.viewerLayout === ViewerLayout.TWO_PAGE,\n      'canvas-pressed': this.isCanvasPressed,\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport 'd3';\nimport 'openseadragon';\nimport { AttributionDialogModule } from './attribution-dialog/attribution-dialog.module';\nimport { CanvasGroupDialogModule } from './canvas-group-dialog/canvas-group-dialog.module';\nimport { ContentSearchDialogModule } from './content-search-dialog/content-search-dialog.module';\nimport { ContentsDialogModule } from './contents-dialog/contents-dialog.module';\nimport { CoreModule } from './core/core.module';\nimport { HelpDialogModule } from './help-dialog/help-dialog.module';\nimport { SharedModule } from './shared/shared.module';\nimport { OsdToolbarComponent } from './viewer/osd-toolbar/osd-toolbar.component';\nimport { RecognizedTextContentComponent } from './viewer/recognized-text-content/recognized-text-content.component';\nimport { CanvasGroupNavigatorComponent } from './viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component';\nimport { ContentSearchNavigatorComponent } from './viewer/viewer-footer/content-search-navigator/content-search-navigator.component';\nimport { ViewerFooterComponent } from './viewer/viewer-footer/viewer-footer.component';\nimport { IconComponent } from './viewer/viewer-header/icon/icon.component';\nimport { ViewerHeaderComponent } from './viewer/viewer-header/viewer-header.component';\nimport { ViewerSpinnerComponent } from './viewer/viewer-spinner/viewer-spinner.component';\nimport { ViewerComponent } from './viewer/viewer.component';\n\n@NgModule({\n  declarations: [\n    ViewerComponent,\n    ViewerHeaderComponent,\n    ViewerFooterComponent,\n    OsdToolbarComponent,\n    ContentSearchNavigatorComponent,\n    CanvasGroupNavigatorComponent,\n    ViewerSpinnerComponent,\n    IconComponent,\n    RecognizedTextContentComponent,\n  ],\n  imports: [\n    CoreModule,\n    SharedModule,\n    ContentsDialogModule,\n    AttributionDialogModule,\n    HelpDialogModule,\n    ContentSearchDialogModule,\n    CanvasGroupDialogModule,\n  ],\n  exports: [ViewerComponent],\n})\nexport class MimeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {AttributionDialogResizeService as ɵi} from './lib/attribution-dialog/attribution-dialog-resize.service';\nexport {AttributionDialogComponent as ɵbp} from './lib/attribution-dialog/attribution-dialog.component';\nexport {AttributionDialogModule as ɵbo} from './lib/attribution-dialog/attribution-dialog.module';\nexport {AttributionDialogService as ɵh} from './lib/attribution-dialog/attribution-dialog.service';\nexport {CanvasGroupDialogComponent as ɵbv} from './lib/canvas-group-dialog/canvas-group-dialog.component';\nexport {CanvasGroupDialogModule as ɵbu} from './lib/canvas-group-dialog/canvas-group-dialog.module';\nexport {CanvasGroupDialogService as ɵbd} from './lib/canvas-group-dialog/canvas-group-dialog.service';\nexport {ContentSearchDialogConfigStrategyFactory as ɵk} from './lib/content-search-dialog/content-search-dialog-config-strategy-factory';\nexport {ContentSearchDialogComponent as ɵbt} from './lib/content-search-dialog/content-search-dialog.component';\nexport {ContentSearchDialogModule as ɵbs} from './lib/content-search-dialog/content-search-dialog.module';\nexport {ContentSearchDialogService as ɵj} from './lib/content-search-dialog/content-search-dialog.service';\nexport {ContentsDialogConfigStrategyFactory as ɵd} from './lib/contents-dialog/contents-dialog-config-strategy-factory';\nexport {ContentsDialogComponent as ɵbl} from './lib/contents-dialog/contents-dialog.component';\nexport {ContentsDialogModule as ɵbk} from './lib/contents-dialog/contents-dialog.module';\nexport {ContentsDialogService as ɵc} from './lib/contents-dialog/contents-dialog.service';\nexport {MetadataComponent as ɵbm} from './lib/contents-dialog/metadata/metadata.component';\nexport {TocComponent as ɵbn} from './lib/contents-dialog/table-of-contents/table-of-contents.component';\nexport {AccessKeysService as ɵv} from './lib/core/access-keys-handler-service/access-keys.service';\nexport {AltoService as ɵu} from './lib/core/alto-service/alto.service';\nexport {CanvasService as ɵp} from './lib/core/canvas-service/canvas-service';\nexport {ClickService as ɵo} from './lib/core/click-service/click.service';\nexport {CoreModule as ɵbh} from './lib/core/core.module';\nexport {FullscreenService as ɵf} from './lib/core/fullscreen-service/fullscreen.service';\nexport {IiifContentSearchService as ɵs} from './lib/core/iiif-content-search-service/iiif-content-search.service';\nexport {IiifManifestService as ɵa} from './lib/core/iiif-manifest-service/iiif-manifest-service';\nexport {MimeDomHelper as ɵe} from './lib/core/mime-dom-helper';\nexport {MimeResizeService as ɵg} from './lib/core/mime-resize-service/mime-resize.service';\nexport {ModeService as ɵq} from './lib/core/mode-service/mode.service';\nexport {ViewerOptions as ɵy} from './lib/core/models/viewer-options';\nexport {ContentSearchNavigationService as ɵw} from './lib/core/navigation/content-search-navigation-service/content-search-navigation.service';\nexport {SpinnerService as ɵb} from './lib/core/spinner-service/spinner.service';\nexport {StyleService as ɵt} from './lib/core/style-service/style.service';\nexport {ViewerLayoutService as ɵr} from './lib/core/viewer-layout-service/viewer-layout-service';\nexport {ViewerService as ɵn} from './lib/core/viewer-service/viewer.service';\nexport {HelpDialogConfigStrategyFactory as ɵm} from './lib/help-dialog/help-dialog-config-strategy-factory';\nexport {HelpDialogComponent as ɵbr} from './lib/help-dialog/help-dialog.component';\nexport {HelpDialogModule as ɵbq} from './lib/help-dialog/help-dialog.module';\nexport {HelpDialogService as ɵl} from './lib/help-dialog/help-dialog.service';\nexport {MimeMaterialModule as ɵbj} from './lib/shared/mime-material.module';\nexport {SharedModule as ɵbi} from './lib/shared/shared.module';\nexport {OsdToolbarComponent as ɵba} from './lib/viewer/osd-toolbar/osd-toolbar.component';\nexport {RecognizedTextContentComponent as ɵbg} from './lib/viewer/recognized-text-content/recognized-text-content.component';\nexport {CanvasGroupNavigatorComponent as ɵbc} from './lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component';\nexport {ContentSearchNavigatorComponent as ɵbb} from './lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component';\nexport {ViewerFooterComponent as ɵz} from './lib/viewer/viewer-footer/viewer-footer.component';\nexport {IconComponent as ɵbf} from './lib/viewer/viewer-header/icon/icon.component';\nexport {ViewerHeaderComponent as ɵx} from './lib/viewer/viewer-header/viewer-header.component';\nexport {ViewerSpinnerComponent as ɵbe} from './lib/viewer/viewer-spinner/viewer-spinner.component';"],"names":["Subject","Injectable","ViewerMode","NgModule","MatToolbarModule","MatButtonModule","MatIconModule","MatTooltipModule","MatDialogModule","MatTabsModule","MatListModule","MatSliderModule","MatProgressSpinnerModule","MatInputModule","MatProgressBarModule","MatCardModule","MatSnackBarModule","MatSidenavModule","CommonModule","FormsModule","ReactiveFormsModule","FlexLayoutModule","ReplaySubject","MediaObserver","BehaviorSubject","distinctUntilChanged","finalize","take","throwError","HttpClient","Observable","Subscription","Component","MatDialogRef","ViewChild","ViewChildren","ElementRef","HostListener","MatDialog","ChangeDetectionStrategy","ChangeDetectorRef","debounceTime","forkJoin","HttpHeaders","catchError","of","parseString","DomSanitizer","filter","interval","tap","NgZone","d3","OpenSeadragon","sample","Renderer2","FormControl","Validators","FormBuilder","EventEmitter","Output","ErrorStateMatcher","ShowOnDirtyErrorStateMatcher","trigger","state","style","transition","group","animate","HostBinding","Input","ViewContainerRef","throttle","MatSnackBar"],"mappings":"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"}