{"version":3,"sources":["/home/ronnym/git/ngx-mime/libs/ngx-mime/src/index.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog-resize.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog-config-strategy-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog-config-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/contents-dialog.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/metadata/metadata.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/metadata/metadata.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/table-of-contents/table-of-contents.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/contents-dialog/table-of-contents/table-of-contents.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/access-keys-handler-service/access-keys.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/builder-utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/canvas.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/images.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/manifest.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/metadata.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/resource.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/search-result.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/sequence.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/service.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/sizes.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/structure.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/tile-source.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/builders/tiles.builder.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-group-position/calculate-canvas-group-position-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-group-position/calculate-canvas-group-position-utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-group-position/one-page-calculate-page-position-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-group-position/two-page-calculate-page-position-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-service/canvas-group.strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-service/canvas-groups-strategy.factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/canvas-service/canvas-service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/click-service/click.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/core.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/ext/svg-overlay.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/fullscreen-service/fullscreen.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/iiif-content-search-service/iiif-content-search.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/help-intl.lt.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/help-intl.no_nb.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/help-intl.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/viewer-intl.lt.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/viewer-intl.no_nb.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/intl/viewer-intl.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/mime-dom-helper.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/mime-resize-service/mime-resize.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/mime-viewer-config.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/mode-service/mode.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/AccessKeys.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/canvas-groups.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/content-dialog-state.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/contents-search-dialog-state.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/controlAnchor.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/dimensions.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/direction.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/gestureSettings.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/help-dialog-state.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/hit.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/manifest.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/modeChanges.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/options.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/pinchStatus.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/rect.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/search-result.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/side.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/viewer-layout.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/viewer-mode.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/viewer-options.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/viewerState.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/models/viewing-direction.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/navigation/content-search-navigation-service/content-search-navigation.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/spinner-service/spinner.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/style-service/style.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-layout-service/viewer-layout-service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/calculate-next-canvas-group-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/canvas-group-mask.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/dashboard-mode-calculate-next-canvas-group-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/go-to-canvas-group-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/iiif-tile-source-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/navigator-calculate-next-canvas-group-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/page-mode-calculate-next-canvas-group-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/page-zoomed-mode-calculate-next-canvas-group-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/static-image-tile-source-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/swipe-drag-end-counter.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/swipe-utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/tile-source-strategy-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/viewer.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/zoom-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/core/viewer-service/zoom-utils.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy-factory.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/help-dialog/help-dialog.service.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/ngx-mime.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/shared/mime-material.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/shared/shared.module.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/osd-toolbar/osd-toolbar.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/osd-toolbar/osd-toolbar.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/viewer-footer.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-footer/viewer-footer.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-header/icon/icon.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-header/icon/icon.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-header/viewer-header.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-header/viewer-header.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-spinner/viewer-spinner.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer-spinner/viewer-spinner.component.html","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer.component.ts","/home/ronnym/git/ngx-mime/libs/ngx-mime/src/lib/viewer/viewer.component.html","./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/core/auth.interceptor.ts","./src/app/core/core.module.ts","./src/app/core/manifest-service/manifest.service.ts","./src/app/core/navbar/navbar.component.ts","./src/app/core/navbar/navbar.component.html","./src/app/core/navbar/theme-picker/theme-picker.component.ts","./src/app/core/navbar/theme-picker/theme-picker.component.html","./src/app/core/navbar/theme-picker/theme-service/theme.service.ts","./src/app/core/sidenav/sidenav.component.ts","./src/app/core/sidenav/sidenav.component.html","./src/app/shared/demoMaterialModule.ts","./src/app/shared/shared.module.ts","./src/app/viewer/viewer.component.ts","./src/app/viewer/viewer.component.html","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["export { MimeViewerIntl } from './lib/core/intl/viewer-intl';\nexport { MimeViewerIntlNoNb } from './lib/core/intl/viewer-intl.no_nb';\nexport { MimeViewerIntlLt } from './lib/core/intl/viewer-intl.lt';\nexport { MimeViewerConfig } from './lib/core/mime-viewer-config';\nexport { Manifest as MimeManifest } from './lib/core/models/manifest';\nexport { ViewerMode as MimeViewerMode } from './lib/core/models/viewer-mode';\nexport { MimeModule } from './lib/ngx-mime.module';\nexport { ViewerComponent as MimeViewerComponent } from './lib/viewer/viewer.component';\n","import { Injectable, ElementRef } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { Dimensions } from './../core/models/dimensions';\n\n@Injectable()\nexport class AttributionDialogResizeService {\n  private _el: ElementRef;\n  private resizeSubject: ReplaySubject<Dimensions> = new ReplaySubject();\n  private dimensions = new Dimensions();\n\n  constructor(private mimeDomHelper: MimeDomHelper) {}\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  get el() {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.asObservable();\n  }\n\n  markForCheck() {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n    if (\n      this.dimensions.bottom !== dimensions.bottom ||\n      this.dimensions.height !== dimensions.height ||\n      this.dimensions.left !== dimensions.left ||\n      this.dimensions.right !== dimensions.right ||\n      this.dimensions.top !== dimensions.top ||\n      this.dimensions.width !== dimensions.width\n    ) {\n      this.dimensions = dimensions;\n      this.resizeSubject.next({ ...this.dimensions });\n    }\n  }\n}\n","import {\n  AfterViewChecked,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { Manifest } from '../core/models/manifest';\nimport { StyleService } from '../core/style-service/style.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\n\n@Component({\n  templateUrl: './attribution-dialog.component.html',\n  styleUrls: ['./attribution-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AttributionDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy, AfterViewChecked {\n  public manifest: Manifest;\n  private destroyed: Subject<void> = new Subject();\n  @ViewChild('container', { static: true }) container: ElementRef;\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private renderer: Renderer2,\n    private el: ElementRef,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private styleService: StyleService,\n    private accessKeysHandlerService: AccessKeysService\n  ) {\n    attributionDialogResizeService.el = el;\n  }\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  ngAfterViewInit() {\n    this.styleService.onChange.pipe(takeUntil(this.destroyed)).subscribe(c => {\n      const backgroundRgbaColor = this.styleService.convertToRgba(c, 0.3);\n      this.renderer.setStyle(\n        this.container.nativeElement,\n        'background-color',\n        backgroundRgbaColor\n      );\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  @HostListener('keyup', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.attributionDialogResizeService.markForCheck();\n  }\n\n  ngAfterViewChecked() {\n    this.attributionDialogResizeService.markForCheck();\n  }\n}\n","<div #container id=\"attribution-container\" class=\"attribution-container\">\n  <mat-toolbar class=\"attribution-toolbar\">\n    <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" fxFlex>\n      <h1 mat-dialog-title>{{ intl.attributionLabel }}</h1>\n      <button\n        mat-icon-button\n        [aria-label]=\"intl.attributonCloseAriaLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </div>\n  </mat-toolbar>\n  <p mat-dialog-content [innerHTML]=\"manifest?.attribution\"> </p>\n</div>\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { AttributionDialogComponent } from './attribution-dialog.component';\nimport { AttributionDialogService } from './attribution-dialog.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [AttributionDialogComponent],\n  providers: [\n    AttributionDialogService,\n    AttributionDialogResizeService,\n    MimeDomHelper\n  ],\n  entryComponents: [AttributionDialogComponent]\n})\nexport class AttributionDialogModule {}\n","import { Injectable, ElementRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogRef,\n  MatDialogConfig\n} from '@angular/material/dialog';\nimport { Observable, Subscription, Subject, interval } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\n\nimport { AttributionDialogComponent } from './attribution-dialog.component';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { Dimensions } from '../core/models/dimensions';\n\n@Injectable()\nexport class AttributionDialogService {\n  private isAttributionDialogOpen = false;\n  private dialogRef: MatDialogRef<AttributionDialogComponent>;\n  private _el: ElementRef;\n  private attributionDialogHeight = 0;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    private dialog: MatDialog,\n    private mimeResizeService: MimeResizeService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public initialize(): void {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        if (this.isAttributionDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n        }\n      });\n    this.attributionDialogResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        if (this.isAttributionDialogOpen) {\n          this.attributionDialogHeight = dimensions.height;\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n        }\n      });\n  }\n\n  public destroy() {\n    this.close();\n    this.destroyed.next();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(timeout?: number): void {\n    if (!this.isAttributionDialogOpen) {\n      /**\n       * Sleeping for material animations to finish\n       * fix: https://github.com/angular/material2/issues/7438\n       */\n      interval(1000)\n        .pipe(take(1))\n        .subscribe(() => {\n          const config = this.getDialogConfig();\n          this.dialogRef = this.dialog.open(AttributionDialogComponent, config);\n          this.dialogRef.afterClosed().subscribe((result) => {\n            this.isAttributionDialogOpen = false;\n            this.mimeDomHelper.setFocusOnViewer();\n          });\n          this.isAttributionDialogOpen = true;\n          this.closeDialogAfter(timeout);\n        });\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isAttributionDialogOpen = false;\n    }\n  }\n\n  public toggle(): void {\n    this.isAttributionDialogOpen ? this.close() : this.open();\n  }\n\n  private closeDialogAfter(seconds: number) {\n    if (seconds > 0) {\n      interval(seconds * 1000)\n        .pipe(take(1))\n        .subscribe(() => {\n          this.close();\n        });\n    }\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    const dimensions = this.getPosition(this._el);\n    return {\n      hasBackdrop: false,\n      width: '180px',\n      panelClass: 'attribution-panel',\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      autoFocus: true,\n      restoreFocus: false\n    };\n  }\n\n  private getPosition(el: ElementRef) {\n    const padding = 20;\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top:\n        dimensions.top + dimensions.height - this.attributionDialogHeight - 68,\n      left: dimensions.left + padding\n    });\n  }\n}\n","import {\n  Component,\n  OnInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  OnDestroy\n} from '@angular/core';\nimport {\n  FormControl,\n  FormGroup,\n  FormBuilder,\n  Validators\n} from '@angular/forms';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { ViewerService } from '../core/viewer-service/viewer.service';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\n\n@Component({\n  templateUrl: './canvas-group-dialog.component.html',\n  styleUrls: ['./canvas-group-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CanvasGroupDialogComponent implements OnInit, OnDestroy {\n  numberOfCanvases: number;\n  canvasGroupForm: FormGroup;\n  canvasGroupControl: FormControl;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    private dialogRef: MatDialogRef<CanvasGroupDialogComponent>,\n    private fb: FormBuilder,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    this.numberOfCanvases = this.canvasService.numberOfCanvases;\n    this.createForm();\n  }\n\n  createForm() {\n    this.canvasGroupControl = new FormControl('', [\n      Validators.required,\n      Validators.min(1),\n      Validators.max(this.numberOfCanvases)\n    ]);\n    this.canvasGroupForm = this.fb.group({\n      canvasGroupControl: this.canvasGroupControl\n    });\n  }\n\n  ngOnInit() {\n    this.intl.changes\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => this.changeDetectorRef.markForCheck());\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  onSubmit(): void {\n    if (this.canvasGroupForm.valid) {\n      const pageNumber =\n        this.canvasGroupForm.get('canvasGroupControl').value - 1;\n      this.viewerService.goToCanvasGroup(\n        this.canvasService.findCanvasGroupByCanvasIndex(pageNumber),\n        false\n      );\n      this.dialogRef.close();\n    }\n  }\n}\n","<div fxLayout=\"column\">\n  <h1 class=\"canvas-group-dialog-title\">{{ intl.goToPageLabel }}</h1>\n  <form\n    [formGroup]=\"canvasGroupForm\"\n    (ngSubmit)=\"onSubmit()\"\n    novalidate\n    autocomplete=\"off\"\n  >\n    <mat-form-field [floatLabel]=\"'always'\">\n      <input\n        id=\"goToCanvasGroupInput\"\n        type=\"number\"\n        matInput\n        min=\"1\"\n        [placeholder]=\"intl.enterPageNumber\"\n        formControlName=\"canvasGroupControl\"\n      />\n      <mat-error\n        id=\"canvasGroupDoesNotExistsError\"\n        *ngIf=\"canvasGroupControl.errors?.max\"\n        >{{ intl.pageDoesNotExists }}</mat-error\n      >\n    </mat-form-field>\n    <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\n      <button id=\"cancelButton\" type=\"button\" mat-button matDialogClose>\n        CANCEL\n      </button>\n      <button\n        id=\"goToCanvasGroupSubmitButton\"\n        type=\"submit\"\n        mat-button\n        [disabled]=\"canvasGroupForm.pristine || canvasGroupForm.invalid\"\n      >\n        OK\n      </button>\n    </div>\n  </form>\n</div>\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog.component';\nimport { CanvasGroupDialogService } from './canvas-group-dialog.service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [CanvasGroupDialogComponent],\n  providers: [CanvasGroupDialogService],\n  entryComponents: [CanvasGroupDialogComponent]\n})\nexport class CanvasGroupDialogModule {}\n","import { Injectable, ElementRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogRef,\n  MatDialogConfig\n} from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\n\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog.component';\n\n@Injectable()\nexport class CanvasGroupDialogService {\n  private isCanvasGroupDialogOpen = false;\n  private dialogRef: MatDialogRef<CanvasGroupDialogComponent>;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(private dialog: MatDialog) {}\n\n  public initialize(): void {}\n\n  public destroy() {\n    this.close();\n    this.destroyed.next();\n  }\n\n  public open(timeout?: number): void {\n    if (!this.isCanvasGroupDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(CanvasGroupDialogComponent, config);\n      this.dialogRef.afterClosed().subscribe(result => {\n        this.isCanvasGroupDialogOpen = false;\n      });\n      this.isCanvasGroupDialogOpen = true;\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isCanvasGroupDialogOpen = false;\n    }\n  }\n\n  public toggle(): void {\n    this.isCanvasGroupDialogOpen ? this.close() : this.open();\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: true,\n      panelClass: 'canvas-group-panel'\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  ContentSearchDialogConfigStrategy,\n  DesktopContentSearchDialogConfigStrategy,\n  MobileContentSearchDialogConfigStrategy\n} from './content-search-dialog-config-strategy';\n\n@Injectable()\nexport class ContentSearchDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ContentSearchDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n      ? new MobileContentSearchDialogConfigStrategy()\n      : new DesktopContentSearchDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { MimeDomHelper } from './../core/mime-dom-helper';\nimport { ElementRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface ContentSearchDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef): MatDialogConfig;\n}\n\nexport class MobileContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'content-search-panel'\n    };\n  }\n}\n\nexport class DesktopContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: `${DesktopContentSearchDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'content-search-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopContentSearchDialogConfigStrategy.dialogWidth -\n        DesktopContentSearchDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from './../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../core/intl/viewer-intl';\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from './../core/models/dimensions';\nimport { Hit } from './../core/models/hit';\nimport { Manifest } from './../core/models/manifest';\nimport { SearchResult } from './../core/models/search-result';\n\n@Component({\n  selector: 'mime-search',\n  templateUrl: './content-search-dialog.component.html',\n  styleUrls: ['./content-search-dialog.component.scss']\n})\nexport class ContentSearchDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy {\n  public q: string;\n  public hits: Hit[] = [];\n  public currentHit: Hit;\n  public currentSearch = '';\n  public numberOfHits = 0;\n  public isSearching = false;\n  public tabHeight = {};\n  private manifest: Manifest;\n  private mimeHeight = 0;\n  private destroyed: Subject<void> = new Subject();\n  @ViewChild('contentSearchResult', { static: true })\n  resultContainer: ElementRef;\n  @ViewChild('query', { static: true }) qEl: ElementRef;\n  @ViewChildren('hitButton', { read: ElementRef })\n  hitList: QueryList<ElementRef>;\n\n  constructor(\n    public dialogRef: MatDialogRef<ContentSearchDialogComponent>,\n    public intl: MimeViewerIntl,\n    public mediaObserver: MediaObserver,\n    private mimeResizeService: MimeResizeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private el: ElementRef,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  ngOnInit() {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      });\n\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n      });\n\n    this.iiifContentSearchService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((sr: SearchResult) => {\n        this.hits = sr.hits;\n        this.currentSearch = sr.q ? sr.q : '';\n        this.q = sr.q;\n        this.numberOfHits = sr.size();\n        if (this.resultContainer !== null && this.numberOfHits > 0) {\n          this.resultContainer.nativeElement.focus();\n        } else if (this.q.length === 0 || this.numberOfHits === 0) {\n          this.qEl.nativeElement.focus();\n        }\n      });\n\n    this.iiifContentSearchService.isSearching\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((s: boolean) => {\n        this.isSearching = s;\n      });\n\n    this.iiifContentSearchService.onSelected\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((hit: Hit) => {\n        if (hit === null) {\n          this.currentHit = hit;\n        } else {\n          if (!this.currentHit || this.currentHit.id !== hit.id) {\n            this.currentHit = hit;\n            this.scrollCurrentHitIntoView();\n          }\n        }\n      });\n\n    this.resizeTabHeight();\n  }\n\n  ngAfterViewInit() {\n    this.scrollCurrentHitIntoView();\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.resizeTabHeight();\n  }\n\n  onSubmit(event: KeyboardEvent) {\n    event.preventDefault();\n    this.search();\n  }\n\n  clear() {\n    this.q = '';\n    this.search();\n  }\n\n  goToHit(hit: Hit): void {\n    this.currentHit = hit;\n    this.iiifContentSearchService.selected(hit);\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.dialogRef.close();\n    }\n  }\n\n  private search() {\n    this.currentSearch = this.q;\n    this.iiifContentSearchService.search(this.manifest, this.q);\n  }\n\n  private resizeTabHeight(): void {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px'\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px'\n      };\n    }\n  }\n\n  private scrollCurrentHitIntoView() {\n    this.iiifContentSearchService.onSelected\n      .pipe(\n        take(1),\n        filter(s => s !== null)\n      )\n      .subscribe((hit: Hit) => {\n        const selected = this.findSelected(hit);\n        if (selected) {\n          selected.nativeElement.focus();\n        }\n      });\n  }\n\n  private findSelected(selectedHit: Hit): ElementRef {\n    if (this.hitList) {\n      const selectedList = this.hitList.filter(\n        (item: ElementRef, index: number) => index === selectedHit.id\n      );\n      return selectedList.length > 0 ? selectedList[0] : null;\n    } else {\n      return null;\n    }\n  }\n}\n","<div class=\"content-search-container\">\n  <div [ngSwitch]=\"mediaObserver.isActive('lt-md')\">\n    <div *ngSwitchCase=\"true\">\n      <mat-toolbar color=\"primary\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n          <button\n            id=\"close-content-search-dialog-button\"\n            mat-icon-button\n            [aria-label]=\"intl.closeLabel\"\n            [matTooltip]=\"intl.closeLabel\"\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n          <div class=\"heading\">{{ intl.searchLabel }}</div>\n        </div>\n      </mat-toolbar>\n    </div>\n    <div *ngSwitchDefault>\n      <mat-toolbar>\n        <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" fxFlex>\n          <div class=\"heading heading-desktop\">{{ intl.searchLabel }}</div>\n          <button\n            id=\"close-content-search-dialog-button\"\n            mat-icon-button\n            [aria-label]=\"intl.closeLabel\"\n            [matTooltip]=\"intl.closeLabel\"\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n        </div>\n      </mat-toolbar>\n    </div>\n  </div>\n  <div class=\"content-search-form\">\n    <form (ngSubmit)=\"onSubmit($event)\" #searchForm=\"ngForm\">\n      <mat-form-field class=\"content-search-box\">\n        <button\n          id=\"content-search-form-submit\"\n          type=\"submit\"\n          matPrefix\n          mat-icon-button\n          [attr.aria-label]=\"intl.searchLabel\"\n          [matTooltip]=\"intl.searchLabel\"\n        >\n          <mat-icon class=\"icon\">search</mat-icon>\n        </button>\n        <input\n          #query\n          cdkFocusInitial\n          matInput\n          class=\"content-search-input\"\n          [(ngModel)]=\"q\"\n          name=\"q\"\n          autocomplete=\"off\"\n          aria-labelledby=\"content-search-form-submit\"\n        />\n        <button\n          *ngIf=\"q\"\n          id=\"clearSearchButton\"\n          type=\"button\"\n          matSuffix\n          mat-icon-button\n          [attr.aria-label]=\"intl.clearSearchLabel\"\n          [matTooltip]=\"intl.clearSearchLabel\"\n          (click)=\"clear()\"\n        >\n          <mat-icon class=\"icon\">clear</mat-icon>\n        </button>\n      </mat-form-field>\n    </form>\n  </div>\n  <div\n    #contentSearchResult\n    class=\"content-search-result-container\"\n    [ngStyle]=\"tabHeight\"\n  >\n    <div *ngIf=\"!isSearching\" class=\"content-search-result\" fxLayout=\"column\">\n      <input type=\"hidden\" id=\"numberOfHits\" [value]=\"numberOfHits\" />\n      <div *ngIf=\"currentSearch && currentSearch.length > 0\">\n        <div\n          *ngIf=\"numberOfHits > 0\"\n          [innerHTML]=\"intl.resultsFoundLabel(numberOfHits, currentSearch)\"\n        ></div>\n        <div\n          *ngIf=\"numberOfHits === 0\"\n          [innerHTML]=\"intl.noResultsFoundLabel(currentSearch)\"\n        ></div>\n      </div>\n      <ng-container *ngFor=\"let hit of hits; let last = last\">\n        <button\n          #hitButton\n          mat-button\n          [color]=\"currentHit && hit.id === currentHit.id ? 'primary' : null\"\n          [ngClass]=\"'hit'\"\n          (click)=\"goToHit(hit)\"\n          (keyup.enter)=\"goToHit(hit)\"\n        >\n          <div fxLayout=\"row\" fxLayoutAlign=\"space-between start\">\n            <div fxFlex class=\"summary\">\n              {{ hit.before }} <em>{{ hit.match }}</em> {{ hit.after }}\n            </div>\n            <div fxFlex=\"40px\" class=\"canvasGroup\">{{ hit.index + 1 }}</div>\n          </div>\n        </button>\n        <mat-divider *ngIf=\"!last\"></mat-divider>\n      </ng-container>\n    </div>\n    <div *ngIf=\"isSearching\" class=\"content-search-result\" fxLayout=\"column\">\n      <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n    </div>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { ContentSearchDialogService } from './content-search-dialog.service';\nimport { ContentSearchDialogConfigStrategyFactory } from './content-search-dialog-config-strategy-factory';\nimport { ContentSearchDialogComponent } from './content-search-dialog.component';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [ContentSearchDialogComponent],\n  providers: [\n    ContentSearchDialogService,\n    ContentSearchDialogConfigStrategyFactory\n  ],\n  entryComponents: [ContentSearchDialogComponent]\n})\nexport class ContentSearchDialogModule {}\n","import { ElementRef, Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef\n} from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { ContentSearchDialogComponent } from './content-search-dialog.component';\nimport { ContentSearchDialogConfigStrategyFactory } from './content-search-dialog-config-strategy-factory';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\n\n@Injectable()\nexport class ContentSearchDialogService {\n  private _el: ElementRef;\n  private isContentSearchDialogOpen = false;\n  private dialogRef: MatDialogRef<ContentSearchDialogComponent>;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    private dialog: MatDialog,\n    private contentSearchDialogConfigStrategyFactory: ContentSearchDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(rect => {\n        if (this.isContentSearchDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n          this.dialogRef.updateSize(config.width, config.height);\n        }\n      });\n  }\n\n  public destroy() {\n    this.close();\n    this.destroyed.next();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open() {\n    if (!this.isContentSearchDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ContentSearchDialogComponent, config);\n      this.dialogRef.afterClosed().subscribe(result => {\n        this.isContentSearchDialogOpen = false;\n      });\n      this.isContentSearchDialogOpen = true;\n    }\n  }\n\n  public close() {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n    }\n    this.isContentSearchDialogOpen = false;\n  }\n\n  public toggle() {\n    this.isContentSearchDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isContentSearchDialogOpen;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return this.contentSearchDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  ContentsDialogConfigStrategy,\n  DesktopContentsDialogConfigStrategy,\n  MobileContentsDialogConfigStrategy\n} from './contents-dialog-config-strategy';\n\n@Injectable()\nexport class ContentsDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ContentsDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n      ? new MobileContentsDialogConfigStrategy()\n      : new DesktopContentsDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { MimeDomHelper } from './../core/mime-dom-helper';\nimport { ElementRef, Injectable } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface ContentsDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef): MatDialogConfig;\n}\n\nexport class MobileContentsDialogConfigStrategy\n  implements ContentsDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'contents-panel'\n    };\n  }\n}\n\nexport class DesktopContentsDialogConfigStrategy\n  implements ContentsDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      width: `${DesktopContentsDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'contents-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopContentsDialogConfigStrategy.dialogWidth -\n        DesktopContentsDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\nimport { Manifest } from './../core/models/manifest';\n\n@Component({\n  selector: 'mime-contents',\n  templateUrl: './contents-dialog.component.html',\n  styleUrls: ['./contents-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ContentsDialogComponent implements OnInit, OnDestroy {\n  public manifest: Manifest;\n  public tabHeight = {};\n  public showToc = false;\n  public selectedIndex = 0;\n  private mimeHeight = 0;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    public mediaObserver: MediaObserver,\n    private dialogRef: MatDialogRef<ContentsDialogComponent>,\n    private el: ElementRef,\n    private mimeDomHelper: MimeDomHelper,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    mimeResizeService: MimeResizeService\n  ) {\n    mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      });\n  }\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n        this.showToc = this.manifest && this.manifest.structures.length > 0;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.resizeTabHeight();\n  }\n\n  onCanvasChanged() {\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.dialogRef.close();\n    }\n  }\n\n  private resizeTabHeight(): void {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      height -= 104;\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px'\n      };\n    } else {\n      height -= 278;\n      this.tabHeight = {\n        maxHeight: height + 'px'\n      };\n    }\n  }\n}\n","<div class=\"contents-container\">\n  <ng-container [ngSwitch]=\"mediaObserver.isActive('lt-md')\">\n    <ng-container *ngSwitchCase=\"true\">\n      <mat-toolbar color=\"primary\" data-test-id=\"mobile-toolbar\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n          <button\n            mat-icon-button\n            [aria-label]=\"intl.closeLabel\"\n            [matTooltip]=\"intl.closeLabel\"\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n          <h1 mat-dialog-title>{{ intl.contentsLabel }}</h1>\n        </div>\n      </mat-toolbar>\n    </ng-container>\n    <ng-container *ngSwitchDefault>\n      <mat-toolbar data-test-id=\"desktop-toolbar\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" fxFlex>\n          <h1 mat-dialog-title>{{ intl.contentsLabel }}</h1>\n          <button\n            mat-icon-button\n            [aria-label]=\"intl.closeLabel\"\n            [matTooltip]=\"intl.closeLabel\"\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n        </div>\n      </mat-toolbar>\n    </ng-container>\n  </ng-container>\n  <div mat-dialog-content>\n    <mat-tab-group [(selectedIndex)]=\"selectedIndex\">\n      <mat-tab [label]=\"intl.metadataLabel\">\n        <div class=\"tab-container\" [ngStyle]=\"tabHeight\">\n          <mime-metadata></mime-metadata>\n        </div>\n      </mat-tab>\n      <mat-tab *ngIf=\"showToc\" [label]=\"intl.tocLabel\">\n        <div class=\"tab-container\" [ngStyle]=\"tabHeight\">\n          <mime-toc (canvasChanged)=\"onCanvasChanged()\"></mime-toc>\n        </div>\n      </mat-tab>\n    </mat-tab-group>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport {\n  ErrorStateMatcher,\n  ShowOnDirtyErrorStateMatcher\n} from '@angular/material/core';\n\nimport { SharedModule } from './../shared/shared.module';\nimport { ContentsDialogService } from './contents-dialog.service';\nimport { ContentsDialogConfigStrategyFactory } from './contents-dialog-config-strategy-factory';\nimport { ContentsDialogComponent } from './contents-dialog.component';\nimport { MetadataComponent } from './metadata/metadata.component';\nimport { TocComponent } from './table-of-contents/table-of-contents.component';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [ContentsDialogComponent, MetadataComponent, TocComponent],\n  providers: [\n    ContentsDialogService,\n    ContentsDialogConfigStrategyFactory,\n    { provide: ErrorStateMatcher, useClass: ShowOnDirtyErrorStateMatcher }\n  ],\n  entryComponents: [ContentsDialogComponent]\n})\nexport class ContentsDialogModule {}\n","import { ElementRef, Injectable } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef\n} from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { ContentsDialogComponent } from './contents-dialog.component';\nimport { ContentsDialogConfigStrategyFactory } from './contents-dialog-config-strategy-factory';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\n\n@Injectable()\nexport class ContentsDialogService {\n  private _el: ElementRef;\n  private isContentsDialogOpen = false;\n  private dialogRef: MatDialogRef<ContentsDialogComponent>;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    private dialog: MatDialog,\n    private contentsDialogConfigStrategyFactory: ContentsDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(rect => {\n        if (this.isContentsDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n          this.dialogRef.updateSize(config.width, config.height);\n        }\n      });\n  }\n\n  public destroy() {\n    this.close();\n    this.destroyed.next();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(selectedIndex?: number) {\n    if (!this.isContentsDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ContentsDialogComponent, config);\n\n      if (selectedIndex) {\n        this.dialogRef.componentInstance.selectedIndex = selectedIndex;\n      }\n\n      this.dialogRef.afterClosed().subscribe(result => {\n        this.isContentsDialogOpen = false;\n      });\n      this.isContentsDialogOpen = true;\n    }\n  }\n\n  public close() {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n      this.isContentsDialogOpen = false;\n    }\n    this.isContentsDialogOpen = false;\n  }\n\n  public toggle() {\n    this.isContentsDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isContentsDialogOpen;\n  }\n\n  public getSelectedIndex(): number {\n    return this.dialogRef && this.dialogRef.componentInstance\n      ? this.dialogRef.componentInstance.selectedIndex\n      : 0;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return this.contentsDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el);\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  OnDestroy\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { Manifest } from './../../core/models/manifest';\n\n@Component({\n  selector: 'mime-metadata',\n  templateUrl: './metadata.component.html',\n  styleUrls: ['./metadata.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MetadataComponent implements OnInit, OnDestroy {\n  public manifest: Manifest;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n}\n","<div id=\"metadata-container\" class=\"metadata-container\">\n  <div *ngFor=\"let metadata of manifest?.metadata\" class=\"metadata\">\n    <div class=\"title\">{{ metadata.label }}</div>\n    <span class=\"content\" [innerHTML]=\"metadata.value\"></span>\n  </div>\n  <div *ngIf=\"manifest?.attribution\">\n    <div class=\"title\">{{ intl.attributionLabel }}</div>\n    <span\n      id=\"metadata-attribution\"\n      class=\"content attribution\"\n      [innerHTML]=\"manifest?.attribution\"\n    ></span>\n  </div>\n  <div *ngIf=\"manifest?.license\">\n    <div class=\"title\">{{ intl.licenseLabel }}</div>\n    <span id=\"metadata-license\" class=\"content license\"\n      ><a [href]=\"manifest?.license\" target=\"_blank\">{{\n        manifest?.license\n      }}</a></span\n    >\n  </div>\n  <div *ngIf=\"manifest?.logo\">\n    <span id=\"metadata-logo\"\n      ><img class=\"content logo\" [src]=\"manifest?.logo\"\n    /></span>\n  </div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { CanvasService } from '../../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../core/intl/viewer-intl';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewerService } from '../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-toc',\n  templateUrl: './table-of-contents.component.html',\n  styleUrls: ['./table-of-contents.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TocComponent implements OnInit, OnDestroy {\n  @Output()\n  canvasChanged: EventEmitter<number> = new EventEmitter();\n  public manifest: Manifest;\n  public currentCanvasGroupIndex: number;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService\n  ) {}\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n        this.currentCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.viewerService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((canvasGroupIndex: number) => {\n        this.currentCanvasGroupIndex = canvasGroupIndex;\n        this.changeDetectorRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  goToCanvas(event: Event, canvasIndex: number): void {\n    event.preventDefault();\n    this.viewerService.goToCanvas(canvasIndex, false);\n    this.canvasChanged.emit(canvasIndex);\n  }\n}\n","<div id=\"toc-container\" class=\"toc-container\">\n  <div *ngFor=\"let structure of manifest?.structures\">\n    <a\n      href=\"\"\n      class=\"toc-link\"\n      [class.currentCanvasGroup]=\"\n        currentCanvasGroupIndex === structure.canvasIndex\n      \"\n      (click)=\"goToCanvas($event, structure.canvasIndex)\"\n      fxLayout=\"row\"\n      fxLayoutAlign=\"space-between center\"\n    >\n      <span class=\"label\">{{ structure.label }}</span>\n      <span class=\"canvasGroupIndex\">{{ structure.canvasIndex + 1 }}</span>\n    </a>\n  </div>\n</div>\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { ViewerService } from '../viewer-service/viewer.service';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ContentSearchDialogService } from '../../content-search-dialog/content-search-dialog.service';\nimport { ContentsDialogService } from '../../contents-dialog/contents-dialog.service';\nimport { ModeService } from '../mode-service/mode.service';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { IiifManifestService } from '../iiif-manifest-service/iiif-manifest-service';\nimport { Manifest } from '../models/manifest';\nimport { MimeDomHelper } from '../mime-dom-helper';\nimport { AccessKeys } from '../models/AccessKeys';\nimport { ContentSearchNavigationService } from '../navigation/content-search-navigation-service/content-search-navigation.service';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from '../models/search-result';\nimport { ViewingDirection } from '../models/viewing-direction';\n\n@Injectable()\nexport class AccessKeysService implements OnDestroy {\n  private isSearchable = false;\n  private hasHits = false;\n  private disabledKeys: number[] = [];\n  private destroyed: Subject<void> = new Subject();\n  private invert = false;\n\n  constructor(\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private contentsDialogService: ContentsDialogService,\n    private mimeDomHelper: MimeDomHelper,\n    private contentSearchNavigationService: ContentSearchNavigationService\n  ) {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.isSearchable = this.isManifestSearchable(manifest);\n        this.invert = manifest.viewingDirection === ViewingDirection.RTL;\n      });\n\n    this.iiifContentSearchService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((result: SearchResult) => {\n        this.hasHits = result.hits.length > 0;\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  public handleKeyEvents(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (!this.isKeyDisabled(event.keyCode)) {\n      if (accessKeys.isArrowLeftKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? this.goToNextCanvasGroup()\n            : this.goToPreviousCanvasGroup();\n        }\n      } else if (accessKeys.isArrowRightKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? this.goToPreviousCanvasGroup()\n            : this.goToNextCanvasGroup();\n        }\n      } else if (accessKeys.isFirstCanvasGroupKeys()) {\n        this.goToFirstCanvasGroup();\n      } else if (accessKeys.isLastCanvasGroupKeys()) {\n        this.goToLastCanvasGroup();\n      } else if (accessKeys.isNextHitKeys() && this.hasHits) {\n        this.goToNextHit();\n      } else if (accessKeys.isPreviousHitKeys() && this.hasHits) {\n        this.goToPreviousHit();\n      } else if (accessKeys.isFullscreenKeys()) {\n        this.toggleFullscreen();\n      } else if (accessKeys.isSearchDialogKeys() && this.isSearchable) {\n        this.toggleSearchDialog();\n      } else if (accessKeys.isContentsDialogKeys()) {\n        this.toggleContentsDialog();\n      } else if (accessKeys.isResetSearchKeys()) {\n        this.resetSearch();\n      } else if (accessKeys.isPageDownKeys()) {\n        this.goToNextCanvasGroup();\n      } else if (accessKeys.isPageUpKeys()) {\n        this.goToPreviousCanvasGroup();\n      } else if (accessKeys.isZoomInKeys()) {\n        this.zoomIn();\n      } else if (accessKeys.isZoomOutKeys()) {\n        this.zoomOut();\n      } else if (accessKeys.isZoomHomeKeys()) {\n        this.zoomHome();\n      } else if (accessKeys.isRotateKeys()) {\n        this.rotateClockWise();\n      }\n    }\n  }\n\n  private goToNextCanvasGroup() {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private goToPreviousCanvasGroup() {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  private goToFirstCanvasGroup() {\n    this.viewerService.goToCanvasGroup(0, false);\n  }\n\n  private goToLastCanvasGroup() {\n    this.viewerService.goToCanvasGroup(\n      this.canvasService.numberOfCanvasGroups - 1,\n      false\n    );\n  }\n\n  private rotateClockWise() {\n    this.viewerService.rotate();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private goToNextHit() {\n    this.contentSearchNavigationService.goToNextCanvasGroupHit();\n  }\n\n  private goToPreviousHit() {\n    this.contentSearchNavigationService.goToPreviousCanvasGroupHit();\n  }\n\n  private zoomIn() {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.toggleMode();\n    } else {\n      this.viewerService.zoomIn();\n    }\n  }\n\n  private zoomOut() {\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.toggleMode();\n    } else if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      this.viewerService.zoomOut();\n    }\n  }\n\n  private zoomHome() {\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      this.viewerService.home();\n    }\n  }\n\n  private toggleSearchDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.mode === ViewerMode.PAGE_ZOOMED\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.contentSearchDialogService.open();\n    } else {\n      if (this.contentSearchDialogService.isOpen()) {\n        this.contentSearchDialogService.close();\n      } else {\n        this.contentSearchDialogService.open();\n      }\n    }\n\n    this.contentsDialogService.close();\n  }\n\n  private toggleContentsDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.mode === ViewerMode.PAGE_ZOOMED\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.contentsDialogService.open();\n    } else {\n      if (this.contentsDialogService.isOpen()) {\n        this.contentsDialogService.close();\n      } else {\n        this.contentsDialogService.open();\n      }\n    }\n    this.contentSearchDialogService.close();\n  }\n\n  private toggleFullscreen() {\n    this.mimeDomHelper.toggleFullscreen();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private resetSearch() {\n    this.iiifContentSearchService.destroy();\n  }\n\n  private isManifestSearchable(manifest: Manifest): boolean {\n    return manifest.service ? true : false;\n  }\n\n  private isZoomedIn(): boolean {\n    return this.modeService.mode === ViewerMode.PAGE_ZOOMED;\n  }\n\n  private updateDisabledKeys() {\n    this.resetDisabledKeys();\n    if (this.contentsDialogService.isOpen()) {\n      this.disableKeysForContentDialog();\n    } else if (this.contentSearchDialogService.isOpen()) {\n      this.diableKeysForContentSearchDialog();\n    }\n  }\n\n  private disableKeysForContentDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT);\n  }\n\n  private diableKeysForContentSearchDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT)\n      .concat(AccessKeys.firstCanvasGroupCodes)\n      .concat(AccessKeys.lastCanvasGroupCodes)\n      .concat(AccessKeys.zoomInCodes)\n      .concat(AccessKeys.zoomOutCodes)\n      .concat(AccessKeys.zoomHomeCodes)\n      .concat(AccessKeys.nextHit)\n      .concat(AccessKeys.previousHit)\n      .concat(AccessKeys.toggleSearchDialogCodes)\n      .concat(AccessKeys.toggleContentsDialogCodes)\n      .concat(AccessKeys.toggleFullscreenCodes);\n  }\n\n  private resetDisabledKeys() {\n    this.disabledKeys = [];\n  }\n\n  private isKeyDisabled(keyCode: number): boolean {\n    this.updateDisabledKeys();\n    return this.disabledKeys.indexOf(keyCode) > -1;\n  }\n}\n","import { Canvas, Sequence } from '../models/manifest';\nimport { ViewingDirection } from '../models/viewing-direction';\n\nexport class BuilderUtils {\n  static extractId(value: any): any {\n    return value['@id'];\n  }\n\n  static extracType(value: any): any {\n    return value['@type'];\n  }\n\n  static extractContext(value: any): any {\n    return value['@context'];\n  }\n\n  static extractViewingDirection(value: any): ViewingDirection {\n    if (value['viewingDirection'] === 'left-to-right') {\n      return ViewingDirection.LTR;\n    } else if (value['viewingDirection'] === 'right-to-left') {\n      return ViewingDirection.RTL;\n    }\n  }\n\n  static findCanvasIndex(canvases: string[], sequences: Sequence[]): number {\n    let index = -1;\n    if (sequences[0] && sequences[0].canvases && canvases[0]) {\n      index = sequences[0].canvases.findIndex(\n        (canvas: Canvas) => canvas.id === canvases[0]\n      );\n    }\n    return index;\n  }\n}\n","import { Canvas } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ImagesBuilder } from './images.builder';\n\nexport class CanvasBuilder {\n  constructor(private canvases: any[]) {}\n\n  build(): Canvas[] {\n    const canvases: Canvas[] = [];\n    if (this.canvases) {\n      for (let i = 0; i < this.canvases.length; i++) {\n        const canvas = this.canvases[i];\n        canvases.push(\n          new Canvas({\n            id: BuilderUtils.extractId(canvas),\n            type: BuilderUtils.extracType(canvas),\n            label: canvas.label,\n            thumbnail: canvas.thumbnail,\n            height: canvas.height,\n            width: canvas.width,\n            images: new ImagesBuilder(canvas.images).build()\n          })\n        );\n      }\n    }\n    return canvases;\n  }\n}\n","import { Images } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ResourceBuilder } from './resource.builder';\n\nexport class ImagesBuilder {\n  constructor(private images: any[]) {}\n\n  build(): Images[] {\n    const images: Images[] = [];\n    if (this.images) {\n      for (let i = 0; i < this.images.length; i++) {\n        const image = this.images[i];\n        images.push(\n          new Images({\n            id: BuilderUtils.extractId(image),\n            type: BuilderUtils.extracType(image),\n            motivation: image.motivation,\n            resource: new ResourceBuilder(image.resource).build(),\n            on: image.on\n          })\n        );\n      }\n    }\n    return images;\n  }\n}\n","import { Manifest, Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SequenceBuilder } from './sequence.builder';\nimport { ServiceBuilder } from './service.builder';\nimport { MetadataBuilder } from './metadata.builder';\nimport { StructureBuilder } from './structure.builder';\nimport { TileSourceBuilder } from './tile-source.builder';\n\nexport class ManifestBuilder {\n  constructor(private data: any) {}\n\n  build(): Manifest {\n    const sequences: Sequence[] = new SequenceBuilder(\n      this.data.sequences\n    ).build();\n\n    return new Manifest({\n      context: BuilderUtils.extractContext(this.data),\n      type: BuilderUtils.extracType(this.data),\n      id: BuilderUtils.extractId(this.data),\n      viewingDirection: BuilderUtils.extractViewingDirection(this.data),\n      label: this.data.label,\n      metadata: new MetadataBuilder(this.data.metadata).build(),\n      license: this.data.license,\n      logo: this.data.logo,\n      attribution: this.data.attribution,\n      service: new ServiceBuilder(this.data.service).build(),\n      sequences: sequences,\n      structures: new StructureBuilder(this.data.structures, sequences).build(),\n      tileSource: new TileSourceBuilder(this.data.sequences).build(),\n      viewingHint: this.data.viewingHint\n    });\n  }\n}\n","import { Metadata } from '../models/manifest';\n\nexport class MetadataBuilder {\n  constructor(private metadatas: any) {}\n\n  build(): Metadata[] {\n    const metadatas: Metadata[] = [];\n    if (this.metadatas) {\n      for (let i = 0; i < this.metadatas.length; i++) {\n        const data = this.metadatas[i];\n        metadatas.push(new Metadata(data.label, data.value));\n      }\n    }\n    return metadatas;\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ServiceBuilder } from './service.builder';\n\nexport class ResourceBuilder {\n  constructor(private resource: any) {}\n\n  build(): Resource {\n    if (this.resource) {\n      return new Resource({\n        id: BuilderUtils.extractId(this.resource),\n        type: BuilderUtils.extracType(this.resource),\n        format: this.resource.format,\n        service: new ServiceBuilder(this.resource.service).build(),\n        height: this.resource.height,\n        width: this.resource.width\n      });\n    }\n    return null;\n  }\n}\n","import { Rect } from './../models/rect';\nimport { Manifest } from './../models/manifest';\nimport {\n  IiifSearchResult,\n  Hit as IiifHit,\n  Resource as IiifResource\n} from './../models/iiif-search-result';\nimport { SearchResult } from './../models/search-result';\nimport { Hit } from './../models/hit';\n\nexport class SearchResultBuilder {\n  constructor(\n    private q: string,\n    private manifest: Manifest,\n    private iiifSearchResult: IiifSearchResult\n  ) {}\n\n  public build(): SearchResult {\n    const searchResult = new SearchResult();\n    searchResult.q = this.q;\n    const hits: Hit[] = [];\n    if (this.iiifSearchResult && this.iiifSearchResult.hits) {\n      this.iiifSearchResult.hits.forEach((hit: IiifHit, index: number) => {\n        const id: number = index;\n        let canvasIndex = -1;\n        let label = null;\n        const rects: Rect[] = [];\n        if (this.manifest.sequences && this.manifest.sequences[0].canvases) {\n          const resources = this.findResources(hit);\n          for (const resource of resources) {\n            canvasIndex = this.findSequenceIndex(resource);\n            label = this.findLabel(canvasIndex);\n            const on = resource.on;\n            const coords = on.substring(on.indexOf('=') + 1).split(',');\n            const rect = new Rect({\n              x: parseInt(coords[0], 10),\n              y: parseInt(coords[1], 10),\n              width: parseInt(coords[2], 10),\n              height: parseInt(coords[3], 10)\n            });\n            rects.push(rect);\n          }\n        }\n\n        searchResult.add(\n          new Hit({\n            id: id,\n            index: canvasIndex,\n            label: label,\n            match: hit.match,\n            before: hit.before,\n            after: hit.after,\n            rects: rects\n          })\n        );\n      });\n      return searchResult;\n    }\n  }\n\n  private findResources(hit: IiifHit): IiifResource[] {\n    const resources: IiifResource[] = [];\n    for (const annotation of hit.annotations) {\n      const res = this.iiifSearchResult.resources.find(\n        (r: IiifResource) => r['@id'] === annotation\n      );\n      resources.push(res);\n    }\n    return resources;\n  }\n\n  private findSequenceIndex(resource: IiifResource): number {\n    const firstSequence = this.manifest.sequences[0];\n    const on = resource.on;\n    const id = on.substring(0, on.indexOf('#'));\n    return firstSequence.canvases.findIndex(c => c.id === id);\n  }\n\n  private findLabel(index: number): string {\n    if (index === -1) {\n      return null;\n    } else {\n      return this.manifest.sequences[0].canvases[index].label;\n    }\n  }\n}\n","import { Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { CanvasBuilder } from './canvas.builder';\n\nexport class SequenceBuilder {\n  constructor(private sequences: any[]) {}\n\n  build(): Sequence[] {\n    const sequences: Sequence[] = [];\n    if (this.sequences) {\n      for (let i = 0; i < this.sequences.length; i++) {\n        const seq = this.sequences[i];\n        sequences.push(\n          new Sequence({\n            id: BuilderUtils.extractId(seq),\n            type: BuilderUtils.extracType(seq),\n            label: seq.label,\n            viewingHint: seq.viewingHint,\n            canvases: new CanvasBuilder(seq.canvases).build()\n          })\n        );\n      }\n    }\n    return sequences;\n  }\n}\n","import { Service } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SizesBuilder } from './sizes.builder';\nimport { TilesBuilder } from './tiles.builder';\n\nexport class ServiceBuilder {\n  constructor(private service: any) {}\n\n  build(): Service {\n    if (this.service) {\n      return new Service({\n        id: BuilderUtils.extractId(this.service),\n        context: BuilderUtils.extractContext(this.service),\n        protocol: this.service.protocol,\n        width: this.service.width,\n        height: this.service.height,\n        sizes: new SizesBuilder(this.service.sizes).build(),\n        tiles: new TilesBuilder(this.service.tiles).build(),\n        profile: this.service.profile,\n        physicalScale: this.service.physicalScale,\n        physicalUnits: this.service.physicalUnits,\n        service: new ServiceBuilder(this.service.service).build()\n      });\n    }\n    return null;\n  }\n}\n","import { Size } from '../models/manifest';\n\nexport class SizesBuilder {\n  constructor(private sizes: any[]) {}\n\n  build(): Size[] {\n    const sizes: Size[] = [];\n    if (this.sizes) {\n      for (let i = 0; i < this.sizes.length; i++) {\n        const size = this.sizes[i];\n        sizes.push(new Size(size.width, size.height));\n      }\n    }\n    return sizes;\n  }\n}\n","import { Structure, Sequence } from '../models/manifest';\nimport { BuilderUtils } from './builder-utils';\n\nexport class StructureBuilder {\n  constructor(private structures: any[], private sequences: Sequence[]) {}\n\n  build(): Structure[] {\n    const structures: Structure[] = [];\n    if (this.structures) {\n      for (let i = 0; i < this.structures.length; i++) {\n        const structure = this.structures[i];\n        structures.push(\n          new Structure({\n            id: BuilderUtils.extractId(structure),\n            type: BuilderUtils.extracType(structure),\n            label: structure.label,\n            canvases: structure.canvases,\n            canvasIndex: BuilderUtils.findCanvasIndex(\n              structure.canvases,\n              this.sequences\n            )\n          })\n        );\n      }\n    }\n    return structures;\n  }\n}\n","import { Sequence, Service } from '../models/manifest';\n\nexport class TileSourceBuilder {\n  constructor(private sequences: Sequence[]) {}\n\n  build(): Service[] {\n    const tilesources: Service[] = [];\n    if (this.sequences && this.sequences.length > 0) {\n      const canvases = this.sequences[0].canvases;\n      for (let i = 0; i < canvases.length; i++) {\n        const canvas = canvases[i];\n        if (canvas) {\n          tilesources.push(canvas.images[0].resource);\n        }\n      }\n    }\n    return tilesources;\n  }\n}\n","import { Tile } from '../models/manifest';\n\nexport class TilesBuilder {\n  constructor(private tiles: any[]) {}\n\n  build(): Tile[] {\n    const tiles: Tile[] = [];\n    if (this.tiles) {\n      for (let i = 0; i < this.tiles.length; i++) {\n        const tile = this.tiles[i];\n        tiles.push(\n          new Tile({\n            width: tile.width,\n            scaleFactors: tile.scaleFactors\n          })\n        );\n      }\n    }\n    return tiles;\n  }\n}\n","import { CalculateCanvasGroupPositionStrategy } from './calculate-canvas-group-position-strategy';\nimport { OnePageCalculatePagePositionStrategy } from './one-page-calculate-page-position-strategy';\nimport { TwoPageCalculateCanvasGroupPositionStrategy } from './two-page-calculate-page-position-strategy';\nimport { ViewerLayout } from '../models/viewer-layout';\n\nexport class CalculateCanvasGroupPositionFactory {\n  public static create(\n    viewerLayout: ViewerLayout,\n    paged: boolean\n  ): CalculateCanvasGroupPositionStrategy {\n    if (viewerLayout === ViewerLayout.ONE_PAGE || !paged) {\n      return new OnePageCalculatePagePositionStrategy();\n    } else if (viewerLayout === ViewerLayout.TWO_PAGE) {\n      return new TwoPageCalculateCanvasGroupPositionStrategy();\n    }\n  }\n}\n","import { Rect } from '../models/rect';\nimport { CanvasGroupPositionCriteria } from './calculate-canvas-group-position-strategy';\n\nexport const canvasRectFromCriteria = (\n  rotation: number,\n  criteria: CanvasGroupPositionCriteria,\n  x: number\n) => {\n  let rect = {};\n\n  if (rotation === 90 || rotation === 270) {\n    rect = {\n      height: criteria.canvasSource.width,\n      width: criteria.canvasSource.height,\n      x: x,\n      y: (criteria.canvasSource.width / 2) * -1\n    };\n  } else {\n    rect = {\n      height: criteria.canvasSource.height,\n      width: criteria.canvasSource.width,\n      x: x,\n      y: (criteria.canvasSource.height / 2) * -1\n    };\n  }\n  return new Rect(rect);\n};\n","import { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class OnePageCalculatePagePositionStrategy\n  implements CalculateCanvasGroupPositionStrategy {\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation: number = 0\n  ): Rect {\n    let x: number;\n    if (!criteria.canvasGroupIndex) {\n      if (rotation === 90 || rotation === 270) {\n        x = (criteria.canvasSource.height / 2) * -1;\n      } else {\n        x = (criteria.canvasSource.width / 2) * -1;\n      }\n    } else {\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateLtrX(criteria)\n          : this.calculateRtlX(criteria);\n    }\n    return canvasRectFromCriteria(rotation, criteria, x);\n  }\n\n  private calculateLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.previousCanvasGroupPosition.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n}\n","import { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class TwoPageCalculateCanvasGroupPositionStrategy\n  implements CalculateCanvasGroupPositionStrategy {\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation: number = 0\n  ): Rect {\n    let x: number;\n\n    if (!criteria.canvasGroupIndex) {\n      // First page\n      x = 0;\n    } else if (criteria.canvasGroupIndex % 2) {\n      // Even page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateEvenLtrX(criteria)\n          : this.calculateEvenRtlX(criteria);\n    } else {\n      // Odd page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateOddLtrX(criteria)\n          : this.calculateOddRtlX(criteria);\n    }\n\n    return canvasRectFromCriteria(rotation, criteria, x);\n  }\n\n  private calculateEvenLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width\n    );\n  }\n\n  private calculateEvenRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.canvasSource.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddRtlX(criteria: CanvasGroupPositionCriteria) {\n    return criteria.previousCanvasGroupPosition.x - criteria.canvasSource.width;\n  }\n}\n","import { Rect } from './../models/rect';\nimport { CanvasGroups } from './../models/canvas-groups';\n\nexport interface AbstractCanvasGroupStrategy {\n  addAll(canvasRects: Rect[]): CanvasGroups;\n}\n\nexport class OneCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy {\n  addAll = (canvasRects: Rect[]) => {\n    const canvasGroups = new CanvasGroups();\n    canvasGroups.addRange(canvasRects);\n    canvasGroups.canvasRects = canvasRects;\n    for (let i = 0; i < canvasRects.length; i++) {\n      canvasGroups.canvasesPerCanvasGroup.push([i]);\n    }\n    return canvasGroups;\n  };\n}\n\nexport class TwoCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy {\n  addAll = (canvasRects: Rect[]) => {\n    const canvasGroups = new CanvasGroups();\n    // Single first page\n    canvasGroups.add(canvasRects[0]);\n    canvasGroups.canvasRects = canvasRects;\n    canvasGroups.canvasesPerCanvasGroup.push([0]);\n\n    for (let i = 1; i < canvasRects.length; i = i + 2) {\n      if (i + 1 < canvasRects.length) {\n        // Paired pages\n        const thisRect = canvasRects[i];\n        const nextRect = canvasRects[i + 1];\n        const groupedRect = new Rect({\n          x: Math.min(thisRect.x, nextRect.x),\n          y: Math.min(thisRect.y, nextRect.y),\n          height: Math.max(thisRect.height, nextRect.height),\n          width: thisRect.width + nextRect.width\n        });\n        canvasGroups.add(groupedRect);\n        canvasGroups.canvasesPerCanvasGroup.push([i, i + 1]);\n      } else {\n        // Single last page, if applicable\n        canvasGroups.add(canvasRects[i]);\n        canvasGroups.canvasesPerCanvasGroup.push([i]);\n      }\n    }\n    return canvasGroups;\n  };\n}\n","import { ViewerLayout } from '../models/viewer-layout';\nimport {\n  OneCanvasPerCanvasGroupStrategy,\n  TwoCanvasPerCanvasGroupStrategy\n} from './canvas-group.strategy';\n\nexport class CanvasGroupStrategyFactory {\n  public static create(layout: ViewerLayout) {\n    if (layout === ViewerLayout.ONE_PAGE) {\n      return new OneCanvasPerCanvasGroupStrategy();\n    } else if (layout === ViewerLayout.TWO_PAGE) {\n      return new TwoCanvasPerCanvasGroupStrategy();\n    }\n\n    return null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { CanvasGroups } from './../models/canvas-groups';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { CanvasGroupStrategyFactory } from './canvas-groups-strategy.factory';\n\n@Injectable()\nexport class CanvasService {\n  protected _currentNumberOfCanvasGroups: BehaviorSubject<\n    number\n  > = new BehaviorSubject(0);\n  protected _currentCanvasGroupIndex: BehaviorSubject<\n    number\n  > = new BehaviorSubject(0);\n\n  protected canvasGroups: CanvasGroups = new CanvasGroups();\n  protected _numberOfCanvases = 0;\n\n  constructor() {}\n\n  addAll(canvasRects: Rect[], layout: ViewerLayout) {\n    this.numberOfCanvases = canvasRects.length;\n    const canvasGroupStrategy = CanvasGroupStrategyFactory.create(layout);\n    this.canvasGroups = canvasGroupStrategy.addAll(canvasRects);\n    this._currentNumberOfCanvasGroups.next(this.canvasGroups.length());\n  }\n\n  reset() {\n    this.numberOfCanvases = 0;\n    this._currentCanvasGroupIndex.next(0);\n    this.canvasGroups = new CanvasGroups();\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this._currentCanvasGroupIndex\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  get onNumberOfCanvasGroupsChange(): Observable<number> {\n    return this._currentNumberOfCanvasGroups\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  set currentCanvasGroupIndex(currentCanvasGroupIndex: number) {\n    if (!this.isWithinBounds(currentCanvasGroupIndex)) {\n      return;\n    }\n    this._currentCanvasGroupIndex.next(currentCanvasGroupIndex);\n  }\n\n  get currentCanvasGroupIndex(): number {\n    return this._currentCanvasGroupIndex.value;\n  }\n\n  get numberOfCanvases(): number {\n    return this._numberOfCanvases;\n  }\n\n  set numberOfCanvases(numberOfCanvases: number) {\n    this._numberOfCanvases = numberOfCanvases;\n  }\n\n  get numberOfCanvasGroups(): number {\n    return this.canvasGroups.length();\n  }\n\n  get currentCanvasIndex(): number {\n    return this.canvasGroups.canvasesPerCanvasGroup[\n      this.currentCanvasGroupIndex\n    ][0];\n  }\n\n  isWithinBounds(canvasGroupIndex: number): boolean {\n    return (\n      canvasGroupIndex > -1 && canvasGroupIndex <= this.numberOfCanvasGroups - 1\n    );\n  }\n\n  isCurrentCanvasGroupValid(): boolean {\n    return this.isWithinBounds(this.currentCanvasGroupIndex);\n  }\n\n  // Returns -1 if next canvas index is out of bounds\n  getNextCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex + 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex++;\n    return this.currentCanvasGroupIndex;\n  }\n\n  // Returns -1 if previous canvas index is out of bounds\n  getPrevCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex - 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex--;\n    return this.currentCanvasGroupIndex;\n  }\n\n  constrainToRange(canvasGroupsIndex: number): number {\n    if (canvasGroupsIndex < 0) {\n      return 0;\n    } else if (canvasGroupsIndex >= this.numberOfCanvasGroups - 1) {\n      return this.numberOfCanvasGroups - 1;\n    } else {\n      return canvasGroupsIndex;\n    }\n  }\n\n  findClosestCanvasGroupIndex(point: Point): number {\n    return this.canvasGroups.findClosestIndex(point);\n  }\n\n  findCanvasGroupByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.findIndex(function(\n      canvasForCanvasGroup: number[]\n    ) {\n      return canvasForCanvasGroup.indexOf(canvasIndex) >= 0;\n    });\n  }\n\n  findCanvasByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.length === 0\n      ? -1\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex][0];\n  }\n\n  getCanvasGroupLabel(canvasGroupIndex: number): string {\n    if (\n      !this.canvasGroups.canvasGroupRects ||\n      this.canvasGroups.canvasesPerCanvasGroup.length === 0\n    ) {\n      return '1';\n    }\n\n    const canvasGroup = this.canvasGroups.canvasesPerCanvasGroup[\n      canvasGroupIndex\n    ];\n    let canvasGroupLabel = '' + (canvasGroup[0] + 1);\n\n    if (canvasGroup.length > 1) {\n      canvasGroupLabel =\n        canvasGroupLabel + '-' + (canvasGroup[canvasGroup.length - 1] + 1);\n    }\n\n    return canvasGroupLabel;\n  }\n\n  getCanvasesPerCanvasGroup(canvasIndex: number): number[] {\n    return !this.canvasGroups.canvasGroupRects\n      ? [0]\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex];\n  }\n\n  getCanvasRect(canvasIndex: number): Rect {\n    return this.canvasGroups.canvasRects[canvasIndex];\n  }\n\n  getCurrentCanvasGroupRect(): Rect {\n    return this.getCanvasGroupRect(this.currentCanvasGroupIndex);\n  }\n\n  getCanvasGroupRect(canvasGroupIndex: number): Rect {\n    return this.canvasGroups.get(canvasGroupIndex);\n  }\n\n  getMaxHeight(): number {\n    return this.canvasGroups.getMaxHeight();\n  }\n\n  getMaxWidth(): number {\n    return this.canvasGroups.getMaxWidth();\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ClickService {\n  private singleClickHandlers: Array<(event: any) => void>;\n  private doubleClickHandlers: Array<(event: any) => void>;\n  private clickCount = 0;\n  private dblClickTimeOut: any;\n\n  constructor() {\n    this.reset();\n  }\n\n  reset(): void {\n    this.singleClickHandlers = [];\n    this.doubleClickHandlers = [];\n  }\n\n  addSingleClickHandler(singleClickHandler: (event: any) => void) {\n    this.singleClickHandlers.push(singleClickHandler);\n  }\n\n  addDoubleClickHandler(doubleClickHandler: (event: any) => void) {\n    this.doubleClickHandlers.push(doubleClickHandler);\n  }\n\n  private triggerSingleClick(event: any) {\n    this.singleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  private triggerDoubleClick(event: any) {\n    this.doubleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  click = (event: any) => {\n    event.preventDefaultAction = true;\n    if (event.quick) {\n      this.clickCount++;\n      if (this.clickCount === 1) {\n        this.dblClickTimeOut = setTimeout(() => {\n          this.clickCount = 0;\n          this.triggerSingleClick(event);\n        }, event.tracker.dblClickTimeThreshold);\n      } else if (this.clickCount === 2) {\n        clearTimeout(this.dblClickTimeOut);\n        this.clickCount = 0;\n        this.triggerDoubleClick(event);\n      }\n    }\n  };\n}\n","import { SpinnerService } from './spinner-service/spinner.service';\nimport { NgModule } from '@angular/core';\n\nimport { MimeViewerIntl } from './intl/viewer-intl';\nimport { IiifManifestService } from './iiif-manifest-service/iiif-manifest-service';\nimport { IiifContentSearchService } from './iiif-content-search-service/iiif-content-search.service';\nimport { CanvasService } from './canvas-service/canvas-service';\nimport { MimeResizeService } from './mime-resize-service/mime-resize.service';\nimport { FullscreenService } from './fullscreen-service/fullscreen.service';\nimport { ViewerService } from './viewer-service/viewer.service';\nimport { ModeService } from './mode-service/mode.service';\nimport { ClickService } from './click-service/click.service';\nimport { ViewerLayoutService } from './viewer-layout-service/viewer-layout-service';\nimport { AccessKeysService } from './access-keys-handler-service/access-keys.service';\nimport { ContentSearchNavigationService } from './navigation/content-search-navigation-service/content-search-navigation.service';\nimport { StyleService } from './style-service/style.service';\n\n@NgModule({\n  providers: [\n    MimeViewerIntl,\n    IiifManifestService,\n    IiifContentSearchService,\n    MimeResizeService,\n    FullscreenService,\n    ViewerService,\n    ClickService,\n    CanvasService,\n    ModeService,\n    SpinnerService,\n    AccessKeysService,\n    ViewerLayoutService,\n    ContentSearchNavigationService,\n    StyleService\n  ]\n})\nexport class CoreModule {}\n","declare const OpenSeadragon: any;\n\n// OpenSeadragon SVG Overlay plugin 0.0.4\n\nexport function createSvgOverlay() {\n  if (!OpenSeadragon) {\n    console.error('[openseadragon-svg-overlay] requires OpenSeadragon');\n    return;\n  }\n\n  const svgNS = 'http://www.w3.org/2000/svg';\n\n  // ----------\n  class Overlay {\n    // ----------\n\n    _viewer: any;\n    _containerWidth: any;\n    _containerHeight: any;\n    _svg: any;\n    _node: any;\n\n    constructor(viewer: any) {\n      const self = this;\n\n      this._viewer = viewer;\n      this._containerWidth = 0;\n      this._containerHeight = 0;\n\n      this._svg = document.createElementNS(svgNS, 'svg');\n      this._svg.style.position = 'absolute';\n      this._svg.style.left = 0;\n      this._svg.style.top = 0;\n      this._svg.style.width = '100%';\n      this._svg.style.height = '100%';\n      this._viewer.canvas.appendChild(this._svg);\n\n      this._node = document.createElementNS(svgNS, 'g');\n      this._svg.appendChild(this._node);\n\n      this._viewer.addHandler('animation', function() {\n        self.resize();\n      });\n\n      this._viewer.addHandler('open', function() {\n        self.resize();\n      });\n\n      this._viewer.addHandler('rotate', function(evt: any) {\n        self.resize();\n      });\n\n      this._viewer.addHandler('resize', function() {\n        self.resize();\n      });\n\n      this.resize();\n    }\n    node() {\n      return this._node;\n    }\n\n    // ----------\n    resize() {\n      if (this._containerWidth !== this._viewer.container.clientWidth) {\n        this._containerWidth = this._viewer.container.clientWidth;\n        this._svg.setAttribute('width', this._containerWidth);\n      }\n\n      if (this._containerHeight !== this._viewer.container.clientHeight) {\n        this._containerHeight = this._viewer.container.clientHeight;\n        this._svg.setAttribute('height', this._containerHeight);\n      }\n\n      const p = this._viewer.viewport.pixelFromPoint(\n        new OpenSeadragon.Point(0, 0),\n        true\n      );\n      const zoom = this._viewer.viewport.getZoom(true);\n      const rotation = this._viewer.viewport.getRotation();\n      // TODO: Expose an accessor for _containerInnerSize in the OSD API so we don't have to use the private variable.\n      const scale = this._viewer.viewport._containerInnerSize.x * zoom;\n      this._node.setAttribute(\n        'transform',\n        'translate(' +\n          p.x +\n          ',' +\n          p.y +\n          ') scale(' +\n          scale +\n          ') rotate(' +\n          rotation +\n          ')'\n      );\n    }\n\n    // ----------\n    onClick(node: any, handler: any) {\n      // TODO: Fast click for mobile browsers\n\n      new OpenSeadragon.MouseTracker({\n        element: node,\n        clickHandler: handler\n      }).setTracking(true);\n    }\n  }\n\n  // ----------\n\n  // ----------\n  OpenSeadragon.Viewer.prototype.svgOverlay = function() {\n    if (this._svgOverlayInfo) {\n      return this._svgOverlayInfo;\n    }\n\n    this._svgOverlayInfo = new Overlay(this);\n    return this._svgOverlayInfo;\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\n@Injectable()\nexport class FullscreenService {\n  private changeSubject: ReplaySubject<boolean> = new ReplaySubject();\n\n  constructor() {\n    this.onchange();\n  }\n\n  get onChange(): Observable<boolean> {\n    return this.changeSubject.asObservable();\n  }\n\n  public isEnabled(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenEnabled ||\n      d.webkitFullscreenEnabled ||\n      d.mozFullScreenEnabled ||\n      d.msFullscreenEnabled\n    );\n  }\n\n  public isFullscreen(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenElement ||\n      d.webkitFullscreenElement ||\n      d.mozFullScreenElement ||\n      d.msFullscreenElement\n    );\n  }\n\n  public toggle(el: HTMLElement) {\n    this.isFullscreen() ? this.closeFullscreen(el) : this.openFullscreen(el);\n  }\n\n  public onchange() {\n    const d: any = document;\n\n    const func = () => {\n      this.changeSubject.next(true);\n    };\n\n    if (d.fullscreenEnabled) {\n      document.addEventListener('fullscreenchange', func);\n    } else if (d.webkitFullscreenEnabled) {\n      document.addEventListener('webkitfullscreenchange', func);\n    } else if (d.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', func);\n    } else if (d.msFullscreenEnabled) {\n      document.addEventListener('msfullscreenchange', func);\n    }\n  }\n\n  private openFullscreen(elem: any) {\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      elem.msRequestFullscreen();\n    }\n  }\n\n  private closeFullscreen(elem: any) {\n    const d = <any>document;\n    if (d.exitFullscreen) {\n      d.exitFullscreen();\n    } else if (d.mozCancelFullScreen) {\n      d.mozCancelFullScreen();\n    } else if (d.webkitExitFullscreen) {\n      d.webkitExitFullscreen();\n    } else if (d.msExitFullscreen) {\n      d.msExitFullscreen();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, Subject, BehaviorSubject, throwError } from 'rxjs';\nimport { distinctUntilChanged, finalize } from 'rxjs/operators';\n\nimport { IiifSearchResult } from './../models/iiif-search-result';\nimport { SearchResultBuilder } from './../builders/search-result.builder';\nimport { SearchResult } from './../models/search-result';\nimport { Hit } from './../models/hit';\nimport { Manifest } from './../models/manifest';\n\n@Injectable()\nexport class IiifContentSearchService {\n  protected _currentSearchResult: Subject<SearchResult> = new BehaviorSubject<\n    SearchResult\n  >(new SearchResult({}));\n  protected _searching: Subject<boolean> = new BehaviorSubject<boolean>(false);\n  protected _currentQ: Subject<string> = new Subject<string>();\n  protected _selected: Subject<Hit> = new BehaviorSubject<Hit>(null);\n\n  constructor(private http: HttpClient) {}\n\n  destroy() {\n    this._currentSearchResult.next(new SearchResult({}));\n    this._selected.next(null);\n  }\n\n  get onQChange(): Observable<string> {\n    return this._currentQ.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onChange(): Observable<SearchResult> {\n    return this._currentSearchResult.asObservable();\n  }\n\n  get isSearching(): Observable<boolean> {\n    return this._searching.asObservable();\n  }\n\n  get onSelected(): Observable<Hit> {\n    return this._selected.asObservable();\n  }\n\n  public search(manifest: Manifest, q: string): void {\n    this._currentQ.next(q);\n    this._selected.next(null);\n    if (q.length === 0) {\n      this._currentSearchResult.next(new SearchResult());\n      return;\n    }\n    if (!manifest.service || manifest.service === null) {\n      return;\n    }\n    this._searching.next(true);\n    this.http\n      .get(`${manifest.service.id}?q=${q}`)\n      .pipe(finalize(() => this._searching.next(false)))\n      .subscribe(\n        (res: IiifSearchResult) =>\n          this._currentSearchResult.next(this.extractData(q, manifest, res)),\n        (err: HttpErrorResponse) => this.handleError\n      );\n  }\n\n  public selected(hit: Hit) {\n    this._selected.next(hit);\n  }\n\n  private extractData(\n    q: string,\n    manifest: Manifest,\n    iiifSearchResult: IiifSearchResult\n  ): SearchResult {\n    return new SearchResultBuilder(q, manifest, iiifSearchResult).build();\n  }\n\n  private handleError(err: HttpErrorResponse | any) {\n    let errMsg: string;\n    if (err.error instanceof Error) {\n      errMsg = err.error.message;\n    } else {\n      errMsg = err.error;\n    }\n    return throwError(errMsg);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, Subject, BehaviorSubject } from 'rxjs';\nimport { filter, distinctUntilChanged, finalize } from 'rxjs/operators';\n\nimport { Manifest } from '../models/manifest';\nimport { ManifestBuilder } from '../builders/manifest.builder';\nimport { SpinnerService } from '../spinner-service/spinner.service';\nimport { MimeViewerIntl } from '../intl/viewer-intl';\n\n@Injectable()\nexport class IiifManifestService {\n  protected _currentManifest: Subject<Manifest> = new BehaviorSubject<Manifest>(\n    null\n  );\n  protected _errorMessage: Subject<string> = new BehaviorSubject(null);\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private http: HttpClient,\n    private spinnerService: SpinnerService\n  ) {}\n\n  get currentManifest(): Observable<Manifest> {\n    return this._currentManifest.asObservable().pipe(\n      filter(m => m !== null),\n      distinctUntilChanged()\n    );\n  }\n\n  get errorMessage(): Observable<string> {\n    return this._errorMessage.asObservable();\n  }\n\n  load(manifestUri: string): void {\n    if (manifestUri === null) {\n      this._errorMessage.next(this.intl.manifestUriMissingLabel);\n    } else {\n      this.spinnerService.show();\n      this.http\n        .get(manifestUri)\n        .pipe(finalize(() => this.spinnerService.hide()))\n        .subscribe(\n          (response: Response) => {\n            const manifest = this.extractData(response);\n            if (this.isManifestValid(manifest)) {\n              this._currentManifest.next(manifest);\n            } else {\n              this._errorMessage.next(this.intl.manifestNotValidLabel);\n            }\n          },\n          (err: HttpErrorResponse) => {\n            this._errorMessage.next(this.handleError(err));\n          }\n        );\n    }\n  }\n\n  destroy() {\n    this.resetCurrentManifest();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest() {\n    this._currentManifest.next(null);\n  }\n\n  private resetErrorMessage() {\n    this._errorMessage.next(null);\n  }\n\n  private extractData(response: Response) {\n    return new ManifestBuilder(response).build();\n  }\n\n  private isManifestValid(manifest: Manifest): boolean {\n    return manifest && manifest.tileSource && manifest.tileSource.length > 0;\n  }\n\n  private handleError(err: HttpErrorResponse): string {\n    let errMsg: string;\n    if (err.error instanceof Object) {\n      errMsg = err.message;\n    } else {\n      errMsg = err.error;\n    }\n    return errMsg;\n  }\n}\n","import { Manifest } from '../models/manifest';\n\nexport class ManifestUtils {\n  static isManifestPaged(manifest: Manifest): boolean {\n    return (\n      manifest &&\n      (manifest.viewingHint === 'paged' ||\n        (manifest.sequences && manifest.sequences[0].viewingHint === 'paged'))\n    );\n  }\n}\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlLt extends HelpIntl {\n  helpLabel = 'Pagalba';\n  line1 =\n    '<strong>RODYKLĖ KAIRĖN</strong> arba <strong>PAGE UP</strong>: Buvęs puslapis';\n  line2 =\n    '<strong>RODYKLĖ DEŠINĖN</strong> arba <strong>PAGE DOWN</strong>: Kitas puslapis';\n  line3 = '<strong>HOME</strong>: Pirmas puslapis';\n  line4 = '<strong>END</strong>: Paskutinis puslapis';\n  line5 =\n    '<strong>C</strong>: Turinio langas su daugiau informacijos apie objektą. (Uždaromas paspaudus <strong>ESC</strong>.)';\n  line6 =\n    '<strong>S</strong>: Paieška objekto viduje. (Uždaroma paspaudus <strong>ESC</strong>.)';\n  line7 = '<strong>N</strong>: Kitas rezultatas';\n  line8 = '<strong>P</strong>: Buvęs rezultatas';\n  line9 =\n    '<strong>F</strong>: Pilno ekrano režimas (Uždaroma paspaudus <strong>F</strong> arba <strong>ESC</strong>.)';\n  line10 = '<strong>R</strong>: Pasukti 90 laipsnių';\n}\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlNoNb extends HelpIntl {\n  helpLabel = 'Hjelp';\n  line1 = '<strong>PIL VENSTRE</strong> eller <strong>PAGE UP</strong>: Gå til forrige side';\n  line2 = '<strong>PIL HØYRE</strong> eller <strong>PAGE DOWN</strong>: Gå til neste side';\n  line3 = '<strong>HOME</strong>: Gå til første side';\n  line4 = '<strong>END</strong>: Gå til siste side';\n  line5 = '<strong>C</strong>: Slår innholdsfanen på, og viser mer informasjon/metadata om objektet. (Lukk med <strong>ESC</strong>-tasten.)';\n  line6 = '<strong>S</strong>: Åpner søkefeltet for søk i objektet. (Lukk med <strong>ESC</strong>-tasten.)';\n  line7 = '<strong>N</strong>: Går til neste treff i objektet';\n  line8 = '<strong>P</strong>: Går til forrige treff i objektet';\n  line9 = '<strong>F</strong>: Fullskjerm av og på (Lukk med <strong>F</strong> eller <strong>ESC</strong>-tasten.)';\n  line10 = '<strong>R</strong>: Rotér 90°';\n}\n\n","export class HelpIntl {\n  helpLabel = 'Help';\n  line1 = '<strong>ARROW LEFT</strong> or <strong>PAGE UP</strong>: Previous page';\n  line2 = '<strong>ARROW RIGHT</strong> or <strong>PAGE DOWN</strong>: Next page';\n  line3 = '<strong>HOME</strong>: Go to first page';\n  line4 = '<strong>END</strong>: Go to last page';\n  line5 = '<strong>C</strong>: Contents window with more information/metadata about the object. (Close with <strong>ESC</strong>.)';\n  line6 = '<strong>S</strong>: Search inside the object. (Close with <strong>ESC</strong>.)';\n  line7 = '<strong>N</strong>: Next result';\n  line8 = '<strong>P</strong>: Previous result';\n  line9 = '<strong>F</strong>: Fullscreen on/off (Close with <strong>F</strong> or <strong>ESC</strong>.)';\n  line10 = '<strong>R</strong>: Rotate 90°';\n}\n","import { Injectable } from '@angular/core';\nimport { MimeViewerIntl } from './viewer-intl';\nimport { HelpIntlLt } from './help-intl.lt';\n\n@Injectable()\nexport class MimeViewerIntlLt extends MimeViewerIntl {\n  help = new HelpIntlLt();\n  closeLabel = 'Uždaryti';\n  attributionLabel = 'Teisių priskyrimas';\n  attributonCloseAriaLabel = 'Uždaryti teisių priskyrimo langą';\n  contentsLabel = 'Informacija apie objektą';\n  twoPageViewLabel = 'Atvaizduoti po du puslapius';\n  singlePageViewLabel = 'Atvaizduoti po vieną puslapį';\n  metadataLabel = 'Metaduomenys';\n  licenseLabel = 'Licencija';\n  tocLabel = 'Turinys';\n  fullScreenLabel = 'Pilno ekrano režimas';\n  exitFullScreenLabel = 'Išeiti iš pilno ekrano režimo';\n  zoomInLabel = 'Priartinti';\n  zoomOutLabel = 'Atitolinti';\n  previousPageLabel = 'Buvęs puslapis';\n  nextPageLabel = 'Kitas puslapis';\n  homeLabel = 'Grįžti į pradžią';\n  rotateCwLabel = 'Pasukti 90°';\n  searchLabel = 'Paieška';\n  clearSearchLabel = 'Išvalyti';\n  previousHitLabel = 'Buvęs rezultatas';\n  nextHitLabel = 'Kitas rezultatas';\n  goToPageLabel = 'Persikelti į puslapį';\n  currentPageLabel = 'Dabartinis puslapis';\n  enterPageNumber = 'Įveskite puslapio numerį';\n  dropDisabled = 'Atleiskite, bet veiksmas negalimas';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Objekto atvaizduoti nepavyko...';\n  manifestUriMissingLabel = 'Nerastas objektų sąrašo identifikatorius (ManifestUri)';\n  manifestNotValidLabel = 'Netinkamas objektų sąrašas (Manifest)';\n  pageDoesNotExists = 'Nepavyko rasti šio paslapio';\n\n  noResultsFoundLabel = (q: string) => {\n    return `Objekte nerasta atitikmenų <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} rezultata${numberOfHits === 1 ? 's' : 'i'} su <em class=\"current-search\">${q}</em>`;\n  };\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} iš ${numberOfHits} atitikmenų`;\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { MimeViewerIntl } from './viewer-intl';\nimport { HelpIntlNoNb } from './help-intl.no_nb';\n\n@Injectable()\nexport class MimeViewerIntlNoNb extends MimeViewerIntl {\n  help = new HelpIntlNoNb();\n  closeLabel = 'Lukk';\n  attributionLabel = 'Tillatelse';\n  attributonCloseAriaLabel = 'Steng tillatelse dialog';\n  contentsLabel = 'Innhold';\n  twoPageViewLabel = 'Tosidevisning';\n  singlePageViewLabel = 'Enkeltsidevisning';\n  metadataLabel = 'Metadata';\n  licenseLabel = 'Lisens';\n  tocLabel = 'Innholdsfortegnelse';\n  fullScreenLabel = 'Fullskjerm';\n  exitFullScreenLabel = 'Avslutt fullskjerm';\n  zoomInLabel = 'Zoom inn';\n  zoomOutLabel = 'Zoom ut';\n  previousPageLabel = 'Forrige side';\n  nextPageLabel = 'Neste side';\n  homeLabel = 'Hjem';\n  rotateCwLabel = 'Rotér 90°';\n  searchLabel = 'Søk';\n  clearSearchLabel = 'Tøm';\n  previousHitLabel = 'Forrige treff';\n  nextHitLabel = 'Neste treff';\n  goToPageLabel = 'Gå til side';\n  currentPageLabel = 'Nåværende side';\n  enterPageNumber = 'Skriv inn sidenummer';\n  dropDisabled = 'Beklager, men drag and drop er ikke aktivert';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Å nei! Noe har gått galt...';\n  manifestUriMissingLabel = 'Lenke til manifest mangler';\n  manifestNotValidLabel = 'Manifestet er ikke gyldig';\n  pageDoesNotExists = 'Beklager, men den siden finnes ikke';\n\n  noResultsFoundLabel = (q: string) => {\n    return `Ingen treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} av ${numberOfHits} treff`;\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { HelpIntl } from './help-intl';\n\n@Injectable()\nexport class MimeViewerIntl {\n  changes: Subject<void> = new Subject<void>();\n\n  help: HelpIntl = new HelpIntl();\n  closeLabel = 'Close';\n  attributionLabel = 'Attribution';\n  attributonCloseAriaLabel = 'Close attribution dialog';\n  contentsLabel = 'Contents';\n  twoPageViewLabel = 'Two page display';\n  singlePageViewLabel = 'Single page display';\n  metadataLabel = 'Metadata';\n  licenseLabel = 'License';\n  tocLabel = 'Table of Contents';\n  fullScreenLabel = 'Full screen';\n  exitFullScreenLabel = 'Exit full screen';\n  zoomInLabel = 'Zoom in';\n  zoomOutLabel = 'Zoom out';\n  previousPageLabel = 'Previous Page';\n  nextPageLabel = 'Next Page';\n  homeLabel = 'Go Home';\n  rotateCwLabel = 'Rotate 90°';\n  searchLabel = 'Search';\n  clearSearchLabel = 'Clear';\n  previousHitLabel = 'Previous Hit';\n  nextHitLabel = 'Next Hit';\n  goToPageLabel = 'Go to page';\n  currentPageLabel = 'Current page';\n  enterPageNumber = 'Enter page number';\n  dropDisabled = 'Sorry, but drag and drop is disabled';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Oh dear, something has gone terribly wrong...';\n  manifestUriMissingLabel = 'ManifestUri is missing';\n  manifestNotValidLabel = 'Manifest is not valid';\n  pageDoesNotExists = 'Sorry, that page does not exist';\n\n  noResultsFoundLabel = (q: string) => {\n    return `No results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} of ${numberOfHits} hits`;\n  };\n}\n","import { FullscreenService } from './fullscreen-service/fullscreen.service';\nimport { Dimensions } from './models/dimensions';\nimport { ElementRef, Injectable } from '@angular/core';\n\n@Injectable()\nexport class MimeDomHelper {\n  constructor(private fullscreen: FullscreenService) {}\n\n  public getBoundingClientRect(el: ElementRef): Dimensions {\n    try {\n      if (\n        this.isDocumentInFullScreenMode() &&\n        el.nativeElement.nodeName === 'MIME-VIEWER'\n      ) {\n        return this.createFullscreenDimensions(el);\n      } else {\n        return this.createDimensions(el);\n      }\n    } catch (e) {\n      return new Dimensions();\n    }\n  }\n\n  public isDocumentInFullScreenMode(): boolean {\n    return this.fullscreen.isFullscreen();\n  }\n\n  public toggleFullscreen(): void {\n    const el = <any>document.getElementById('mimeViewer');\n    if (this.fullscreen.isEnabled()) {\n      this.fullscreen.toggle(el);\n    }\n  }\n\n  public setFocusOnViewer(): void {\n    const el: HTMLElement = document.getElementById('mimeViewer');\n    if (el) {\n      el.focus();\n    }\n  }\n\n  private createFullscreenDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    const width = this.getFullscreenWidth();\n    const height = this.getFullscreenHeight();\n    return new Dimensions({\n      ...dimensions,\n      top: 0,\n      bottom: height,\n      width: width,\n      height: height,\n      left: 0,\n      right: width\n    });\n  }\n\n  private createDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    return new Dimensions({\n      top: dimensions.top,\n      bottom: dimensions.bottom,\n      width: dimensions.width,\n      height: dimensions.height,\n      left: dimensions.left,\n      right: dimensions.right\n    });\n  }\n\n  private getFullscreenWidth(): number {\n    return (\n      window.innerWidth ||\n      document.documentElement.clientWidth ||\n      document.body.clientWidth\n    );\n  }\n\n  private getFullscreenHeight(): number {\n    return (\n      window.innerHeight ||\n      document.documentElement.clientHeight ||\n      document.body.clientHeight\n    );\n  }\n}\n","import { Injectable, ElementRef } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { MimeDomHelper } from '../mime-dom-helper';\nimport { Dimensions } from '../models/dimensions';\n\n@Injectable()\nexport class MimeResizeService {\n  private _el: ElementRef;\n  private resizeSubject: ReplaySubject<Dimensions> = new ReplaySubject();\n  private dimensions = new Dimensions();\n\n  constructor(private mimeDomHelper: MimeDomHelper) {}\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  get el() {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.asObservable();\n  }\n\n  markForCheck(): void {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n\n    if (\n      this.dimensions.bottom !== dimensions.bottom ||\n      this.dimensions.height !== dimensions.height ||\n      this.dimensions.left !== dimensions.left ||\n      this.dimensions.right !== dimensions.right ||\n      this.dimensions.top !== dimensions.top ||\n      this.dimensions.width !== dimensions.width\n    ) {\n      this.dimensions = dimensions;\n      this.resizeSubject.next({ ...this.dimensions });\n    }\n  }\n}\n","import { ViewerLayout } from './models/viewer-layout';\nimport { ViewerMode } from './models/viewer-mode';\n\nexport class MimeViewerConfig {\n  public attributionDialogEnabled? = true;\n  public attributionDialogHideTimeout? = -1;\n  public navigationControlEnabled? = true;\n  public initViewerMode? = ViewerMode.PAGE;\n  public initViewerLayout? = ViewerLayout.TWO_PAGE;\n  public withCredentials? = false;\n  public loadTilesWithAjax? = false;\n  public crossOriginPolicy?: string | boolean = false;\n  public ajaxHeaders?: any = null;\n  public preserveZoomOnCanvasGroupChange? = false;\n  public startOnTopOnCanvasGroupChange? = false;\n  public isDropEnabled? = false;\n\n  constructor(fields?: {\n    attributionDialogEnabled?: boolean;\n    attributionDialogHideTimeout?: number;\n    navigationControlEnabled?: boolean;\n    initViewerMode?: ViewerMode;\n    initViewerLayout?: ViewerLayout;\n    withCredentials?: boolean;\n    loadTilesWithAjax?: boolean;\n    crossOriginPolicy?: string | boolean;\n    ajaxHeaders?: any;\n    preserveZoomOnCanvasGroupChange?: boolean;\n    startOnTopOnCanvasGroupChange?: boolean;\n    isDropEnabled?: boolean;\n  }) {\n    if (fields) {\n      this.attributionDialogEnabled =\n        fields.attributionDialogEnabled !== undefined\n          ? fields.attributionDialogEnabled\n          : this.attributionDialogEnabled;\n\n      this.attributionDialogHideTimeout =\n        fields.attributionDialogHideTimeout ||\n        this.attributionDialogHideTimeout;\n\n      this.navigationControlEnabled =\n        fields.navigationControlEnabled !== undefined\n          ? fields.navigationControlEnabled\n          : this.navigationControlEnabled;\n\n      this.initViewerMode =\n        fields.initViewerMode !== undefined\n          ? fields.initViewerMode\n          : this.initViewerMode;\n\n      this.initViewerLayout =\n        fields.initViewerLayout !== undefined\n          ? fields.initViewerLayout\n          : this.initViewerLayout;\n\n      this.withCredentials =\n        fields.withCredentials !== undefined\n          ? fields.withCredentials\n          : this.withCredentials;\n\n      this.loadTilesWithAjax =\n        fields.loadTilesWithAjax !== undefined\n          ? fields.loadTilesWithAjax\n          : this.loadTilesWithAjax;\n\n      this.crossOriginPolicy =\n        fields.crossOriginPolicy !== undefined\n          ? fields.crossOriginPolicy\n          : this.crossOriginPolicy;\n\n      this.ajaxHeaders =\n        fields.ajaxHeaders !== undefined\n          ? fields.ajaxHeaders\n          : this.ajaxHeaders;\n\n      this.preserveZoomOnCanvasGroupChange =\n        fields.preserveZoomOnCanvasGroupChange !== undefined\n          ? fields.preserveZoomOnCanvasGroupChange\n          : this.preserveZoomOnCanvasGroupChange;\n\n      this.startOnTopOnCanvasGroupChange =\n        fields.startOnTopOnCanvasGroupChange !== undefined\n          ? fields.startOnTopOnCanvasGroupChange\n          : this.startOnTopOnCanvasGroupChange;\n\n      this.isDropEnabled =\n        fields.isDropEnabled !== undefined\n          ? fields.isDropEnabled\n          : this.isDropEnabled;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { ModeChanges } from '../models/modeChanges';\nimport { ViewerMode } from '../models/viewer-mode';\n\n@Injectable()\nexport class ModeService {\n  private _initialMode: ViewerMode;\n  private _mode: ViewerMode;\n  private toggleModeSubject: ReplaySubject<ModeChanges> = new ReplaySubject();\n  private modeChanges = new ModeChanges();\n\n  constructor() {}\n\n  get onChange(): Observable<ModeChanges> {\n    return this.toggleModeSubject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  set mode(mode: ViewerMode) {\n    this._mode = mode;\n    this.change();\n  }\n\n  get mode(): ViewerMode {\n    return this._mode;\n  }\n\n  set initialMode(mode: ViewerMode) {\n    this._initialMode = mode;\n    this.mode = mode;\n  }\n\n  get initialMode(): ViewerMode {\n    return this._initialMode;\n  }\n\n  toggleMode(): void {\n    if (this.mode === ViewerMode.DASHBOARD) {\n      this.mode = ViewerMode.PAGE;\n    } else if (\n      this.mode === ViewerMode.PAGE ||\n      this.mode === ViewerMode.PAGE_ZOOMED\n    ) {\n      this.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  private change() {\n    this.modeChanges.previousValue = this.modeChanges.currentValue;\n    this.modeChanges.currentValue = this._mode;\n    this.toggleModeSubject.next({\n      ...this.modeChanges\n    });\n  }\n}\n","export class AccessKeys {\n  public static PAGEDOWN = [34];\n  public static PAGEUP = [33];\n  public static ARROWRIGHT = [39];\n  public static ARROWLEFT = [37];\n  public static firstCanvasGroupCodes = [36]; // Home\n  public static lastCanvasGroupCodes = [35]; // End\n  public static zoomInCodes = [107, 187, 171]; // +, numpad and standard position, Firefox uses 171 for standard position\n  public static zoomOutCodes = [109, 189, 173]; // -, numpad and standard position, Firefox uses 173 for standard position\n  public static zoomHomeCodes = [96, 48]; // 0\n  public static nextHit = [78]; // n\n  public static previousHit = [80]; // p\n  public static toggleSearchDialogCodes = [83]; // s\n  public static toggleContentsDialogCodes = [67]; // C\n  public static toggleFullscreenCodes = [70]; // f\n  public static resetSearch = [83]; // s\n  public static rotateCwCodes = [82]; // r\n  private keyCode: number;\n  private altKey = false;\n  private shiftKey = false;\n  private ctrlkey = false;\n\n  constructor(event: KeyboardEvent) {\n    this.keyCode = event.keyCode;\n    this.altKey = event.altKey;\n    this.shiftKey = event.shiftKey;\n    this.ctrlkey = event.ctrlKey;\n  }\n\n  public isArrowRightKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWRIGHT);\n  }\n\n  public isArrowLeftKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWLEFT);\n  }\n\n  public isPageUpKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEUP);\n  }\n\n  public isPageDownKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEDOWN);\n  }\n\n  public isFirstCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.firstCanvasGroupCodes)\n    );\n  }\n\n  public isLastCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.lastCanvasGroupCodes)\n    );\n  }\n\n  public isSliderKeys() {\n    return (\n      this.isArrowLeftKeys() ||\n      this.isArrowRightKeys() ||\n      this.isPageDownKeys() ||\n      this.isPageUpKeys() ||\n      this.isFirstCanvasGroupKeys() ||\n      this.isLastCanvasGroupKeys()\n    );\n  }\n\n  public isZoomInKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomInCodes)\n    );\n  }\n\n  public isZoomOutKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomOutCodes)\n    );\n  }\n\n  public isZoomHomeKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomHomeCodes)\n    );\n  }\n\n  public isNextHitKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.nextHit);\n  }\n\n  public isPreviousHitKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.previousHit)\n    );\n  }\n\n  public isSearchDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleSearchDialogCodes)\n    );\n  }\n\n  public isContentsDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleContentsDialogCodes)\n    );\n  }\n\n  public isFullscreenKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleFullscreenCodes)\n    );\n  }\n\n  public isResetSearchKeys() {\n    return (\n      this.isShiftPressed() && this.arrayContainsKeys(AccessKeys.resetSearch)\n    );\n  }\n\n  public isRotateKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.rotateCwCodes)\n    );\n  }\n\n  private isMultiKeys(): boolean {\n    return this.altKey || this.shiftKey || this.ctrlkey;\n  }\n\n  private arrayContainsKeys(keys: number[]): boolean {\n    return keys.indexOf(this.keyCode) > -1;\n  }\n\n  private isShiftPressed(): boolean {\n    return this.shiftKey;\n  }\n}\n","import { Point } from './point';\nimport { Rect } from './rect';\n\nexport class CanvasGroups {\n  canvasGroupRects: Rect[] = [];\n  canvasRects: Rect[] = [];\n  canvasesPerCanvasGroup: number[][] = [];\n\n  public add(rect: Rect): void {\n    this.canvasGroupRects.push(rect);\n  }\n\n  public addRange(rects: Rect[]): void {\n    this.canvasGroupRects = rects;\n  }\n\n  public get(index: number): Rect {\n    return { ...this.canvasGroupRects[index] };\n  }\n\n  public findClosestIndex(point: Point): number {\n    let i = 0;\n    let lastDelta: any;\n\n    if (point === null) {\n      return -1;\n    }\n    this.canvasGroupRects.some(function(rect: Rect, index: number) {\n      const delta = Math.abs(point.x - rect.centerX);\n      if (delta >= lastDelta) {\n        return true;\n      }\n      i = index;\n      lastDelta = delta;\n    });\n    return i;\n  }\n\n  public getMaxHeight(): number {\n    return Math.max.apply(\n      Math,\n      this.canvasGroupRects.map(function(rect) {\n        return rect.height;\n      })\n    );\n  }\n\n  public getMaxWidth(): number {\n    return Math.max.apply(\n      Math,\n      this.canvasGroupRects.map(function(rect) {\n        return rect.width;\n      })\n    );\n  }\n\n  public length(): number {\n    return this.canvasGroupRects.length;\n  }\n}\n","export class ContentDialogState {\n  public isOpen = false;\n  public selectedIndex = 0;\n\n  constructor(fields?: { isOpen?: boolean; selectedIndex?: number }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n      this.selectedIndex =\n        fields.selectedIndex !== undefined\n          ? fields.selectedIndex\n          : this.selectedIndex;\n    }\n  }\n}\n","export class ContentsSearchDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","export enum ControlAnchor {\n  NONE = 0,\n  TOP_LEFT = 1,\n  TOP_RIGHT = 2,\n  BOTTOM_RIGHT = 3,\n  BOTTOM_LEFT = 4,\n  ABSOLUTE = 5\n}\n","export class Dimensions {\n  bottom? = 0;\n  height? = 0;\n  left? = 0;\n  right? = 0;\n  top? = 0;\n  width? = 0;\n\n  constructor(fields?: {\n    bottom?: number;\n    height?: number;\n    left?: number;\n    right?: number;\n    top?: number;\n    width?: number;\n  }) {\n    if (fields) {\n      this.bottom = fields.bottom || this.bottom;\n      this.height = fields.height || this.height;\n      this.left = fields.left || this.left;\n      this.right = fields.right || this.right;\n      this.top = fields.top || this.top;\n      this.width = fields.width || this.width;\n    }\n  }\n}\n","export enum Direction {\n  UNDEFINED = 0,\n  LEFT = 1,\n  RIGHT = 2,\n  UP = 3,\n  DOWN = 4,\n  NEXT = 5,\n  PREVIOUS = 6\n}\n","export class GestureSettings {\n  scrollToZoom = false;\n  clickToZoom = false;\n  dblClickToZoom = false;\n  pinchToZoom = false;\n  flickEnabled = false;\n  flickMinSpeed = 120;\n  flickMomentum = 0.25;\n  pinchRotate = false;\n}\n\nexport class GestureSettingsMouse extends GestureSettings {}\n\nexport class GestureSettingsTouch extends GestureSettings {}\n\nexport class GestureSettingsPen extends GestureSettings {}\n\nexport class GestureSettingsUnknown extends GestureSettings {}\n","export class HelpDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","import { Rect } from './rect';\n\nexport class Hit {\n  public id = 0;\n  public index = 0;\n  public label: string;\n  public match: string;\n  public before: string;\n  public after: string;\n  public rects: Rect[];\n\n  constructor(fields?: {\n    id?: number;\n    index?: number;\n    label?: string;\n    match?: string;\n    before?: string;\n    after?: string;\n    rects?: Rect[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.index = fields.index || this.index;\n      this.label = fields.label || this.label;\n      this.match = fields.match || this.match;\n      this.before = fields.before || this.before;\n      this.after = fields.after || this.after;\n      this.rects = fields.rects || this.rects;\n    }\n  }\n}\n","import { ViewingDirection } from './viewing-direction';\n\nexport class Manifest {\n  public context?: string;\n  public type?: string;\n  public id?: string;\n  public viewingDirection? = ViewingDirection.LTR;\n  public label?: string;\n  public metadata?: Metadata[];\n  public license?: string;\n  public logo?: string;\n  public attribution?: string;\n  public service?: Service;\n  public sequences?: Sequence[];\n  public structures?: Structure[] = [];\n  public tileSource?: Service[];\n  public viewingHint?: string;\n\n  constructor(fields?: {\n    context?: string;\n    type?: string;\n    id?: string;\n    viewingDirection?: ViewingDirection;\n    label?: string;\n    metadata?: Metadata[];\n    license?: string;\n    logo?: string;\n    attribution?: string;\n    service?: Service;\n    sequences?: Sequence[];\n    structures?: Structure[];\n    tileSource?: Service[];\n    viewingHint?: string;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.type = fields.type || this.type;\n      this.id = fields.id || this.id;\n      this.viewingDirection = fields.viewingDirection || this.viewingDirection;\n      this.label = fields.label || this.label;\n      this.metadata = fields.metadata || this.metadata;\n      this.license = fields.license || this.license;\n      this.logo = fields.logo || this.logo;\n      this.attribution = fields.attribution || this.attribution;\n      this.service = fields.service || this.service;\n      this.sequences = fields.sequences || this.sequences;\n      this.structures = fields.structures || this.structures;\n      this.tileSource = fields.tileSource || this.tileSource;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n    }\n  }\n}\n\nexport class Metadata {\n  constructor(public label: string, public value: string | number) {}\n}\n\nexport class Sequence {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public viewingHint?: string;\n  public canvases?: Canvas[];\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    viewingHint?: string;\n    canvases?: Canvas[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n      this.canvases = fields.canvases || this.canvases;\n    }\n  }\n}\n\nexport class Canvas {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public thumbnail?: string;\n  public height?: number;\n  public width?: number;\n  public images?: Images[];\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    thumbnail?: string;\n    height?: number;\n    width?: number;\n    images?: Images[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.thumbnail = fields.thumbnail || this.thumbnail;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n      this.images = fields.images || this.images;\n    }\n  }\n}\n\nexport class Images {\n  public id: string;\n  public type: string;\n  public motivation: string;\n  public resource: Resource;\n  public on: string;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    motivation?: string;\n    resource?: Resource;\n    on?: string;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.motivation = fields.motivation || this.motivation;\n      this.resource = fields.resource || this.resource;\n      this.on = fields.on || this.on;\n    }\n  }\n}\n\nexport class Resource {\n  public id: string;\n  public type: string;\n  public format: string;\n  public service: Service;\n  public height: number;\n  public width: number;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    format?: string;\n    service?: Service;\n    height?: number;\n    width?: number;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.format = fields.format || this.format;\n      this.service = fields.service || this.service;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n    }\n  }\n}\n\nexport class Service {\n  public context?: string;\n  public id?: string;\n  public protocol?: string;\n  public width?: number;\n  public height?: number;\n  public sizes?: Size[];\n  public tiles?: Tile[];\n  public profile?: string;\n  public physicalScale?: number;\n  public physicalUnits?: string;\n  public service?: Service;\n\n  constructor(fields?: {\n    context?: string;\n    id?: string;\n    protocol?: string;\n    width?: number;\n    height?: number;\n    sizes?: Size[];\n    tiles?: Tile[];\n    profile?: string;\n    physicalScale?: number;\n    physicalUnits?: string;\n    service?: Service;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.id = fields.id || this.id;\n      this.protocol = fields.protocol || this.protocol;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.sizes = fields.sizes || this.sizes;\n      this.tiles = fields.tiles || this.tiles;\n      this.profile = fields.profile || this.profile;\n      this.physicalScale = fields.physicalScale || this.physicalScale;\n      this.physicalUnits = fields.physicalUnits || this.physicalUnits;\n      this.service = fields.service || this.service;\n    }\n  }\n}\n\nexport class Size {\n  constructor(public width: number, public height: number) {}\n}\n\nexport class Tile {\n  public width: number;\n  public scaleFactors: number[];\n\n  constructor(fields?: { width?: number; scaleFactors?: number[] }) {\n    if (fields) {\n      this.width = fields.width || this.width;\n      this.scaleFactors = fields.scaleFactors || this.scaleFactors;\n    }\n  }\n}\n\nexport class Structure {\n  public id: string;\n  public type: string;\n  public label: string;\n  public canvases: string[];\n  public canvasIndex: number;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    canvases?: string[];\n    canvasIndex?: number;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.canvases = fields.canvases || this.canvases;\n      this.canvasIndex = fields.canvasIndex;\n    }\n  }\n}\n\nexport class TileSource {}\n","import { ViewerMode } from '../models/viewer-mode';\n\nexport class ModeChanges {\n  public currentValue: ViewerMode;\n  public previousValue: ViewerMode;\n\n  constructor(fields?: {\n    currentValue?: ViewerMode;\n    previousValue?: ViewerMode;\n  }) {\n    if (fields) {\n      this.currentValue = fields.currentValue || this.currentValue;\n      this.previousValue = fields.previousValue || this.previousValue;\n    }\n  }\n}\n","import { ViewerOptions } from './viewer-options';\nimport {\n  GestureSettingsMouse,\n  GestureSettingsPen,\n  GestureSettingsTouch,\n  GestureSettingsUnknown\n} from './gestureSettings';\nimport { ControlAnchor } from './controlAnchor';\nimport { Service } from './manifest';\nimport { ViewerMode } from './viewer-mode';\n\nexport class Options {\n  id = 'openseadragon';\n  element: Element;\n  tileSources: any[] = [];\n  tabIndex = 0;\n  overlays: any[];\n  xmlPath: string = null;\n  prefixUrl = 'https://openseadragon.github.io/openseadragon/images/';\n  navImages: null;\n  debugMode = false;\n  debugGridColor = '#08f';\n  blendTime = 0;\n  alwaysBlend = false;\n  autoHideControls = true;\n  immediateRender = false;\n  defaultZoomLevel = 0;\n  opacity = 1;\n  compositeOperation: string = null;\n  placeholderFillStyle: string | CanvasGradient | CanvasPattern = null;\n  degrees = 0;\n  minZoomLevel = this.defaultZoomLevel;\n  maxZoomLevel: number = null;\n  homeFillsViewer = false;\n  panHorizontal = true;\n  panVertical = false;\n  constrainDuringPan = false;\n  wrapHorizontal = false;\n  wrapVertical = false;\n  minZoomImageRatio = 1;\n  maxZoomPixelRatio = 1;\n  smoothTileEdgesMinZoom = 1;\n  iOSDevice = true;\n  autoResize = true;\n  preserveImageSizeOnResize = true;\n  minScrollDeltaTime = 50;\n  pixelsPerWheelLine = 40;\n  visibilityRatio = 1;\n  viewportMargins: Object = {};\n  imageLoaderLimit = 0;\n  clickTimeThreshold = 300;\n  clickDistThreshold = 5;\n  dblClickTimeThreshold = 300;\n  dblClickDistThreshold = 20;\n  springStiffness = 6.5;\n  animationTime = ViewerOptions.transitions.OSDAnimationTime / 1000;\n  gestureSettingsMouse = new GestureSettingsMouse();\n  gestureSettingsTouch = new GestureSettingsTouch();\n  gestureSettingsPen = new GestureSettingsPen();\n  gestureSettingsUnknown = new GestureSettingsUnknown();\n  zoomPerClick = 2.0;\n  zoomPerScroll = 1.2;\n  zoomPerSecond = 1.0;\n  showNavigator = false;\n  navigatorId: string;\n  navigatorPosition = 'TOP_RIGHT';\n  navigatorSizeRatio = 0.2;\n  navigatorMaintainSizeRatio = false;\n  navigatorTop: number | string = null;\n  navigatorLeft: number | string = null;\n  navigatorHeight: number | string = null;\n  navigatorWidth: number | string = null;\n  navigatorAutoResize = true;\n  navigatorAutoFade = true;\n  navigatorRotate = true;\n  controlsFadeDelay = 2000;\n  controlsFadeLength = 1500;\n  maxImageCacheCount = 200;\n  timeout = 30000;\n  useCanvas = true;\n  minPixelRatio = 0.5;\n  mouseNavEnabled = true;\n  showNavigationControl = false;\n  navigationControlAnchor = ControlAnchor.TOP_LEFT;\n  showZoomControl = true;\n  showHomeControl = true;\n  showFullPageControl = false;\n  showRotationControl = false;\n  showSequenceControl = false;\n  sequenceControlAnchor = ControlAnchor.TOP_LEFT;\n  navPrevNextWrap = false;\n  zoomInButton: string = null;\n  zoomOutButton: string = null;\n  homeButton: string = null;\n  fullPageButton: string;\n  rotateLeftButton: string;\n  rotateRightButton: string;\n  previousButton: string = null;\n  nextButton: string = null;\n  sequenceMode = true;\n  initialPage = 0;\n  preserveViewport = false;\n  preserveOverlays = false;\n  showReferenceStrip = false;\n  referenceStripScroll = 'horizontal';\n  referenceStripElement: Element = null;\n  referenceStripHeight: number = null;\n  referenceStripWidth: number = null;\n  referenceStripPosition = 'BOTTOM_LEFT';\n  referenceStripSizeRatio = 0.2;\n  collectionMode = false;\n  collectionRows = 1;\n  collectionColumns = 0;\n  collectionLayout = 'horizontal';\n  collectionTileSize = 800;\n  collectionTileMargin = 80;\n  crossOriginPolicy: string | boolean = false;\n  ajaxWithCredentials = false;\n  loadTilesWithAjax = false;\n  ajaxHeaders: any = null;\n}\n","export class PinchStatus {\n  public active = false;\n  public previousGestureId = 0;\n  public shouldStop = false;\n}\n","export class Rect {\n  public x? = 0;\n  public y? = 0;\n  public width? = 0;\n  public height? = 0;\n  public centerX? = 0;\n  public centerY? = 0;\n\n  constructor(fields?: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n  }) {\n    if (fields) {\n      this.x = fields.x || this.x;\n      this.y = fields.y || this.y;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.centerX = this.x + this.width / 2;\n      this.centerY = this.y + this.height / 2;\n    }\n  }\n}\n","import { Hit } from './hit';\n\nexport class SearchResult {\n  public q = '';\n  public hits: Hit[] = [];\n\n  constructor(fields?: { q?: string; hits?: Hit[] }) {\n    if (fields) {\n      this.q = fields.q || this.q;\n      this.hits = fields.hits || this.hits;\n    }\n  }\n\n  public add(hit: Hit): void {\n    this.hits.push(hit);\n  }\n\n  public get(index: number): Hit {\n    return new Hit({\n      ...this.hits[index]\n    });\n  }\n\n  public size(): number {\n    return this.hits.length;\n  }\n\n  public last(): Hit {\n    return this.get(this.size() - 1);\n  }\n}\n","export enum Side {\n  LEFT,\n  RIGHT,\n  TOP,\n  BOTTOM\n}\n","export enum ViewerLayout {\n  ONE_PAGE,\n  TWO_PAGE\n}\n","export enum ViewerMode {\n  DASHBOARD,\n  PAGE,\n  PAGE_ZOOMED\n}\n","/****************************************************************\n * MIME-viewer options\n ****************************************************************/\n\nexport const ViewerOptions = {\n  zoom: {\n    zoomFactor: 1.15,\n    dblClickZoomFactor: 2.7,\n    // How many pixels since lastDistance before it is considered a pinch\n    pinchZoomThreshold: 3\n  },\n\n  pan: {\n    // Sensitivity when determining swipe-direction.\n    // Higher threshold means that swipe must be more focused in\n    // x-direction before the gesture is recognized as \"left\" or \"right\"\n    swipeDirectionThreshold: 70\n  },\n\n  // All transition times in milliseconds\n  transitions: {\n    toolbarsEaseInTime: 400,\n    toolbarsEaseOutTime: 500,\n    OSDAnimationTime: 600 // Animation-time for OSD-animations\n  },\n\n  overlays: {\n    // Margin between canvas groups in Dashboard View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInDashboardView: 300,\n    // Margin between canvas groups in Page View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInPageView: 20\n  },\n\n  padding: {\n    // Padding in viewer container in pixels\n    header: 80, // Placeholder above viewer for header in Dashboard View\n    footer: 80 // Placeholder below viewer for footer in Dashboard View\n  },\n\n  colors: {\n    canvasGroupBackgroundColor: '#fafafa'\n  }\n};\n","import { ContentDialogState } from './content-dialog-state';\nimport { ContentsSearchDialogState } from './contents-search-dialog-state';\nimport { HelpDialogState } from './help-dialog-state';\n\nexport class ViewerState {\n  public contentDialogState = new ContentDialogState();\n  public contentsSearchDialogState = new ContentsSearchDialogState();\n  public helpDialogState = new HelpDialogState();\n\n  constructor(fields?: {\n    contentDialogState?: ContentDialogState;\n    contentsSearchDialogState?: ContentsSearchDialogState;\n    helpDialogState?: HelpDialogState;\n  }) {\n    if (fields) {\n      this.contentDialogState = fields.contentDialogState\n        ? fields.contentDialogState\n        : this.contentDialogState;\n      this.contentsSearchDialogState = fields.contentsSearchDialogState\n        ? fields.contentsSearchDialogState\n        : this.contentsSearchDialogState;\n      this.helpDialogState = fields.helpDialogState\n        ? fields.helpDialogState\n        : this.helpDialogState;\n    }\n  }\n}\n","export enum ViewingDirection {\n  LTR,\n  RTL\n}\n","import { Injectable } from '@angular/core';\n\nimport { CanvasService } from '../../canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from '../../models/search-result';\nimport { Hit } from '../../models/hit';\n\n@Injectable()\nexport class ContentSearchNavigationService {\n  private currentIndex = 0;\n  private isHitOnActiveCanvasGroup = false;\n  private _isFirstHitOnCanvasGroup = false;\n  private _isLastHitOnCanvasGroup = false;\n  private canvasesPerCanvasGroup = [-1];\n  private searchResult: SearchResult;\n\n  constructor(\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService\n  ) {\n    this.iiifContentSearchService.onChange.subscribe((result: SearchResult) => {\n      this.searchResult = result;\n    });\n  }\n\n  update(canvasGroupIndex: number) {\n    this.canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n      canvasGroupIndex\n    );\n    this.currentIndex = this.findCurrentHitIndex(this.canvasesPerCanvasGroup);\n    this.isHitOnActiveCanvasGroup = this.findHitOnActiveCanvasGroup();\n    this._isFirstHitOnCanvasGroup = this.isFirstHitOnCanvasGroup();\n    this._isLastHitOnCanvasGroup = this.findLastHitOnCanvasGroup();\n  }\n\n  getCurrentIndex(): number {\n    return this.currentIndex;\n  }\n\n  getHitOnActiveCanvasGroup(): boolean {\n    return this.isHitOnActiveCanvasGroup;\n  }\n\n  getFirstHitCanvasGroup(): boolean {\n    return this._isFirstHitOnCanvasGroup;\n  }\n\n  getLastHitCanvasGroup(): boolean {\n    return this._isLastHitOnCanvasGroup;\n  }\n\n  goToNextCanvasGroupHit() {\n    if (!this._isLastHitOnCanvasGroup) {\n      let nextHit: Hit;\n      if (this.currentIndex === -1) {\n        nextHit = this.searchResult.get(0);\n      } else {\n        const current = this.searchResult.get(this.currentIndex);\n        const canvasGroup = this.canvasService.findCanvasGroupByCanvasIndex(\n          current.index\n        );\n        const canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n          canvasGroup\n        );\n        const lastCanvasGroupIndex = this.getLastCanvasGroupIndex(\n          canvasesPerCanvasGroup\n        );\n        nextHit = this.searchResult.hits.find(\n          h => h.index > lastCanvasGroupIndex\n        );\n      }\n      if (nextHit) {\n        this.goToCanvasIndex(nextHit);\n      }\n    }\n  }\n\n  goToPreviousCanvasGroupHit() {\n    const previousIndex = this.isHitOnActiveCanvasGroup\n      ? this.currentIndex - 1\n      : this.currentIndex;\n    const previousHit = this.findFirstHitOnCanvasGroup(previousIndex);\n    this.goToCanvasIndex(previousHit);\n  }\n\n  private goToCanvasIndex(hit: Hit): void {\n    this.currentIndex = this.findCurrentHitIndex([hit.index]);\n    this.iiifContentSearchService.selected(hit);\n  }\n\n  private findLastHitOnCanvasGroup() {\n    const lastCanvasIndex = this.searchResult.get(this.searchResult.size() - 1)\n      .index;\n    const currentHit = this.searchResult.get(this.currentIndex);\n    return currentHit.index === lastCanvasIndex;\n  }\n\n  private findFirstHitOnCanvasGroup(previousIndex: number): Hit {\n    let previousHit = this.searchResult.get(previousIndex);\n    const canvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      previousHit.index\n    );\n    const canvasesPerCanvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n      canvasGroupIndex\n    );\n    const leftCanvas = canvasesPerCanvasGroup[0];\n    const leftCanvasHit = this.searchResult.hits.find(\n      h => h.index === leftCanvas\n    );\n    if (leftCanvasHit) {\n      previousHit = leftCanvasHit;\n    } else if (canvasesPerCanvasGroup.length === 2) {\n      const rightCanvas = canvasesPerCanvasGroup[1];\n      previousHit = this.searchResult.hits.find(h => h.index === rightCanvas);\n    }\n    return previousHit;\n  }\n\n  private findHitOnActiveCanvasGroup() {\n    return (\n      this.canvasesPerCanvasGroup.indexOf(\n        this.searchResult.get(this.currentIndex).index\n      ) >= 0\n    );\n  }\n\n  private findCurrentHitIndex(canvasGroupIndexes: number[]): number {\n    for (let i = 0; i < this.searchResult.size(); i++) {\n      const hit = this.searchResult.get(i);\n      if (canvasGroupIndexes.indexOf(hit.index) >= 0) {\n        return i;\n      }\n      if (hit.index >= canvasGroupIndexes[canvasGroupIndexes.length - 1]) {\n        if (i === 0) {\n          return -1;\n        } else {\n          const phit = this.searchResult.get(i - 1);\n          return this.searchResult.hits.findIndex(\n            sr => sr.index === phit.index\n          );\n        }\n      }\n    }\n    return this.searchResult.size() - 1;\n  }\n\n  private isFirstHitOnCanvasGroup() {\n    return this.currentIndex <= 0;\n  }\n\n  private getLastCanvasGroupIndex(canvasesPerCanvasGroup: number[]) {\n    return canvasesPerCanvasGroup.length === 1\n      ? canvasesPerCanvasGroup[0]\n      : canvasesPerCanvasGroup[1];\n  }\n}\n","import { Injectable, Optional, SkipSelf } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs';\n\nexport interface SpinnerState {\n  show: boolean;\n}\n\n@Injectable()\nexport class SpinnerService {\n  private spinnerSubject = new Subject<SpinnerState>();\n  public spinnerState = this.spinnerSubject.asObservable();\n\n  constructor() {}\n\n  show() {\n    this.spinnerSubject.next(<SpinnerState>{ show: true });\n  }\n\n  hide() {\n    this.spinnerSubject.next(<SpinnerState>{ show: false });\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { interval, ReplaySubject, Observable } from 'rxjs';\nimport { switchMap, tap, distinctUntilChanged, filter } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StyleService {\n  private currentRgbColor: string;\n  private colorSubject: ReplaySubject<string> = new ReplaySubject();\n\n  constructor(private zone: NgZone) {}\n\n  get onChange(): Observable<string> {\n    return this.colorSubject.asObservable().pipe(\n      filter(c => c !== null),\n      distinctUntilChanged()\n    );\n  }\n\n  init() {\n    this.zone.runOutsideAngular(() => {\n      interval(1000)\n        .pipe(\n          tap(() => {\n            const previousRgbColor = this.currentRgbColor;\n            const currentRgbColor = this.getComputedBackgroundColor(1);\n            if (previousRgbColor !== currentRgbColor) {\n              this.currentRgbColor = currentRgbColor;\n              this.colorSubject.next(currentRgbColor);\n            }\n          })\n        )\n        .subscribe();\n    });\n  }\n\n  public convertToRgba(rgbColor: string, opacity: number) {\n    return rgbColor.replace(/rgb/i, 'rgba').replace(/\\)/i, `,${opacity})`);\n  }\n\n  private getComputedBackgroundColor(opacity: number): string {\n    const matAppBackground = document.getElementsByClassName(\n      'mat-app-background'\n    );\n    const matSidenavContainer = document.getElementsByTagName(\n      'mat-sidenav-container'\n    );\n\n    if (matAppBackground.length > 0) {\n      return this.getComputedStyle(matAppBackground[0], 'background-color');\n    } else if (matSidenavContainer.length > 0) {\n      return this.getComputedStyle(matSidenavContainer[0], 'background-color');\n    } else {\n      return null;\n    }\n  }\n\n  private getComputedStyle(el: any, property: string) {\n    return window.getComputedStyle(el, null).getPropertyValue(property);\n  }\n}\n","export class Utils {\n  static numbersAreClose(\n    thing: number,\n    realThing: number,\n    epsilon: number\n  ): boolean {\n    return Math.abs(thing - realThing) <= epsilon;\n  }\n  static shortenDecimals(zoom: any, precision: number): number {\n    const short = Number(zoom).toPrecision(precision);\n    return Number(short);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerLayout } from '../models/viewer-layout';\n\n@Injectable()\nexport class ViewerLayoutService {\n  private mimeConfig = new MimeViewerConfig();\n  private _layout: ViewerLayout;\n  private subject: BehaviorSubject<ViewerLayout> = new BehaviorSubject<\n    ViewerLayout\n  >(this.mimeConfig.initViewerLayout);\n  constructor(private mediaObserver: MediaObserver) {}\n\n  init(isPagedManifest?: boolean): void {\n    if (\n      this.mimeConfig.initViewerLayout === ViewerLayout.TWO_PAGE &&\n      isPagedManifest &&\n      !this.isMobile()\n    ) {\n      this._layout = ViewerLayout.TWO_PAGE;\n      this.change();\n    } else {\n      this._layout = ViewerLayout.ONE_PAGE;\n      this.change();\n    }\n  }\n\n  get onChange(): Observable<ViewerLayout> {\n    return this.subject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get layout(): ViewerLayout {\n    return this._layout;\n  }\n\n  setLayout(viewerLayout: ViewerLayout) {\n    this._layout = viewerLayout;\n    this.change();\n  }\n\n  toggle() {\n    if (this._layout === ViewerLayout.TWO_PAGE) {\n      this.setLayout(ViewerLayout.ONE_PAGE);\n    } else if (this._layout === ViewerLayout.ONE_PAGE) {\n      this.setLayout(ViewerLayout.TWO_PAGE);\n    }\n  }\n\n  private change() {\n    this.subject.next(this._layout);\n  }\n\n  private isMobile(): boolean {\n    return this.mediaObserver.isActive('lt-md');\n  }\n}\n","import { ViewerMode } from '../models/viewer-mode';\nimport { NavigatorCalculateNextCanvasGroupStrategy } from './navigator-calculate-next-canvas-group-strategy';\nimport { CalculateNextCanvasGroupStrategy } from './calculate-next-canvas-group-strategy';\nimport { DashboardModeCalculateNextCanvasGroupStrategy } from './dashboard-mode-calculate-next-canvas-group-strategy';\nimport { PageModeCalculateNextCanvasGroupStrategy } from './page-mode-calculate-next-canvas-group-strategy';\nimport { PageZoomedModeCalculateNextCanvasGroupStrategy } from './page-zoomed-mode-calculate-next-canvas-group-strategy';\n\nexport class CalculateNextCanvasGroupFactory {\n  public static create(mode: ViewerMode): CalculateNextCanvasGroupStrategy {\n    if (mode === ViewerMode.DASHBOARD) {\n      return new DashboardModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE) {\n      return new PageModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE_ZOOMED) {\n      return new PageZoomedModeCalculateNextCanvasGroupStrategy();\n    } else {\n      return new NavigatorCalculateNextCanvasGroupStrategy();\n    }\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\n\nimport { ViewerOptions } from '../models/viewer-options';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { StyleService } from '../style-service/style.service';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class CanvasGroupMask {\n  viewer: any;\n  canvasGroupRect: Rect;\n\n  leftMask: any;\n  rightMask: any;\n\n  disableResize = false;\n  center: Point;\n\n  backgroundColor: string;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(viewer: any, private styleService: StyleService) {\n    this.viewer = viewer;\n    styleService.onChange.pipe(takeUntil(this.destroyed)).subscribe(c => {\n      this.backgroundColor = c;\n      if (this.leftMask) {\n        this.leftMask.style('fill', this.backgroundColor);\n      }\n      if (this.rightMask) {\n        this.rightMask.style('fill', this.backgroundColor);\n      }\n    });\n  }\n\n  public initialise(pageBounds: Rect, visible: boolean): void {\n    this.canvasGroupRect = pageBounds;\n\n    this.addCanvasGroupMask();\n\n    this.setCenter();\n    this.resize();\n\n    if (visible) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  public destroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  public changeCanvasGroup(pageBounds: Rect) {\n    this.canvasGroupRect = pageBounds;\n    this.resize();\n  }\n\n  public show(): void {\n    this.addHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.setCenter();\n    this.resize();\n    this.leftMask.attr('height', '100%');\n    this.rightMask.attr('height', '100%');\n  }\n\n  public hide(): void {\n    this.removeHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.leftMask.attr('height', '0');\n    this.rightMask.attr('height', '0');\n  }\n\n  private addHandlers() {\n    this.viewer.addHandler('animation', this.animationHandler);\n    this.viewer.addHandler('resize', this.resizeHandler);\n    this.viewer.addHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.addHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.addHandler('canvas-drag-end', this.canvasGroupDragEndHandler);\n  }\n\n  private removeHandlers() {\n    this.viewer.removeHandler('animation', this.animationHandler);\n    this.viewer.removeHandler('resize', this.resizeHandler);\n    this.viewer.removeHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.removeHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.removeHandler(\n      'canvas-drag-end',\n      this.canvasGroupDragEndHandler\n    );\n  }\n\n  private animationHandler = () => {\n    this.resize();\n  };\n\n  private resizeHandler = () => {\n    this.setCenter();\n    this.resize();\n  };\n\n  private canvasGroupPinchHandler = () => {\n    this.disableResize = false;\n  };\n\n  private canvasGroupDragHandler = (e: any) => {\n    if ((e.delta.x || e.delta.y) && e.speed > 0 && e.direction !== 0) {\n      this.disableResize = true;\n    }\n  };\n\n  private canvasGroupDragEndHandler = () => {\n    this.disableResize = false;\n    this.resize();\n  };\n\n  private addCanvasGroupMask() {\n    const overlays = d3.select(this.viewer.svgOverlay().node().parentNode);\n\n    const mask = overlays.append('g').attr('id', 'page-mask');\n\n    this.leftMask = mask\n      .append('rect')\n      .attr('id', 'mime-left-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n\n    this.rightMask = mask\n      .append('rect')\n      .attr('id', 'mime-right-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n  }\n\n  private setCenter(): void {\n    this.center = new OpenSeadragon.Point(\n      this.viewer.viewport._containerInnerSize.x / 2,\n      this.viewer.viewport._containerInnerSize.y / 2\n    );\n  }\n\n  private resize(): void {\n    if (this.disableResize || !this.leftMask || !this.rightMask) {\n      return;\n    }\n\n    const leftMaskRect = this.getLeftMaskRect();\n    const rightMaskRect = this.getRightMaskRect();\n    this.leftMask.attr('width', leftMaskRect.width).attr('x', leftMaskRect.x);\n    this.rightMask\n      .attr('width', rightMaskRect.width)\n      .attr('x', Math.round(rightMaskRect.x));\n  }\n\n  private getLeftMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topLeft = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopLeft()\n    );\n    let width = topLeft.x - ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: 0,\n      width: width\n    });\n  }\n\n  private getRightMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topRight = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopRight()\n    );\n    let width = this.viewer.viewport._containerInnerSize.x - topRight.x;\n    const x =\n      this.viewer.viewport._containerInnerSize.x -\n      width +\n      ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: x,\n      width: width\n    });\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class DashboardModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = criteria.currentCanvasGroupCenter;\n\n    let nextCanvasGroup: number;\n    let canvasGroupDelta = this.calculateNumberOfCanvasGroupsToGo(speed);\n    if (canvasGroupDelta === 0) {\n      nextCanvasGroup = currentCanvasGroupCenter;\n    } else {\n      canvasGroupDelta =\n        direction === Direction.LEFT ? canvasGroupDelta : canvasGroupDelta * -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? currentCanvasGroupIndex + canvasGroupDelta\n          : currentCanvasGroupIndex - canvasGroupDelta;\n    }\n\n    return nextCanvasGroup;\n  }\n\n  private calculateNumberOfCanvasGroupsToGo(speed: number): number {\n    if (speed < 500) {\n      return 0;\n    } else if (speed >= 500 && speed < 1500) {\n      return 1;\n    } else if (speed >= 1500 && speed < 2500) {\n      return 3;\n    } else if (speed >= 2500 && speed < 3500) {\n      return 5;\n    } else {\n      return 10;\n    }\n  }\n}\n","import { CanvasService } from '../canvas-service/canvas-service';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Direction } from '../models/direction';\nimport { Options } from '../models/options';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { Strategy } from './zoom-strategy';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  direction?: Direction;\n  immediately?: boolean;\n}\n\nexport interface GoToCanvasGroupStrategy {\n  goToCanvasGroup(canvasGroup: CanvasGroup): void;\n  goToPreviousCanvasGroup(currentCanvasIndex: number): void;\n  goToNextCanvasGroup(currentCanvasIndex: number): void;\n  centerCurrentCanvas(): void;\n}\n\nexport class DefaultGoToCanvasGroupStrategy implements GoToCanvasGroupStrategy {\n  constructor(\n    private viewer: any,\n    private zoomStrategy: Strategy,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private config: MimeViewerConfig,\n    private viewingDirection: ViewingDirection\n  ) {}\n\n  goToCanvasGroup(canvasGroup: CanvasGroup) {\n    const oldCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    this.canvasService.currentCanvasGroupIndex = this.canvasService.constrainToRange(\n      canvasGroup.canvasGroupIndex\n    );\n    const newCanvasGroup = this.canvasService.getCanvasGroupRect(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    if (\n      this.modeService.mode === ViewerMode.PAGE_ZOOMED &&\n      this.config.preserveZoomOnCanvasGroupChange\n    ) {\n      let x: number;\n\n      if (oldCanvasGroupIndex > canvasGroup.canvasGroupIndex) {\n        if (this.config.startOnTopOnCanvasGroupChange) {\n          const canvasGroupIndexes = this.canvasService.getCanvasesPerCanvasGroup(\n            canvasGroup.canvasGroupIndex\n          );\n          const previousCanvasIndex =\n            canvasGroupIndexes[canvasGroupIndexes.length - 1];\n          const previousCanvasRect = this.canvasService.getCanvasRect(\n            previousCanvasIndex\n          );\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.leftX(previousCanvasRect)\n              : this.rightX(newCanvasGroup);\n        } else {\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.rightX(newCanvasGroup)\n              : this.leftX(newCanvasGroup);\n        }\n      } else {\n        x =\n          this.viewingDirection === ViewingDirection.LTR\n            ? this.leftX(newCanvasGroup)\n            : this.rightX(newCanvasGroup);\n      }\n\n      const y = this.config.startOnTopOnCanvasGroupChange\n        ? newCanvasGroup.y +\n          this.getViewportBounds().height / 2 -\n          new Options().collectionTileMargin\n        : this.getViewportCenter().y;\n\n      this.panTo(x, y, canvasGroup.immediately);\n    } else if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      const oldCanvasGroupCenter = this.canvasService.getCanvasGroupRect(\n        oldCanvasGroupIndex\n      );\n      this.panToCenter(oldCanvasGroupCenter, canvasGroup.immediately);\n      this.zoomStrategy.goToHomeZoom();\n      setTimeout(() => {\n        this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n        this.modeService.mode = ViewerMode.PAGE;\n      }, ViewerOptions.transitions.OSDAnimationTime);\n    } else {\n      this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n    }\n  }\n\n  public goToPreviousCanvasGroup(currentCanvasIndex: number): void {\n    if (this.canvasService.currentCanvasGroupIndex > 0) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        viewportCenter\n      );\n\n      const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n        null\n      );\n      const newCanvasGroupIndex = calculateNextCanvasGroupStrategy.calculateNextCanvasGroup(\n        {\n          direction: Direction.PREVIOUS,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection\n        }\n      );\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false\n      });\n    }\n  }\n\n  public goToNextCanvasGroup(currentCanvasIndex: number): void {\n    if (\n      this.canvasService.currentCanvasGroupIndex <\n      this.canvasService.numberOfCanvasGroups\n    ) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        viewportCenter\n      );\n\n      const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n        null\n      );\n      const newCanvasGroupIndex = calculateNextCanvasGroupStrategy.calculateNextCanvasGroup(\n        {\n          direction: Direction.NEXT,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection\n        }\n      );\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false\n      });\n    }\n  }\n\n  public centerCurrentCanvas(): void {\n    const currentCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = this.canvasService.getCanvasGroupRect(\n      currentCanvasGroupIndex\n    );\n    this.panToCenter(currentCanvasGroupCenter, false);\n  }\n\n  private leftX(canvas: Rect): number {\n    return canvas.x + this.getViewportBounds().width / 2;\n  }\n\n  private rightX(canvas: Rect): number {\n    return canvas.x + canvas.width - this.getViewportBounds().width / 2;\n  }\n\n  private panToCenter(canvasGroup: Rect, immediately: boolean): void {\n    this.panTo(canvasGroup.centerX, canvasGroup.centerY, immediately);\n  }\n\n  private panTo(x: number, y: number, immediately: boolean): void {\n    this.viewer.viewport.panTo(\n      {\n        x: x,\n        y: y\n      },\n      immediately\n    );\n  }\n\n  private getViewportCenter(): Point {\n    return this.viewer.viewport.getCenter(true);\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer.viewport.getBounds(true);\n  }\n}\n","import { Service } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class IiifTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Service): any {\n    let tileSource: any;\n    if (resource.service.service) {\n      tileSource = resource.service;\n    } else {\n      tileSource = resource.service['@id'];\n      tileSource = tileSource.startsWith('//')\n        ? `${location.protocol}${tileSource}`\n        : tileSource;\n      tileSource = !tileSource.endsWith('/info.json')\n        ? `${tileSource}/info.json`\n        : tileSource;\n    }\n    return tileSource;\n  }\n}\n","import { Direction } from '../models/direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class NavigatorCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n\n    let nextCanvasGroup = 1;\n    nextCanvasGroup =\n      direction === Direction.NEXT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup = currentCanvasGroupIndex + nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const isNewCanvasGroupInCenter =\n      criteria.currentCanvasGroupIndex !== criteria.currentCanvasGroupCenter;\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n\n    let nextCanvasGroup = criteria.currentCanvasGroupIndex;\n    if (speed >= 200) {\n      const diff = direction === Direction.LEFT ? 1 : -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? criteria.currentCanvasGroupIndex + diff\n          : criteria.currentCanvasGroupIndex - diff;\n    } else if (isNewCanvasGroupInCenter) {\n      nextCanvasGroup = criteria.currentCanvasGroupCenter;\n    }\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageZoomedModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy {\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const canvasGroupEndHitCountReached =\n      criteria.canvasGroupEndHitCountReached;\n\n    let nextCanvasGroup = canvasGroupEndHitCountReached ? 1 : 0;\n\n    nextCanvasGroup =\n      direction === Direction.LEFT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup =\n      criteria.viewingDirection === ViewingDirection.LTR\n        ? currentCanvasGroupIndex + nextCanvasGroup\n        : currentCanvasGroupIndex - nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { Service } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class StaticImageTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Service): any {\n    return {\n      type: 'image',\n      url: resource['@id']\n    };\n  }\n}\n","import { Direction } from '../models/direction';\nimport { Side } from '../models/side';\nexport class SwipeDragEndCounter {\n  public leftCount: number;\n  public rightCount: number;\n\n  constructor() {\n    this.reset();\n  }\n\n  public reset(): void {\n    this.leftCount = 0;\n    this.rightCount = 0;\n  }\n\n  /**\n   * @param direction of swipe / pan\n   * @param side hit by swipe\n   */\n  public addHit(side: Side, dir: Direction): void {\n    this.incrementSide(side);\n    this.clearOppositeSideOfDragDirection(dir);\n  }\n\n  public hitCountReached(): boolean {\n    return this.leftCount >= 2 || this.rightCount >= 2;\n  }\n\n  private incrementSide(side: Side): void {\n    if (side === Side.LEFT) {\n      this.leftCount++;\n      this.rightCount = 0;\n    } else if (side === Side.RIGHT) {\n      this.rightCount++;\n      this.leftCount = 0;\n    }\n  }\n\n  /**\n   * Clear opposite side if swiping in the other direction\n   * @param Direction of swipe / pan\n   */\n  private clearOppositeSideOfDragDirection(dir: Direction): void {\n    if (dir === Direction.LEFT) {\n      this.leftCount = 0;\n    } else if (dir === Direction.RIGHT) {\n      this.rightCount = 0;\n    }\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\nimport { Side } from '../models/side';\nimport { Direction } from '../models/direction';\nimport { ViewerOptions } from '../models/viewer-options';\nexport class SwipeUtils {\n  // Added threshold to prevent sensitive direction-calculation when zoomed in\n  static getSwipeDirection(\n    start: Point,\n    end: Point,\n    useThreshold?: boolean\n  ): Direction {\n    let deltaX = Math.abs(start.x - end.x);\n    const deltaY = Math.abs(start.y - end.y);\n    deltaX = useThreshold\n      ? deltaX - ViewerOptions.pan.swipeDirectionThreshold\n      : deltaX;\n\n    if (start.x > end.x && deltaX >= deltaY) {\n      return Direction.LEFT;\n    } else if (start.x < end.x && deltaX >= deltaY) {\n      return Direction.RIGHT;\n    }\n  }\n\n  static getSideIfPanningPastEndOfCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): Side {\n    if (this.isPanningOutsideLeft(canvasGroupRect, vpBounds)) {\n      return Side.LEFT;\n    } else if (this.isPanningOutsideRight(canvasGroupRect, vpBounds)) {\n      return Side.RIGHT;\n    }\n  }\n\n  static isPanningOutsideCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): boolean {\n    return (\n      this.isPanningOutsideLeft(canvasGroupRect, vpBounds) ||\n      this.isPanningOutsideRight(canvasGroupRect, vpBounds)\n    );\n  }\n\n  static isPanningOutsideLeft(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return vpBounds.x < canvasGroupRect.x;\n  }\n\n  static isPanningOutsideRight(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return (\n      vpBounds.x + vpBounds.width > canvasGroupRect.x + canvasGroupRect.width\n    );\n  }\n\n  /**\n   *\n   * @param direction Current computed direction, expressed as an\n   * angle counterclockwise relative to the positive X axis (-pi to pi, in radians).\n   * Only valid if speed > 0.\n   */\n  static isDirectionInRightSemicircle(direction: number): boolean {\n    return direction > -Math.PI / 2 && direction < Math.PI / 2;\n  }\n\n  /**\n   * @param direction @see isDirectionInRightSemicircle\n   */\n  static isDirectionInLeftSemicircle(direction: number): boolean {\n    return !this.isDirectionInRightSemicircle(direction) || direction === 0; // fix for speed = 0\n  }\n}\n","import { Service } from '../models/manifest';\nimport { IiifTileSourceStrategy } from './iiif-tile-source-strategy';\nimport { StaticImageTileSourceStrategy } from './static-image-tile-source-strategy';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class TileSourceStrategyFactory {\n  public static create(resource: Service): TileSourceStrategy {\n    if (resource.service) {\n      return new IiifTileSourceStrategy();\n    } else {\n      return new StaticImageTileSourceStrategy();\n    }\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport * as d3 from 'd3';\nimport {\n  BehaviorSubject,\n  interval,\n  Observable,\n  Subject,\n  Subscription\n} from 'rxjs';\nimport { distinctUntilChanged, sample, takeUntil } from 'rxjs/operators';\nimport { ModeService } from '../../core/mode-service/mode.service';\nimport { CalculateCanvasGroupPositionFactory } from '../canvas-group-position/calculate-canvas-group-position-factory';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ClickService } from '../click-service/click.service';\nimport { createSvgOverlay } from '../ext/svg-overlay';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { ManifestUtils } from '../iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { Direction } from '../models/direction';\nimport { Manifest, Service } from '../models/manifest';\nimport { ModeChanges } from '../models/modeChanges';\nimport { Options } from '../models/options';\nimport { PinchStatus } from '../models/pinchStatus';\nimport { Side } from '../models/side';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { StyleService } from '../style-service/style.service';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { Hit } from './../models/hit';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { SearchResult } from './../models/search-result';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { CanvasGroupMask } from './canvas-group-mask';\nimport {\n  DefaultGoToCanvasGroupStrategy,\n  GoToCanvasGroupStrategy\n} from './go-to-canvas-group-strategy';\nimport { SwipeDragEndCounter } from './swipe-drag-end-counter';\nimport { SwipeUtils } from './swipe-utils';\nimport { TileSourceStrategyFactory } from './tile-source-strategy-factory';\nimport { DefaultZoomStrategy, ZoomStrategy } from './zoom-strategy';\n\ndeclare const OpenSeadragon: any;\n@Injectable()\nexport class ViewerService {\n  private viewer: any;\n  private svgOverlay: any;\n  private svgNode: any;\n  private config: MimeViewerConfig;\n\n  private overlays: Array<SVGRectElement>;\n  private tileSources: Array<Service>;\n  private subscriptions: Array<Subscription> = [];\n  private destroyed: Subject<void> = new Subject();\n\n  public isCanvasPressed: Subject<boolean> = new BehaviorSubject<boolean>(\n    false\n  );\n\n  private currentCenter: Subject<Point> = new Subject();\n  private currentCanvasIndex: BehaviorSubject<number> = new BehaviorSubject(0);\n  private currentHit: BehaviorSubject<Hit> = new BehaviorSubject(null);\n  private osdIsReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  private swipeDragEndCounter = new SwipeDragEndCounter();\n  private canvasGroupMask: CanvasGroupMask;\n  private pinchStatus = new PinchStatus();\n  private dragStartPosition: any;\n  private manifest: Manifest;\n  private isManifestPaged: boolean;\n  private defaultKeyDownHandler: any;\n\n  public currentSearch: SearchResult;\n  private zoomStrategy: ZoomStrategy;\n  private goToCanvasGroupStrategy: GoToCanvasGroupStrategy;\n\n  public rotation = 0;\n\n  constructor(\n    private zone: NgZone,\n    private clickService: ClickService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private viewerLayoutService: ViewerLayoutService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private styleService: StyleService\n  ) {}\n\n  get onCenterChange(): Observable<Point> {\n    return this.currentCenter.asObservable();\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this.currentCanvasIndex.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onHitChange(): Observable<Hit> {\n    return this.currentHit.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onOsdReadyChange(): Observable<boolean> {\n    return this.osdIsReady.asObservable().pipe(distinctUntilChanged());\n  }\n\n  public getViewer(): any {\n    return this.viewer;\n  }\n\n  public getTilesources(): Service[] {\n    return this.tileSources;\n  }\n\n  public getOverlays(): SVGRectElement[] {\n    return this.overlays;\n  }\n\n  public getZoom(): number {\n    return this.zoomStrategy.getZoom();\n  }\n\n  public getMinZoom(): number {\n    return this.zoomStrategy.getMinZoom();\n  }\n\n  public getMaxZoom(): number {\n    return this.zoomStrategy.getMaxZoom();\n  }\n\n  public home(): void {\n    if (!this.osdIsReady.getValue()) {\n      return;\n    }\n    this.zoomStrategy.setMinZoom(this.modeService.mode);\n\n    this.goToCanvasGroupStrategy.centerCurrentCanvas();\n\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToPreviousCanvasGroup(\n      this.currentCanvasIndex.getValue()\n    );\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToNextCanvasGroup(\n      this.currentCanvasIndex.getValue()\n    );\n  }\n\n  public goToCanvasGroup(canvasGroupIndex: number, immediately: boolean): void {\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately\n    });\n  }\n\n  public goToCanvas(canvasIndex: number, immediately: boolean): void {\n    const canvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      canvasIndex\n    );\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately\n    });\n  }\n\n  public highlight(searchResult: SearchResult): void {\n    this.clearHightlight();\n    if (this.viewer) {\n      if (searchResult.q) {\n        this.currentSearch = searchResult;\n      }\n      for (const hit of searchResult.hits) {\n        for (const rect of hit.rects) {\n          const canvasRect = this.canvasService.getCanvasRect(hit.index);\n          if (canvasRect) {\n            const x = canvasRect.x + rect.x;\n            const y = canvasRect.y + rect.y;\n            const width = rect.width;\n            const height = rect.height;\n            const currentOverlay: SVGRectElement = this.svgNode\n              .append('rect')\n              .attr('mimeHitIndex', hit.id)\n              .attr('x', x)\n              .attr('y', y)\n              .attr('width', width)\n              .attr('height', height)\n              .attr('class', 'hit');\n          }\n        }\n      }\n    }\n  }\n\n  private highlightCurrentHit(hit: Hit) {\n    this.svgNode.selectAll(`g > rect.selected`).attr('class', 'hit');\n    this.svgNode\n      .selectAll(`g > rect[mimeHitIndex='${hit.id}']`)\n      .attr('class', 'hit selected');\n  }\n\n  public clearHightlight(): void {\n    if (this.svgNode) {\n      this.svgNode.selectAll('.hit').remove();\n      this.currentSearch = null;\n    }\n  }\n\n  setUpViewer(manifest: Manifest, config: MimeViewerConfig) {\n    this.config = config;\n    if (manifest && manifest.tileSource) {\n      this.tileSources = manifest.tileSource;\n      this.zone.runOutsideAngular(() => {\n        this.manifest = manifest;\n        this.isManifestPaged = ManifestUtils.isManifestPaged(this.manifest);\n        this.viewer = new OpenSeadragon.Viewer(\n          Object.assign({}, this.getOptions())\n        );\n        createSvgOverlay();\n        this.zoomStrategy = new DefaultZoomStrategy(\n          this.viewer,\n          this.canvasService,\n          this.modeService,\n          this.viewerLayoutService\n        );\n        this.goToCanvasGroupStrategy = new DefaultGoToCanvasGroupStrategy(\n          this.viewer,\n          this.zoomStrategy,\n          this.canvasService,\n          this.modeService,\n          this.config,\n          this.manifest.viewingDirection\n        );\n\n        /*\n          This disables keyboard navigation in openseadragon.\n          We use s for opening search dialog and OSD use the same key for panning.\n          Issue: https://github.com/openseadragon/openseadragon/issues/794\n         */\n        this.defaultKeyDownHandler = this.viewer.innerTracker.keyDownHandler;\n        this.disableKeyDownHandler();\n        this.viewer.innerTracker.keyHandler = null;\n        this.canvasService.reset();\n        this.canvasGroupMask = new CanvasGroupMask(\n          this.viewer,\n          this.styleService\n        );\n      });\n\n      this.addToWindow();\n      this.setupOverlays();\n      this.createOverlays();\n      this.addEvents();\n      this.addSubscriptions();\n    }\n  }\n\n  addSubscriptions(): void {\n    this.modeService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((mode: ModeChanges) => {\n        this.modeChanged(mode);\n      });\n\n    this.zone.runOutsideAngular(() => {\n      this.onCenterChange\n        .pipe(takeUntil(this.destroyed), sample(interval(500)))\n        .subscribe((center: Point) => {\n          this.calculateCurrentCanvasGroup(center);\n          if (center && center !== null) {\n            this.osdIsReady.next(true);\n          }\n        });\n    });\n\n    this.canvasService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((canvasGroupIndex: number) => {\n        this.swipeDragEndCounter.reset();\n        if (canvasGroupIndex !== -1) {\n          this.canvasGroupMask.changeCanvasGroup(\n            this.canvasService.getCanvasGroupRect(canvasGroupIndex)\n          );\n          if (this.modeService.mode === ViewerMode.PAGE) {\n            this.zoomStrategy.goToHomeZoom();\n          }\n        }\n      });\n\n    this.onOsdReadyChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((state: boolean) => {\n        if (state) {\n          this.initialCanvasGroupLoaded();\n          this.currentCenter.next(this.viewer.viewport.getCenter(true));\n        }\n      });\n\n    this.viewerLayoutService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((state: ViewerLayout) => {\n        this.layoutPages();\n      });\n\n    this.iiifContentSearchService.onSelected\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((hit: Hit) => {\n        if (hit) {\n          this.highlightCurrentHit(hit);\n          this.goToCanvas(hit.index, false);\n        }\n      });\n  }\n\n  private layoutPages() {\n    if (this.osdIsReady.getValue()) {\n      const currentCanvasIndex = this.canvasService.currentCanvasIndex;\n      this.destroy(true);\n      this.setUpViewer(this.manifest, this.config);\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex: this.canvasService.findCanvasGroupByCanvasIndex(\n          currentCanvasIndex\n        ),\n        immediately: false\n      });\n\n      // Recreate highlights if there is an active search going on\n      if (this.currentSearch) {\n        this.highlight(this.currentSearch);\n      }\n    }\n  }\n\n  addToWindow() {\n    (<any>window).openSeadragonViewer = this.viewer;\n  }\n\n  setupOverlays(): void {\n    this.svgOverlay = this.viewer.svgOverlay();\n    this.svgNode = d3.select(this.svgOverlay.node());\n  }\n\n  disableKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = null;\n  }\n\n  resetKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = this.defaultKeyDownHandler;\n  }\n\n  /**\n   *\n   * @param layoutSwitch true if switching between layouts\n   * to keep current search-state and rotation\n   */\n  destroy(layoutSwitch?: boolean) {\n    this.osdIsReady.next(false);\n    this.currentCenter.next(null);\n    if (this.viewer != null && this.viewer.isOpen()) {\n      if (this.viewer.container != null) {\n        d3.select(this.viewer.container.parentNode).style('opacity', '0');\n      }\n      this.viewer.destroy();\n    }\n    this.destroyed.next();\n    this.overlays = null;\n    this.canvasService.reset();\n    if (this.canvasGroupMask) {\n      this.canvasGroupMask.destroy();\n    }\n    // Keep search-state and rotation only if layout-switch\n    if (!layoutSwitch) {\n      this.currentSearch = null;\n      this.iiifContentSearchService.destroy();\n      this.rotation = 0;\n    }\n  }\n\n  addEvents(): void {\n    this.clickService.reset();\n    this.clickService.addSingleClickHandler(this.singleClickHandler);\n    this.clickService.addDoubleClickHandler(this.dblClickHandler);\n    this.viewer.addHandler('animation-finish', () => {\n      this.currentCenter.next(this.viewer.viewport.getCenter(true));\n    });\n    this.viewer.addHandler('canvas-click', this.clickService.click);\n    this.viewer.addHandler(\n      'canvas-double-click',\n      (e: any) => (e.preventDefaultAction = true)\n    );\n    this.viewer.addHandler('canvas-press', (e: any) => {\n      this.pinchStatus.active = false;\n      this.dragStartPosition = e.position;\n      this.isCanvasPressed.next(true);\n    });\n    this.viewer.addHandler('canvas-release', () =>\n      this.isCanvasPressed.next(false)\n    );\n    this.viewer.addHandler('canvas-scroll', this.scrollHandler);\n    this.viewer.addHandler('canvas-pinch', this.pinchHandler);\n\n    this.viewer.addHandler('canvas-drag', (e: any) => this.dragHandler(e));\n    this.viewer.addHandler('canvas-drag-end', (e: any) =>\n      this.swipeToCanvasGroup(e)\n    );\n\n    this.viewer.addHandler('animation', (e: any) => {\n      this.currentCenter.next(this.viewer.viewport.getCenter(true));\n    });\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomIn(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomOut(zoomFactor, position);\n  }\n\n  rotate(): void {\n    this.rotation = (this.rotation + 90) % 360;\n    this.layoutPages();\n  }\n\n  /**\n   * Callback for mode-change\n   * @param mode ViewerMode\n   */\n  modeChanged(mode: ModeChanges): void {\n    if (mode.currentValue === ViewerMode.DASHBOARD) {\n      this.viewer.panVertical = false;\n      this.toggleToDashboard();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE) {\n      this.viewer.panVertical = false;\n      this.toggleToPage();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE_ZOOMED) {\n      this.viewer.panVertical = true;\n      this.resetKeyDownHandler();\n    }\n  }\n\n  /**\n   * Switches to DASHBOARD-mode, repositions canvas group and removes max-width on viewer\n   */\n  private toggleToDashboard(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false\n    });\n\n    this.canvasGroupMask.hide();\n\n    this.zoomStrategy.setMinZoom(ViewerMode.DASHBOARD);\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  /**\n   * Switches to PAGE-mode, centers current canvas group and repositions other canvas groups\n   */\n  private toggleToPage(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false\n    });\n\n    this.canvasGroupMask.show();\n\n    this.zoomStrategy.setMinZoom(ViewerMode.PAGE);\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  /**\n   * Scroll-handler\n   */\n  scrollHandler = (event: any) => {\n    const zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, event.scroll);\n    // Scrolling up\n    if (event.scroll > 0) {\n      this.zoomInGesture(event.position, zoomFactor);\n      // Scrolling down\n    } else if (event.scroll < 0) {\n      this.zoomOutGesture(event.position, zoomFactor);\n    }\n  };\n\n  /**\n   * Pinch-handler\n   */\n  pinchHandler = (event: any) => {\n    this.pinchStatus.active = true;\n    const zoomFactor = event.distance / event.lastDistance;\n    // Pinch Out\n    if (\n      event.distance >\n      event.lastDistance + ViewerOptions.zoom.pinchZoomThreshold\n    ) {\n      this.zoomInPinchGesture(event, zoomFactor);\n      // Pinch In\n    } else if (\n      event.distance + ViewerOptions.zoom.pinchZoomThreshold <\n      event.lastDistance\n    ) {\n      this.zoomOutPinchGesture(event, zoomFactor);\n    }\n  };\n\n  /**\n   *\n   * @param point to zoom to. If not set, the viewer will zoom to center\n   */\n  zoomInGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      if (position) {\n        this.zoomStrategy.zoomIn(zoomFactor, position);\n      } else {\n        this.zoomStrategy.zoomIn();\n      }\n    }\n  }\n\n  zoomOutGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      this.zoomStrategy.zoomOut(zoomFactor, position);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  /**\n   * Process zoom in pinch gesture (pinch out)\n   *\n   * Toggle to page mode and Zoom in\n   *\n   * @param event from pinch gesture\n   */\n  zoomInPinchGesture(event: any, zoomFactor: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomIn(zoomFactor, this.dragStartPosition || event.center);\n    }\n  }\n\n  /**\n   * Process zoom out pinch gesture (pinch in)\n   *\n   * Zoom out and toggle to dashboard when all zoomed out.\n   * Stop between zooming out and toggling to dashboard.\n   *\n   * @param event from pinch gesture\n   */\n  zoomOutPinchGesture(event: any, zoomFactor: number): void {\n    const gestureId = event.gesturePoints[0].id;\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      this.pinchStatus.shouldStop = true;\n      this.zoomStrategy.zoomOut(zoomFactor, event.center);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      if (\n        !this.pinchStatus.shouldStop ||\n        gestureId === this.pinchStatus.previousGestureId + 2\n      ) {\n        this.pinchStatus.shouldStop = false;\n        this.modeService.toggleMode();\n      }\n      this.pinchStatus.previousGestureId = gestureId;\n    }\n  }\n\n  /**\n   * Single-click-handler\n   * Single-click toggles between page/dashboard-mode if a page is hit\n   */\n  singleClickHandler = (event: any) => {\n    const target = event.originalEvent.target;\n    const tileIndex = this.getOverlayIndexFromClickEvent(target);\n    const requestedCanvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n      tileIndex\n    );\n    if (requestedCanvasGroupIndex) {\n      this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n    }\n    this.modeService.toggleMode();\n  };\n\n  /**\n   * Double-click-handler\n   * Double-click dashboard-mode should go to page-mode\n   * Double-click page-mode should\n   *    a) Zoom in if page is fitted vertically, or\n   *    b) Fit vertically if page is already zoomed in\n   */\n  dblClickHandler = (event: any) => {\n    const target = event.originalEvent.target;\n    // Page is fitted vertically, so dbl-click zooms in\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n      this.zoomStrategy.zoomIn(\n        ViewerOptions.zoom.dblClickZoomFactor,\n        event.position\n      );\n    } else {\n      this.modeService.mode = ViewerMode.PAGE;\n      const canvasIndex: number = this.getOverlayIndexFromClickEvent(target);\n      const requestedCanvasGroupIndex = this.canvasService.findCanvasGroupByCanvasIndex(\n        canvasIndex\n      );\n      if (requestedCanvasGroupIndex >= 0) {\n        this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n      }\n    }\n  };\n\n  /**\n   * Checks if hit element is a <rect>-element\n   * @param target\n   */\n  isCanvasGroupHit(target: HTMLElement): boolean {\n    return target instanceof SVGRectElement;\n  }\n\n  /**\n   * Iterates tilesources and adds them to viewer\n   * Creates svg clickable overlays for each tile\n   */\n  createOverlays(): void {\n    this.overlays = [];\n    const canvasRects: Rect[] = [];\n    const calculateCanvasGroupPositionStrategy = CalculateCanvasGroupPositionFactory.create(\n      this.viewerLayoutService.layout,\n      this.isManifestPaged\n    );\n\n    const isTwoPageView: boolean =\n      this.viewerLayoutService.layout === ViewerLayout.TWO_PAGE;\n    let group: any = this.svgNode.append('g').attr('class', 'page-group');\n\n    this.tileSources.forEach((tile, i) => {\n      const position = calculateCanvasGroupPositionStrategy.calculateCanvasGroupPosition(\n        {\n          canvasGroupIndex: i,\n          canvasSource: tile,\n          previousCanvasGroupPosition: canvasRects[i - 1],\n          viewingDirection: this.manifest.viewingDirection\n        },\n        this.rotation\n      );\n\n      canvasRects.push(position);\n\n      const tileSourceStrategy = TileSourceStrategyFactory.create(tile);\n      const tileSource = tileSourceStrategy.getTileSource(tile);\n\n      this.zone.runOutsideAngular(() => {\n        const rotated = this.rotation === 90 || this.rotation === 270;\n\n        let bounds;\n\n        /* Because image scaling is performed before rotation,\n         * we must invert width & height and translate position so that tile rotation ends up correct\n         */\n        if (rotated) {\n          bounds = new OpenSeadragon.Rect(\n            position.x + (position.width - position.height) / 2,\n            position.y - (position.width - position.height) / 2,\n            position.height,\n            position.width\n          );\n        } else {\n          bounds = new OpenSeadragon.Rect(\n            position.x,\n            position.y,\n            position.width,\n            position.height\n          );\n        }\n\n        this.viewer.addTiledImage({\n          index: i,\n          tileSource: tileSource,\n          fitBounds: bounds,\n          degrees: this.rotation\n        });\n      });\n\n      if (isTwoPageView && i % 2 !== 0) {\n        group = this.svgNode.append('g').attr('class', 'page-group');\n      }\n\n      const currentOverlay = group\n        .append('rect')\n        .attr('x', position.x)\n        .attr('y', position.y)\n        .attr('width', position.width)\n        .attr('height', position.height)\n        .attr('class', 'tile');\n\n      // Make custom borders if current layout is two-paged\n      if (isTwoPageView) {\n        if (i % 2 === 0 && i !== 0) {\n          const noLeftStrokeStyle =\n            Number(position.width * 2 + position.height) +\n            ', ' +\n            position.width * 2;\n          currentOverlay.style('stroke-dasharray', noLeftStrokeStyle);\n        } else if (i % 2 !== 0 && i !== 0) {\n          const noRightStrokeStyle =\n            position.width +\n            ', ' +\n            position.height +\n            ', ' +\n            Number(position.width * 2 + position.height);\n          currentOverlay.style('stroke-dasharray', noRightStrokeStyle);\n        }\n      }\n\n      const currentOverlayNode: SVGRectElement = currentOverlay.node();\n      this.overlays[i] = currentOverlayNode;\n    });\n\n    const layout =\n      this.viewerLayoutService.layout === ViewerLayout.ONE_PAGE ||\n      !this.isManifestPaged\n        ? ViewerLayout.ONE_PAGE\n        : ViewerLayout.TWO_PAGE;\n    this.canvasService.addAll(canvasRects, layout);\n  }\n\n  /**\n   * Sets viewer size and opacity once the first canvas group has fully loaded\n   */\n  private initialCanvasGroupLoaded(): void {\n    this.home();\n    this.canvasGroupMask.initialise(\n      this.canvasService.getCurrentCanvasGroupRect(),\n      this.modeService.mode !== ViewerMode.DASHBOARD\n    );\n    d3.select(this.viewer.container.parentNode)\n      .transition()\n      .duration(ViewerOptions.transitions.OSDAnimationTime)\n      .style('opacity', '1');\n  }\n\n  /**\n   * Returns overlay-index for click-event if hit\n   * @param target hit <rect>\n   */\n  getOverlayIndexFromClickEvent(target: any) {\n    if (this.isCanvasGroupHit(target)) {\n      const requestedCanvasGroup: number = this.overlays.indexOf(target);\n      if (requestedCanvasGroup >= 0) {\n        return requestedCanvasGroup;\n      }\n    }\n    return -1;\n  }\n\n  private getOptions(): Options {\n    const options = new Options();\n    options.ajaxWithCredentials = this.config.withCredentials;\n    options.loadTilesWithAjax = this.config.loadTilesWithAjax;\n    options.crossOriginPolicy = this.config.crossOriginPolicy;\n    options.ajaxHeaders = this.config.ajaxHeaders;\n    return options;\n  }\n\n  private calculateCurrentCanvasGroup(center: Point) {\n    if (center) {\n      const currentCanvasGroupIndex = this.canvasService.findClosestCanvasGroupIndex(\n        center\n      );\n      this.currentCanvasIndex.next(currentCanvasGroupIndex);\n    }\n  }\n\n  private dragHandler = (e: any) => {\n    this.viewer.panHorizontal = true;\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      const dragEndPosision: Point = e.position;\n      const canvasGroupRect: Rect = this.canvasService.getCurrentCanvasGroupRect();\n      const vpBounds: Rect = this.getViewportBounds();\n      const pannedPastCanvasGroup: Side = SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n        canvasGroupRect,\n        vpBounds\n      );\n      const direction: number = e.direction;\n      if (\n        (pannedPastCanvasGroup === Side.LEFT &&\n          SwipeUtils.isDirectionInRightSemicircle(direction)) ||\n        (pannedPastCanvasGroup === Side.RIGHT &&\n          SwipeUtils.isDirectionInLeftSemicircle(direction))\n      ) {\n        this.viewer.panHorizontal = false;\n      }\n    }\n  };\n\n  private swipeToCanvasGroup(e: any) {\n    // Don't swipe on pinch actions\n    if (this.pinchStatus.active) {\n      return;\n    }\n\n    const speed: number = e.speed;\n    const dragEndPosision = e.position;\n\n    const isCanvasGroupZoomed =\n      this.modeService.mode === ViewerMode.PAGE_ZOOMED;\n\n    const canvasGroupRect: Rect = this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds: Rect = this.getViewportBounds();\n\n    const direction: Direction = SwipeUtils.getSwipeDirection(\n      this.dragStartPosition,\n      dragEndPosision,\n      isCanvasGroupZoomed\n    );\n\n    const currentCanvasGroupIndex: number = this.canvasService\n      .currentCanvasGroupIndex;\n    const calculateNextCanvasGroupStrategy = CalculateNextCanvasGroupFactory.create(\n      this.modeService.mode\n    );\n\n    let pannedPastSide: Side, canvasGroupEndHitCountReached: boolean;\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      pannedPastSide = SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n        canvasGroupRect,\n        viewportBounds\n      );\n      this.swipeDragEndCounter.addHit(pannedPastSide, direction);\n      canvasGroupEndHitCountReached = this.swipeDragEndCounter.hitCountReached();\n    }\n\n    const newCanvasGroupIndex = calculateNextCanvasGroupStrategy.calculateNextCanvasGroup(\n      {\n        currentCanvasGroupCenter: this.currentCanvasIndex.getValue(),\n        speed: speed,\n        direction: direction,\n        currentCanvasGroupIndex: currentCanvasGroupIndex,\n        canvasGroupEndHitCountReached: canvasGroupEndHitCountReached,\n        viewingDirection: this.manifest.viewingDirection\n      }\n    );\n    if (\n      this.modeService.mode === ViewerMode.DASHBOARD ||\n      this.modeService.mode === ViewerMode.PAGE ||\n      (canvasGroupEndHitCountReached && direction)\n    ) {\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n        direction: direction\n      });\n    }\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer.viewport.getBounds();\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Dimensions } from '../models/dimensions';\nimport { Direction } from '../models/direction';\nimport { Point } from '../models/point';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { Utils } from '../utils';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { ZoomUtils } from './zoom-utils';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  canvasGroupEndHitCountReached?: boolean;\n  direction: Direction;\n  immediately: boolean;\n}\n\nexport interface Strategy {\n  setMinZoom(mode: ViewerMode): void;\n  getMinZoom(): number;\n  getMaxZoom(): number;\n  getZoom(): number;\n  goToHomeZoom(): void;\n  zoomTo(level: number, position?: Point): void;\n  zoomIn(zoomFactor?: number, position?: Point): void;\n  zoomOut(zoomFactor?: number, position?: Point): void;\n}\n\nexport class ZoomStrategy {\n  constructor(\n    protected viewer: any,\n    protected canvasService: CanvasService,\n    protected modeService: ModeService,\n    protected viewerLayoutService: ViewerLayoutService\n  ) {}\n\n  setMinZoom(mode: ViewerMode): void {\n    this.viewer.viewport.minZoomLevel = this.getHomeZoomLevel(mode);\n  }\n\n  getMinZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMinZoom(), 5);\n  }\n\n  getMaxZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMaxZoom(), 5);\n  }\n\n  getZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getZoom(true), 5);\n  }\n\n  goToHomeZoom(): void {\n    this.zoomTo(this.getHomeZoomLevel(this.modeService.mode));\n    if (this.modeService.mode === ViewerMode.PAGE_ZOOMED) {\n      this.modeService.mode = ViewerMode.PAGE;\n    }\n  }\n\n  zoomTo(level: number, position?: Point): void {\n    this.viewer.viewport.zoomTo(level, position);\n  }\n\n  private getHomeZoomLevel(mode: ViewerMode): number {\n    if (!this.viewer || !this.canvasService) {\n      return;\n    }\n\n    let canvasGroupHeight: number;\n    let canvasGroupWidth: number;\n    let viewportBounds: any;\n\n    if (mode === ViewerMode.DASHBOARD) {\n      canvasGroupHeight = this.canvasService.getMaxHeight();\n      canvasGroupWidth = this.canvasService.getMaxWidth();\n      viewportBounds = this.getDashboardViewportBounds();\n    } else {\n      const currentCanvasGroupRect = this.canvasService.getCurrentCanvasGroupRect();\n      canvasGroupHeight = currentCanvasGroupRect.height;\n      canvasGroupWidth = currentCanvasGroupRect.width;\n      viewportBounds = this.viewer.viewport.getBounds();\n    }\n\n    return this.getFittedZoomLevel(\n      viewportBounds,\n      canvasGroupHeight,\n      canvasGroupWidth\n    );\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    if (typeof zoomFactor === 'undefined') {\n      zoomFactor = ViewerOptions.zoom.zoomFactor;\n    }\n\n    if (typeof position !== 'undefined') {\n      position = this.viewer.viewport.pointFromPixel(position);\n      position = ZoomUtils.constrainPositionToCanvasGroup(\n        position,\n        this.canvasService.getCurrentCanvasGroupRect()\n      );\n    }\n\n    if (this.modeService.mode !== ViewerMode.PAGE_ZOOMED) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n    }\n\n    this.zoomBy(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    if (typeof zoomFactor === 'undefined') {\n      zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, -1);\n    }\n\n    if (typeof position !== 'undefined') {\n      position = this.viewer.viewport.pointFromPixel(position);\n      position = ZoomUtils.constrainPositionToCanvasGroup(\n        position,\n        this.canvasService.getCurrentCanvasGroupRect()\n      );\n    }\n\n    if (this.isViewportLargerThanCanvasGroup()) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomBy(zoomFactor, position);\n    }\n  }\n\n  private getDashboardViewportBounds(): any {\n    if (!this.viewer) {\n      return;\n    }\n\n    const homeZoomFactor = this.getHomeZoomFactor();\n    const maxViewportDimensions = new Dimensions(\n      d3\n        .select(this.viewer.container.parentNode.parentNode)\n        .node()\n        .getBoundingClientRect()\n    );\n    const viewportHeight =\n      maxViewportDimensions.height -\n      ViewerOptions.padding.header -\n      ViewerOptions.padding.footer;\n    const viewportWidth = maxViewportDimensions.width * homeZoomFactor;\n\n    const viewportSizeInViewportCoordinates = this.viewer.viewport.deltaPointsFromPixels(\n      new OpenSeadragon.Point(viewportWidth, viewportHeight)\n    );\n\n    return new OpenSeadragon.Rect(\n      0,\n      0,\n      viewportSizeInViewportCoordinates.x,\n      viewportSizeInViewportCoordinates.y\n    );\n  }\n\n  private getFittedZoomLevel(\n    viewportBounds: any,\n    canvasGroupHeight: number,\n    canvasGroupWidth: number\n  ) {\n    const currentZoom: number = this.viewer.viewport.getZoom();\n    const resizeRatio: number = viewportBounds.height / canvasGroupHeight;\n\n    if (resizeRatio * canvasGroupWidth <= viewportBounds.width) {\n      return Utils.shortenDecimals(resizeRatio * currentZoom, 5);\n    } else {\n      // Canvas group at full height is wider than viewport.  Return fit by width instead.\n      return Utils.shortenDecimals(\n        (viewportBounds.width / canvasGroupWidth) * currentZoom,\n        5\n      );\n    }\n  }\n\n  private zoomBy(zoomFactor: number, position?: Point): void {\n    const currentZoom = this.viewer.viewport.getZoom(false);\n    zoomFactor = ZoomUtils.constraintZoomFactor(\n      zoomFactor,\n      currentZoom,\n      this.getMaxZoom()\n    );\n    this.viewer.viewport.zoomBy(zoomFactor, position);\n  }\n\n  private isViewportLargerThanCanvasGroup(): boolean {\n    const canvasGroupRec = this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds = this.viewer.viewport.getBounds();\n    const pbWidth = Math.round(canvasGroupRec.width);\n    const pbHeight = Math.round(canvasGroupRec.height);\n    const vpWidth = Math.round(viewportBounds.width);\n    const vpHeight = Math.round(viewportBounds.height);\n    return vpHeight >= pbHeight || vpWidth >= pbWidth;\n  }\n\n  private getHomeZoomFactor() {\n    return this.modeService.mode === ViewerMode.DASHBOARD\n      ? this.getDashboardZoomHomeFactor()\n      : 1;\n  }\n\n  private getDashboardZoomHomeFactor() {\n    return this.viewerLayoutService.layout === ViewerLayout.ONE_PAGE\n      ? 0.85\n      : 0.66;\n  }\n}\n\nexport class DefaultZoomStrategy extends ZoomStrategy implements Strategy {\n  constructor(\n    viewer: any,\n    canvasService: CanvasService,\n    modeService: ModeService,\n    viewerLayoutService: ViewerLayoutService\n  ) {\n    super(viewer, canvasService, modeService, viewerLayoutService);\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\n\nexport class ZoomUtils {\n  /**\n   *\n   * @param Point in OSD-viewport-coordinates\n   * @param Rect canvasGroupBounds\n   */\n  static constrainPositionToCanvasGroup(\n    point: Point,\n    canvasGroupBounds: Rect\n  ): Point {\n    if (point.x < canvasGroupBounds.x) {\n      point.x = canvasGroupBounds.x;\n    } else if (point.x > canvasGroupBounds.x + canvasGroupBounds.width) {\n      point.x = canvasGroupBounds.x + canvasGroupBounds.width;\n    }\n    return point;\n  }\n\n  static constraintZoomFactor(\n    zoomFactor: number,\n    currentZoom: number,\n    maxZoom: number\n  ): number {\n    const target = currentZoom * zoomFactor;\n    return target > maxZoom ? (maxZoom / target) * zoomFactor : zoomFactor;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  DesktopHelpDialogConfigStrategy,\n  HelpDialogConfigStrategy,\n  MobileHelpDialogConfigStrategy\n} from './help-dialog-config-strategy';\n\n@Injectable()\nexport class HelpDialogConfigStrategyFactory {\n  constructor(\n    private mediaObserver: MediaObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): HelpDialogConfigStrategy {\n    return this.mediaObserver.isActive('lt-md')\n    ? new MobileHelpDialogConfigStrategy()\n    : new DesktopHelpDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { ElementRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { Dimensions } from '../core/models/dimensions';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\n\n\nexport interface HelpDialogConfigStrategy {\n  getConfig(elementRef?: ElementRef): MatDialogConfig;\n}\n\nexport class MobileHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy {\n  public getConfig(elementRef: ElementRef): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      panelClass: 'help-panel'\n    };\n  }\n}\n\nexport class DesktopHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy {\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(el: ElementRef): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      disableClose: false,\n      autoFocus: false,\n      width: `${DesktopHelpDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px'\n      },\n      panelClass: 'help-panel'\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopHelpDialogConfigStrategy.dialogWidth -\n        DesktopHelpDialogConfigStrategy.paddingRight\n    });\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MediaObserver } from '@angular/flex-layout';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\n\n@Component({\n  selector: 'mime-help',\n  templateUrl: './help-dialog.component.html',\n  styleUrls: ['./help-dialog.component.scss']\n})\nexport class HelpDialogComponent implements OnInit, OnDestroy {\n  public tabHeight = {};\n  private mimeHeight = 0;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public mediaObserver: MediaObserver,\n    public intl: MimeViewerIntl,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  ngOnInit(): void {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      });\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  private resizeTabHeight() {\n    let height = this.mimeHeight;\n\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px'\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px'\n      };\n    }\n  }\n\n}\n","<div id=\"help-container\" class=\"help-container\">\n  <div [ngSwitch]=\"mediaObserver.isActive('lt-md')\">\n    <div *ngSwitchCase=\"true\">\n      <mat-toolbar color=\"primary\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n          <button\n            mat-icon-button\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n          <h1 mat-dialog-title>{{intl.help.helpLabel}}</h1>\n        </div>\n      </mat-toolbar>\n    </div>\n    <div *ngSwitchDefault>\n      <mat-toolbar>\n        <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" fxFlex>\n          <h1 class=\"heading-desktop\" mat-dialog-title>{{intl.help.helpLabel}}</h1>\n          <button\n            mat-icon-button\n            [matDialogClose]=\"true\"\n          >\n            <mat-icon>close</mat-icon>\n          </button>\n        </div>\n      </mat-toolbar>\n    </div>\n  </div>\n  <div [ngStyle]=\"tabHeight\" class=\"help-content\">\n    <p [innerHTML]=\"intl.help.line1\"></p>\n    <p [innerHTML]=\"intl.help.line2\"></p>\n    <p [innerHTML]=\"intl.help.line3\"></p>\n    <p [innerHTML]=\"intl.help.line4\"></p>\n    <p [innerHTML]=\"intl.help.line5\"></p>\n    <p [innerHTML]=\"intl.help.line6\"></p>\n    <p [innerHTML]=\"intl.help.line7\"></p>\n    <p [innerHTML]=\"intl.help.line8\"></p>\n    <p [innerHTML]=\"intl.help.line9\"></p>\n    <p [innerHTML]=\"intl.help.line10\"></p>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { HelpDialogComponent } from './help-dialog.component';\nimport { HelpDialogService } from './help-dialog.service';\nimport { HelpDialogConfigStrategyFactory } from './help-dialog-config-strategy-factory';\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [HelpDialogComponent],\n  providers: [\n    HelpDialogService,\n    HelpDialogConfigStrategyFactory\n  ]\n})\nexport class HelpDialogModule {}\n","import { ElementRef, Injectable } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { HelpDialogComponent } from './help-dialog.component';\nimport { HelpDialogConfigStrategyFactory } from './help-dialog-config-strategy-factory';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\n\n@Injectable()\nexport class HelpDialogService {\n  private _el: ElementRef;\n  private isHelpDialogOpen = false;\n  private dialogRef: MatDialogRef<HelpDialogComponent>;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    private dialog: MatDialog,\n    private helpDialogConfigStrategyFactory: HelpDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.mimeResizeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => {\n        if (this.isHelpDialogOpen) {\n          const config = this.getDialogConfig();\n          this.dialogRef.updatePosition(config.position);\n          this.dialogRef.updateSize(config.width, config.height);\n        }\n      })\n  }\n\n  public destroy(): void {\n    this.close();\n    this.destroyed.next();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  public open(): void {\n    if (!this.isHelpDialogOpen) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(HelpDialogComponent, config);\n      this.dialogRef.afterClosed().subscribe(() => {\n        this.isHelpDialogOpen = false;\n      });\n      this.isHelpDialogOpen = true;\n    }\n  }\n\n  public close(): void {\n    if (this.dialogRef) {\n      this.dialogRef.close();\n    }\n    this.isHelpDialogOpen = false;\n  }\n\n  public toggle(): void {\n    this.isHelpDialogOpen ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.isHelpDialogOpen;\n  }\n\n  private getDialogConfig() {\n    return this.helpDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport 'd3';\nimport 'openseadragon';\nimport { AttributionDialogModule } from './attribution-dialog/attribution-dialog.module';\nimport { CanvasGroupDialogModule } from './canvas-group-dialog/canvas-group-dialog.module';\nimport { ContentSearchDialogModule } from './content-search-dialog/content-search-dialog.module';\nimport { HelpDialogModule } from './help-dialog/help-dialog.module';\nimport { ContentsDialogModule } from './contents-dialog/contents-dialog.module';\nimport { CoreModule } from './core/core.module';\nimport { SharedModule } from './shared/shared.module';\nimport { OsdToolbarComponent } from './viewer/osd-toolbar/osd-toolbar.component';\nimport { CanvasGroupNavigatorComponent } from './viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component';\nimport { ContentSearchNavigatorComponent } from './viewer/viewer-footer/content-search-navigator/content-search-navigator.component';\nimport { ViewerFooterComponent } from './viewer/viewer-footer/viewer-footer.component';\nimport { IconComponent } from './viewer/viewer-header/icon/icon.component';\nimport { ViewerHeaderComponent } from './viewer/viewer-header/viewer-header.component';\nimport { ViewerSpinnerComponent } from './viewer/viewer-spinner/viewer-spinner.component';\nimport { ViewerComponent } from './viewer/viewer.component';\n\n@NgModule({\n  declarations: [\n    ViewerComponent,\n    ViewerHeaderComponent,\n    ViewerFooterComponent,\n    OsdToolbarComponent,\n    ContentSearchNavigatorComponent,\n    CanvasGroupNavigatorComponent,\n    ViewerSpinnerComponent,\n    IconComponent\n  ],\n  imports: [\n    CoreModule,\n    SharedModule,\n    ContentsDialogModule,\n    AttributionDialogModule,\n    HelpDialogModule,\n    ContentSearchDialogModule,\n    CanvasGroupDialogModule\n  ],\n  exports: [ViewerComponent]\n})\nexport class MimeModule {}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  exports: [\n    MatToolbarModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatDialogModule,\n    MatTabsModule,\n    MatListModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatInputModule,\n    MatProgressBarModule,\n    MatCardModule,\n    MatSnackBarModule\n  ]\n})\nexport class MimeMaterialModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { FlexLayoutModule } from '@angular/flex-layout';\n\nimport { MimeMaterialModule } from './mime-material.module';\nimport { SpinnerService } from '../core/spinner-service/spinner.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FlexLayoutModule,\n    MimeMaterialModule\n  ],\n  exports: [\n    CommonModule,\n    FlexLayoutModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MimeMaterialModule\n  ],\n  providers: [SpinnerService]\n})\nexport class SharedModule {}\n","import {\n  animate,\n  group,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { ViewingDirection } from '../../core/models/viewing-direction';\nimport { StyleService } from '../../core/style-service/style.service';\nimport { CanvasService } from './../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { MimeResizeService } from './../../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from './../../core/models/dimensions';\nimport { ViewerService } from './../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-osd-toolbar',\n  templateUrl: './osd-toolbar.component.html',\n  styleUrls: ['./osd-toolbar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('osdToolbarState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(-120px, 0)',\n          display: 'none'\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0px, 0px)',\n          display: 'block'\n        })\n      ),\n      transition('hide => show', [\n        group([\n          style({ display: 'block' }),\n          animate(`${ViewerOptions.transitions.toolbarsEaseInTime}ms ease-out`)\n        ])\n      ]),\n      transition(\n        'show => hide',\n        animate(`${ViewerOptions.transitions.toolbarsEaseOutTime}ms ease-in`)\n      )\n    ])\n  ]\n})\nexport class OsdToolbarComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('container', { static: true }) container: ElementRef;\n  @HostBinding('@osdToolbarState')\n  get osdToolbarState() {\n    return this.state;\n  }\n  public osdToolbarStyle = {};\n  public numberOfCanvasGroups: number;\n  public isFirstCanvasGroup: boolean;\n  public isLastCanvasGroup: boolean;\n  public state = 'hide';\n  invert = false;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private renderer: Renderer2,\n    private changeDetectorRef: ChangeDetectorRef,\n    private mimeService: MimeResizeService,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private styleService: StyleService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.mimeService.onResize\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((dimensions: Dimensions) => {\n        this.osdToolbarStyle = {\n          top: dimensions.top + 110 + 'px'\n        };\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.viewerService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((currentCanvasGroupIndex: number) => {\n        this.numberOfCanvasGroups = this.canvasService.numberOfCanvasGroups;\n        this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n          currentCanvasGroupIndex\n        );\n        this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n          currentCanvasGroupIndex\n        );\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.intl.changes\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => this.changeDetectorRef.markForCheck());\n  }\n\n  ngAfterViewInit() {\n    this.styleService.onChange.pipe(takeUntil(this.destroyed)).subscribe(c => {\n      const backgroundRgbaColor = this.styleService.convertToRgba(c, 0.3);\n      this.renderer.setStyle(\n        this.container.nativeElement,\n        'background-color',\n        backgroundRgbaColor\n      );\n    });\n  }\n\n  zoomIn(): void {\n    this.viewerService.zoomIn();\n  }\n\n  zoomOut(): void {\n    this.viewerService.zoomOut();\n  }\n\n  home(): void {\n    this.viewerService.home();\n  }\n\n  rotate(): void {\n    this.viewerService.rotate();\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","<div #container class=\"osd-toolbar\" [ngStyle]=\"osdToolbarStyle\">\n  <div fxHide fxShow.gt-sm=\"true\">\n    <div\n      class=\"osd-toolbar-container\"\n      fxLayout=\"column\"\n      fxLayoutAlign=\"center center\"\n    >\n      <div class=\"osd-toolbar-row\"> </div>\n      <div class=\"osd-toolbar-row\">\n        <ng-container *ngIf=\"invert\">\n          <button\n            id=\"navigateBeforeButton\"\n            mat-icon-button\n            [attr.aria-label]=\"intl.previousPageLabel\"\n            [matTooltip]=\"intl.previousPageLabel\"\n            [disabled]=\"isFirstCanvasGroup\"\n            (click)=\"goToPreviousCanvasGroup()\"\n          >\n            <mat-icon>navigate_before</mat-icon>\n          </button>\n        </ng-container>\n        <ng-container *ngIf=\"!invert\">\n          <button\n            id=\"navigateNextButton\"\n            mat-icon-button\n            [attr.aria-label]=\"intl.nextPageLabel\"\n            [matTooltip]=\"intl.nextPageLabel\"\n            [disabled]=\"isLastCanvasGroup\"\n            (click)=\"goToNextCanvasGroup()\"\n          >\n            <mat-icon>navigate_before</mat-icon>\n          </button>\n        </ng-container>\n        <button\n          (click)=\"home()\"\n          id=\"homeButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.homeLabel\"\n          [matTooltip]=\"intl.homeLabel\"\n        >\n          <mat-icon>home</mat-icon>\n        </button>\n        <ng-container *ngIf=\"invert\">\n          <button\n            id=\"navigateNextButton\"\n            mat-icon-button\n            [attr.aria-label]=\"intl.nextPageLabel\"\n            [matTooltip]=\"intl.nextPageLabel\"\n            [disabled]=\"isLastCanvasGroup\"\n            (click)=\"goToNextCanvasGroup()\"\n          >\n            <mat-icon>navigate_next</mat-icon>\n          </button>\n        </ng-container>\n        <ng-container *ngIf=\"!invert\">\n          <button\n            id=\"navigateBeforeButton\"\n            mat-icon-button\n            [attr.aria-label]=\"intl.previousPageLabel\"\n            [matTooltip]=\"intl.previousPageLabel\"\n            [disabled]=\"isFirstCanvasGroup\"\n            (click)=\"goToPreviousCanvasGroup()\"\n          >\n            <mat-icon>navigate_next</mat-icon>\n          </button>\n        </ng-container>\n      </div>\n\n      <div class=\"osd-toolbar-row\">\n        <button\n          (click)=\"zoomIn()\"\n          id=\"zoomInButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.zoomInLabel\"\n          [matTooltip]=\"intl.zoomInLabel\"\n        >\n          <mat-icon>zoom_in</mat-icon>\n        </button>\n\n        <button\n          (click)=\"rotate()\"\n          id=\"rotateButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.rotateCwLabel\"\n          [matTooltip]=\"intl.rotateCwLabel\"\n        >\n          <mat-icon>rotate_right</mat-icon>\n        </button>\n        <button\n          (click)=\"zoomOut()\"\n          id=\"zoomOutButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.zoomOutLabel\"\n          [matTooltip]=\"intl.zoomOutLabel\"\n        >\n          <mat-icon>zoom_out</mat-icon>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { ChangeDetectorRef, Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { MatSliderChange } from '@angular/material/slider';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { CanvasGroupDialogService } from '../../../canvas-group-dialog/canvas-group-dialog.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { AccessKeys } from '../../../core/models/AccessKeys';\nimport { Manifest } from '../../../core/models/manifest';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { CanvasService } from './../../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../../core/intl/viewer-intl';\nimport { SearchResult } from './../../../core/models/search-result';\nimport { ViewerService } from './../../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-page-navigator',\n  templateUrl: './canvas-group-navigator.component.html',\n  styleUrls: ['./canvas-group-navigator.component.scss']\n})\nexport class CanvasGroupNavigatorComponent implements OnInit, OnDestroy {\n  @Input() public searchResult: SearchResult;\n  public numberOfCanvases: number;\n  public canvasGroupLabel: string;\n  public numberOfCanvasGroups: number;\n  public currentCanvasGroupIndex: number;\n  public isFirstCanvasGroup: boolean;\n  public isLastCanvasGroup: boolean;\n  invert = false;\n  private currentSliderCanvasGroupIndex = -1;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private pageDialogService: CanvasGroupDialogService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.canvasService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((currentCanvasGroupIndex: number) => {\n        if (\n          this.currentSliderCanvasGroupIndex !== -1 &&\n          this.currentSliderCanvasGroupIndex === currentCanvasGroupIndex\n        ) {\n          this.currentSliderCanvasGroupIndex = -1;\n        } else if (this.currentSliderCanvasGroupIndex === -1) {\n          this.currentCanvasGroupIndex = currentCanvasGroupIndex;\n          this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n            this.currentCanvasGroupIndex\n          );\n        }\n        this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n          currentCanvasGroupIndex\n        );\n        this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n          currentCanvasGroupIndex\n        );\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.canvasService.onNumberOfCanvasGroupsChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((numberOfCanvasGroups: number) => {\n        this.numberOfCanvasGroups = numberOfCanvasGroups;\n        this.numberOfCanvases = this.canvasService.numberOfCanvases;\n        this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n          this.currentCanvasGroupIndex\n        );\n        this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n          this.currentCanvasGroupIndex\n        );\n        this.changeDetectorRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  onSliderChange(change: MatSliderChange): void {\n    this.currentSliderCanvasGroupIndex = change.value;\n    this.currentCanvasGroupIndex = change.value;\n    this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n      this.currentCanvasGroupIndex\n    );\n    this.viewerService.goToCanvasGroup(change.value, false);\n    this.changeDetectorRef.detectChanges();\n  }\n\n  onSliderHotKey(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (accessKeys.isSliderKeys()) {\n       event.stopPropagation();\n    }\n  }\n\n  openCanvasGroupDialog(): void {\n    this.pageDialogService.toggle();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","<mat-toolbar>\n  <div fxLayout=\"row\" fxFlex fxLayoutAlign=\"start center\">\n    <div fxFlex>\n      <mat-slider\n        id=\"navigationSlider\"\n        class=\"navigation-slider\"\n        [invert]=\"!invert\"\n        [max]=\"numberOfCanvasGroups - 1\"\n        [value]=\"currentCanvasGroupIndex\"\n        [attr.aria-label]=\"intl.currentPageLabel\"\n        (input)=\"onSliderChange($event)\"\n        (keyup)=\"onSliderHotKey($event)\"\n        fxFlex\n      ></mat-slider>\n    </div>\n    <button\n      mat-button\n      id=\"goToCanvasGroupButton\"\n      class=\"canvasGroups\"\n      (click)=\"openCanvasGroupDialog()\"\n    >\n      <div fxLayout=\"row\" fxLayoutGap=\"1px\">\n        <span id=\"currentCanvasGroupLabel\">{{ canvasGroupLabel }}</span\n        ><span>/</span\n        ><span id=\"numOfCanvasGroups\">{{ numberOfCanvases }}</span>\n      </div>\n    </button>\n    <div class=\"navigation-buttons\">\n      <ng-container *ngIf=\"invert\">\n        <button\n          id=\"footerNavigateBeforeButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstCanvasGroup\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          id=\"footerNavigateNextButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastCanvasGroup\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          id=\"footerNavigateNextButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastCanvasGroup\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          id=\"footerNavigateBeforeButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstCanvasGroup\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n    </div>\n  </div>\n</mat-toolbar>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { CanvasService } from '../../../core/canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../../core/intl/viewer-intl';\nimport { Manifest } from '../../../core/models/manifest';\nimport { SearchResult } from '../../../core/models/search-result';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { ContentSearchNavigationService } from '../../../core/navigation/content-search-navigation-service/content-search-navigation.service';\n\n@Component({\n  selector: 'mime-content-search-navigator',\n  templateUrl: './content-search-navigator.component.html',\n  styleUrls: ['./content-search-navigator.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ContentSearchNavigatorComponent implements OnInit, OnDestroy {\n  @Input() searchResult: SearchResult;\n  public isHitOnActiveCanvasGroup = false;\n  public isFirstCanvasGroupHit = false;\n  public isLastCanvasGroupHit = false;\n  public currentIndex = 0;\n  invert = false;\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchNavigationService: ContentSearchNavigationService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.intl.changes\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => this.changeDetectorRef.markForCheck());\n\n    this.canvasService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(canvasGroupIndex => {\n        this.contentSearchNavigationService.update(canvasGroupIndex);\n        this.currentIndex = this.contentSearchNavigationService.getCurrentIndex();\n        this.isHitOnActiveCanvasGroup = this.contentSearchNavigationService.getHitOnActiveCanvasGroup();\n        this.isFirstCanvasGroupHit = this.contentSearchNavigationService.getFirstHitCanvasGroup();\n        this.isLastCanvasGroupHit = this.contentSearchNavigationService.getLastHitCanvasGroup();\n        this.changeDetectorRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  clear(): void {\n    this.iiifContentSearchService.destroy();\n  }\n\n  goToPreviousCanvasGroupHit() {\n    this.contentSearchNavigationService.goToPreviousCanvasGroupHit();\n  }\n\n  goToNextCanvasGroupHit() {\n    this.contentSearchNavigationService.goToNextCanvasGroupHit();\n  }\n}\n","<mat-toolbar id=\"content-search-navigator-toolbar\" color=\"primary\">\n  <div\n    *ngIf=\"searchResult\"\n    fxLayout=\"row\"\n    fxFlex\n    fxLayoutAlign=\"space-between center\"\n  >\n    <div>\n      <button\n        id=\"footerNavigateCloseHitsButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.closeLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        matTooltipPosition=\"above\"\n        (click)=\"clear()\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </div>\n    <div\n      fxFlex\n      class=\"current-hit-label\"\n      [ngClass]=\"{ 'not-on-page': !isHitOnActiveCanvasGroup }\"\n      fxFlex\n      [innerHTML]=\"intl.currentHitLabel(currentIndex + 1, searchResult.size())\"\n    ></div>\n    <div class=\"navigation-buttons\">\n      <ng-container *ngIf=\"invert\">\n        <button\n          id=\"footerNavigatePreviousHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousHitLabel\"\n          [matTooltip]=\"intl.previousHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstCanvasGroupHit\"\n          (click)=\"goToPreviousCanvasGroupHit()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          id=\"footerNavigateNextHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextHitLabel\"\n          [matTooltip]=\"intl.nextHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastCanvasGroupHit\"\n          (click)=\"goToNextCanvasGroupHit()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          id=\"footerNavigateNextHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextHitLabel\"\n          [matTooltip]=\"intl.nextHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastCanvasGroupHit\"\n          (click)=\"goToNextCanvasGroupHit()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          id=\"footerNavigatePreviousHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousHitLabel\"\n          [matTooltip]=\"intl.previousHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstCanvasGroupHit\"\n          (click)=\"goToPreviousCanvasGroupHit()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n    </div>\n  </div>\n</mat-toolbar>\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\nimport {\n  ChangeDetectorRef,\n  Component,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { MediaChange, MediaObserver } from '@angular/flex-layout';\nimport { Subject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { IiifContentSearchService } from './../../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../../core/models/search-result';\n\n@Component({\n  selector: 'mime-viewer-footer',\n  templateUrl: './viewer-footer.component.html',\n  styleUrls: ['./viewer-footer.component.scss'],\n  animations: [\n    trigger('footerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, 100%)'\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0, 0)'\n        })\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in')\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out')\n      )\n    ])\n  ]\n})\nexport class ViewerFooterComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeFooterBefore', { read: ViewContainerRef, static: true })\n  mimeFooterBefore: ViewContainerRef;\n  @ViewChild('mimeFooterAfter', { read: ViewContainerRef, static: true })\n  mimeFooterAfter: ViewContainerRef;\n  public state = 'hide';\n  public showNavigationToolbar = true;\n  public searchResult: SearchResult = new SearchResult();\n  public showPageNavigator = true;\n  public showContentSearchNavigator = false;\n  private destroyed: Subject<void> = new Subject();\n  private mediaSubscription: Subscription;\n\n  constructor(\n    private iiifContentSearchService: IiifContentSearchService,\n    public mediaObserver: MediaObserver,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  @HostBinding('@footerState')\n  get footerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.iiifContentSearchService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((sr: SearchResult) => {\n        this.searchResult = sr;\n        this.showContentSearchNavigator = this.searchResult.size() > 0;\n        this.showPageNavigator =\n          this.searchResult.size() === 0 || !this.isMobile();\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.mediaSubscription = this.mediaObserver.asObservable().subscribe(\n      (changes: MediaChange[]) => {\n        this.showPageNavigator =\n          this.searchResult.size() === 0 || !this.isMobile();\n        this.changeDetectorRef.detectChanges();\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n    this.mediaSubscription.unsubscribe();\n  }\n\n  private isMobile(): boolean {\n    return this.mediaObserver.isActive('lt-md');\n  }\n}\n","<mat-toolbar class=\"footer-toolbar\">\n  <div fxLayout=\"row\" fxFlex fxLayoutAlign=\"start center\">\n    <div><ng-template #mimeFooterBefore></ng-template></div>\n    <div fxFlex=\"250px\" fxFlex.lt-md=\"100%\" *ngIf=\"searchResult.size() > 0\">\n      <mime-content-search-navigator\n        *ngIf=\"showContentSearchNavigator\"\n        [searchResult]=\"searchResult\"\n      ></mime-content-search-navigator>\n    </div>\n    <div fxFlex [hidden]=\"!showPageNavigator\">\n      <mime-page-navigator [searchResult]=\"searchResult\"></mime-page-navigator>\n    </div>\n  </div>\n  <div><ng-template #mimeFooterAfter></ng-template></div>\n</mat-toolbar>\n","import {\n  Component,\n  Input,\n  OnInit,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n@Component({\n  selector: 'mime-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IconComponent implements OnInit {\n  @Input() iconName: string;\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"mat-icon\">\n  <ng-container *ngIf=\"iconName === 'single_page_display'\">\n    <div class=\"single-page-display\">\n      <svg\n        version=\"1.1\"\n        id=\"Layer_1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        viewBox=\"0 0 90 90\"\n        preserveAspectRatio=\"xMidYMin slice\"\n      >\n        <style type=\"text/css\">\n          .st0 {\n            clip-path: url(#SVGID_2_);\n          }\n        </style>\n        <g>\n          <defs><rect id=\"SVGID_1_\" width=\"100%\" height=\"100%\" /></defs>\n          <clipPath id=\"SVGID_2_\">\n            <use xlink:href=\"#SVGID_1_\" style=\"overflow:visible;\" />\n          </clipPath>\n          <path\n            class=\"st0\"\n            d=\"M21.7,25.2H8.3v2.7h13.4V25.2z M21.7,18.1H8.3v2.7h13.4V18.1z M26.1,31.8H4V4.1h13.6v8.4h8.5V31.8z M30,31.6\n          V11.4L18.7,0H4.3C4.3,0,0,0,0,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C25.8,35.9,30,35.9,30,31.6\"\n          />\n        </g>\n      </svg>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"iconName === 'two_page_display'\">\n    <svg\n      version=\"1.1\"\n      id=\"Layer_1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 90 90\"\n      preserveAspectRatio=\"xMidYMin slice\"\n    >\n      <style type=\"text/css\">\n        .st0 {\n          clip-path: url(#SVGID_2_);\n        }\n      </style>\n      <g>\n        <defs><rect id=\"SVGID_1_\" width=\"100%\" height=\"100%\" /></defs>\n        <clipPath id=\"SVGID_2_\">\n          <use xlink:href=\"#SVGID_1_\" style=\"overflow:visible;\" />\n        </clipPath>\n        <path\n          class=\"st0\"\n          d=\"M52.5,25.2H39.1v2.7h13.4V25.2z M52.5,18.1H39.1v2.7h13.4V18.1z M56.8,31.8H34.7V4.1h13.6v8.4h8.5V31.8z\n        M60.8,31.6V11.4L49.4,0H35c0,0-4.3,0-4.3,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C56.6,35.9,60.8,35.9,60.8,31.6\"\n        />\n        <path\n          class=\"st0\"\n          d=\"M21.7,25.2H8.3v2.7h13.4V25.2z M21.7,18.1H8.3v2.7h13.4V18.1z M21.7,11.1H8.3v2.7h13.4V11.1z M26.1,31.8H4V4.1\n       h22.1V31.8z M30,31.6V4.3c0,0,0-4.3-4.3-4.3H4.3C4.3,0,0,0,0,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C25.8,35.9,30,35.9,30,31.6\"\n        />\n      </g>\n    </svg>\n  </ng-container>\n</div>\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ManifestUtils } from '../../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeDomHelper } from '../../core/mime-dom-helper';\nimport { ViewerLayout } from '../../core/models/viewer-layout';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { ViewerLayoutService } from '../../core/viewer-layout-service/viewer-layout-service';\nimport { ContentSearchDialogService } from './../../content-search-dialog/content-search-dialog.service';\nimport { ContentsDialogService } from './../../contents-dialog/contents-dialog.service';\nimport { FullscreenService } from './../../core/fullscreen-service/fullscreen.service';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../../core/intl/viewer-intl';\nimport { Manifest } from './../../core/models/manifest';\nimport { HelpDialogService } from '../../help-dialog/help-dialog.service';\n\n@Component({\n  selector: 'mime-viewer-header',\n  templateUrl: './viewer-header.component.html',\n  styleUrls: ['./viewer-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.Default,\n  animations: [\n    trigger('headerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, -100%)'\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0px, 0px)'\n        })\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in')\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out')\n      )\n    ])\n  ]\n})\nexport class ViewerHeaderComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeHeaderBefore', { read: ViewContainerRef, static: true })\n  mimeHeaderBefore: ViewContainerRef;\n  @ViewChild('mimeHeaderAfter', { read: ViewContainerRef, static: true })\n  mimeHeaderAfter: ViewContainerRef;\n  public manifest: Manifest;\n  public state = 'hide';\n  isContentSearchEnabled = false;\n  isFullscreenEnabled = false;\n  isInFullscreen = false;\n  fullscreenLabel = this.intl.fullScreenLabel;\n  isPagedManifest = false;\n  viewerLayout: ViewerLayout = ViewerLayout.ONE_PAGE;\n\n  ViewerLayout: typeof ViewerLayout = ViewerLayout; // enables parsing of enum in template\n  private destroyed: Subject<void> = new Subject();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private contentsDialogService: ContentsDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private helpDialogService: HelpDialogService,\n    private iiifManifestService: IiifManifestService,\n    private fullscreenService: FullscreenService,\n    private mimeDomHelper: MimeDomHelper,\n    private viewerLayoutService: ViewerLayoutService\n  ) {}\n\n  @HostBinding('@headerState')\n  get headerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.isFullscreenEnabled = this.fullscreenService.isEnabled();\n\n    this.intl.changes\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => this.changeDetectorRef.markForCheck());\n\n    this.fullscreenService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => {\n        this.isInFullscreen = this.fullscreenService.isFullscreen();\n        this.fullscreenLabel = this.isInFullscreen\n          ? this.intl.exitFullScreenLabel\n          : this.intl.fullScreenLabel;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        this.manifest = manifest;\n        this.isContentSearchEnabled = manifest.service ? true : false;\n        this.isPagedManifest = ManifestUtils.isManifestPaged(manifest);\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.viewerLayoutService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((viewerLayout: ViewerLayout) => {\n        this.viewerLayout = viewerLayout;\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  public toggleContents() {\n    this.contentSearchDialogService.close();\n    this.helpDialogService.close();\n    this.contentsDialogService.toggle();\n  }\n\n  public toggleSearch() {\n    this.contentsDialogService.close();\n    this.helpDialogService.close();\n    this.contentSearchDialogService.toggle();\n  }\n\n  public toggleHelp() {\n    this.contentsDialogService.close();\n    this.contentSearchDialogService.close();\n    this.helpDialogService.toggle();\n  }\n\n  public toggleFullscreen(): void {\n    return this.mimeDomHelper.toggleFullscreen();\n  }\n\n  public isInFullScreen(): boolean {\n    return this.fullscreenService.isFullscreen();\n  }\n\n  public toggleViewerLayout(): void {\n    this.viewerLayoutService.toggle();\n  }\n\n  public setLayoutOnePage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.ONE_PAGE);\n  }\n\n  public setLayoutTwoPage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.TWO_PAGE);\n  }\n}\n","<mat-toolbar>\n  <div\n    class=\"header-container\"\n    fxLayout=\"row\"\n    fxLayoutAlign=\"space-between center\"\n  >\n    <div><ng-template #mimeHeaderBefore></ng-template></div>\n    <div fxFlexOffset=\"16px\" class=\"label\" [matTooltip]=\"manifest?.label\">{{\n      manifest?.label\n    }}</div>\n    <div\n      fxFlex=\"noshrink\"\n      fxLayout=\"row\"\n      fxLayoutAlign=\"end center\"\n      class=\"buttons-container\"\n    >\n      <button\n        *ngIf=\"isPagedManifest\"\n        mat-icon-button\n        [id]=\"\n          viewerLayout === ViewerLayout.ONE_PAGE\n            ? 'toggleTwoPageViewButton'\n            : 'toggleSinglePageViewButton'\n        \"\n        [attr.aria-label]=\"\n          viewerLayout === ViewerLayout.ONE_PAGE\n            ? intl.twoPageViewLabel\n            : intl.singlePageViewLabel\n        \"\n        [matTooltip]=\"\n          viewerLayout === ViewerLayout.ONE_PAGE\n            ? intl.twoPageViewLabel\n            : intl.singlePageViewLabel\n        \"\n        (click)=\"toggleViewerLayout()\"\n      >\n        <mime-icon\n          [iconName]=\"\n            viewerLayout === ViewerLayout.ONE_PAGE\n              ? 'two_page_display'\n              : 'single_page_display'\n          \"\n        >\n        </mime-icon>\n      </button>\n      <button\n        id=\"contentsDialogButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.contentsLabel\"\n        [matTooltip]=\"intl.contentsLabel\"\n        (click)=\"toggleContents()\"\n      >\n        <mat-icon aria-hidden=\"true\">list</mat-icon>\n      </button>\n      <button\n        id=\"contentSearchDialogButton\"\n        *ngIf=\"isContentSearchEnabled\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.searchLabel\"\n        [matTooltip]=\"intl.searchLabel\"\n        (click)=\"toggleSearch()\"\n      >\n        <mat-icon aria-hidden=\"true\">search</mat-icon>\n      </button>\n      <button\n        id=\"helpDialogButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.help.helpLabel\"\n        [matTooltip]=\"intl.help.helpLabel\"\n        (click)=\"toggleHelp()\"\n      >\n        <mat-icon aria-hidden=\"true\">help</mat-icon>\n      </button>\n\n      <button\n        id=\"fullscreenButton\"\n        *ngIf=\"isFullscreenEnabled\"\n        mat-icon-button\n        [attr.aria-label]=\"fullscreenLabel\"\n        [matTooltip]=\"fullscreenLabel\"\n        (click)=\"toggleFullscreen()\"\n      >\n        <mat-icon *ngIf=\"isInFullScreen\" aria-hidden=\"true\"\n          >fullscreen_exit</mat-icon\n        >\n        <mat-icon *ngIf=\"!isInFullScreen\" aria-hidden=\"true\"\n          >fullscreen</mat-icon\n        >\n      </button>\n    </div>\n    <div><ng-template #mimeHeaderAfter></ng-template></div>\n  </div>\n</mat-toolbar>\n","import { ChangeDetectorRef } from '@angular/core';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport {\n  SpinnerState,\n  SpinnerService\n} from '../../core/spinner-service/spinner.service';\n\n@Component({\n  selector: 'mime-spinner',\n  templateUrl: './viewer-spinner.component.html',\n  styleUrls: ['./viewer-spinner.component.scss']\n})\nexport class ViewerSpinnerComponent implements OnDestroy, OnInit {\n  public visible = false;\n  private spinnerSub: Subscription;\n\n  constructor(\n    private spinnerService: SpinnerService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    this.spinnerSub = this.spinnerService.spinnerState.subscribe(\n      (state: SpinnerState) => {\n        this.visible = state.show;\n        this.changeDetectorRef.detectChanges();\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    this.spinnerSub.unsubscribe();\n  }\n}\n","<div class=\"mime-spinner\" [class.mime-spinner--active]=\"visible\">\n  <mat-spinner></mat-spinner>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ViewContainerRef,\n  AfterViewChecked\n} from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Subject, interval } from 'rxjs';\nimport { throttle, takeUntil, take } from 'rxjs/operators';\n\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { ContentsDialogService } from '../contents-dialog/contents-dialog.service';\nimport { AttributionDialogService } from '../attribution-dialog/attribution-dialog.service';\nimport { ContentSearchDialogService } from '../content-search-dialog/content-search-dialog.service';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Manifest } from '../core/models/manifest';\nimport { ModeService } from '../core/mode-service/mode.service';\nimport { ViewerMode } from '../core/models/viewer-mode';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { ViewerHeaderComponent } from './viewer-header/viewer-header.component';\nimport { ViewerFooterComponent } from './viewer-footer/viewer-footer.component';\nimport { OsdToolbarComponent } from './osd-toolbar/osd-toolbar.component';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\nimport { MimeViewerConfig } from '../core/mime-viewer-config';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../core/models/search-result';\nimport { ViewerOptions } from '../core/models/viewer-options';\nimport { MimeViewerIntl } from '../core/intl/viewer-intl';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { ViewerLayout } from '../core/models/viewer-layout';\nimport { ViewerLayoutService } from '../core/viewer-layout-service/viewer-layout-service';\nimport { ManifestUtils } from '../core/iiif-manifest-service/iiif-manifest-utils';\nimport { ViewerState } from '../core/models/viewerState';\nimport { ModeChanges } from '../core/models/modeChanges';\nimport { StyleService } from '../core/style-service/style.service';\nimport { HelpDialogService } from '../help-dialog/help-dialog.service';\n\n@Component({\n  selector: 'mime-viewer',\n  templateUrl: './viewer.component.html',\n  styleUrls: ['./viewer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ViewerComponent\n  implements OnInit, AfterViewChecked, OnDestroy, OnChanges {\n  @Input() public manifestUri: string;\n  @Input() public q: string;\n  @Input() public canvasIndex: number;\n  @Input() public config: MimeViewerConfig = new MimeViewerConfig();\n  @Input() public tabIndex = 0;\n  @Output() viewerModeChanged: EventEmitter<ViewerMode> = new EventEmitter();\n  @Output() canvasChanged: EventEmitter<number> = new EventEmitter();\n  @Output() qChanged: EventEmitter<string> = new EventEmitter();\n  @Output() manifestChanged: EventEmitter<Manifest> = new EventEmitter();\n\n  private destroyed: Subject<void> = new Subject();\n  private isCanvasPressed = false;\n  private currentManifest: Manifest;\n  private viewerLayout: ViewerLayout;\n  private viewerState = new ViewerState();\n\n  public errorMessage: string = null;\n\n  // Viewchilds\n  @ViewChild('mimeHeader', { static: true })\n  private header: ViewerHeaderComponent;\n  @ViewChild('mimeFooter', { static: true })\n  private footer: ViewerFooterComponent;\n  @ViewChild('mimeOsdToolbar')\n  private osdToolbar: OsdToolbarComponent;\n\n  constructor(\n    public snackBar: MatSnackBar,\n    public intl: MimeViewerIntl,\n    private el: ElementRef,\n    private iiifManifestService: IiifManifestService,\n    private contentsDialogService: ContentsDialogService,\n    private attributionDialogService: AttributionDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private helpDialogService: HelpDialogService,\n    private viewerService: ViewerService,\n    private mimeService: MimeResizeService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private modeService: ModeService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private accessKeysHandlerService: AccessKeysService,\n    private canvasService: CanvasService,\n    private viewerLayoutService: ViewerLayoutService,\n    private styleService: StyleService,\n    public zone: NgZone\n  ) {\n    contentsDialogService.el = el;\n    attributionDialogService.el = el;\n    contentSearchDialogService.el = el;\n    helpDialogService.el = el;\n    mimeService.el = el;\n  }\n\n  get mimeHeaderBeforeRef(): ViewContainerRef {\n    return this.header.mimeHeaderBefore;\n  }\n\n  get mimeHeaderAfterRef(): ViewContainerRef {\n    return this.header.mimeHeaderAfter;\n  }\n\n  get mimeFooterBeforeRef(): ViewContainerRef {\n    return this.footer.mimeFooterBefore;\n  }\n\n  get mimeFooterAfterRef(): ViewContainerRef {\n    return this.footer.mimeFooterAfter;\n  }\n\n  ngOnInit(): void {\n    this.styleService.init();\n    this.modeService.initialMode = this.config.initViewerMode;\n    this.iiifManifestService.currentManifest\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((manifest: Manifest) => {\n        if (manifest) {\n          this.initialize();\n          this.currentManifest = manifest;\n          this.manifestChanged.next(manifest);\n          this.viewerLayoutService.init(\n            ManifestUtils.isManifestPaged(manifest)\n          );\n          this.changeDetectorRef.detectChanges();\n          this.viewerService.setUpViewer(manifest, this.config);\n          if (this.config.attributionDialogEnabled && manifest.attribution) {\n            this.attributionDialogService.open(\n              this.config.attributionDialogHideTimeout\n            );\n          }\n\n          if (this.q) {\n            this.iiifContentSearchService.search(manifest, this.q);\n          }\n        }\n      });\n\n    this.viewerService.onOsdReadyChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((state: boolean) => {\n        // Don't reset current page when switching layout\n        if (\n          state &&\n          this.canvasIndex &&\n          !this.canvasService.currentCanvasGroupIndex\n        ) {\n          this.viewerService.goToCanvas(this.canvasIndex, false);\n        }\n      });\n\n    this.iiifManifestService.errorMessage\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((error: string) => {\n        this.resetCurrentManifest();\n        this.errorMessage = error;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.iiifContentSearchService.onQChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((q: string) => {\n        this.qChanged.emit(q);\n      });\n\n    this.iiifContentSearchService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((sr: SearchResult) => {\n        this.viewerService.highlight(sr);\n      });\n\n    this.viewerService.isCanvasPressed\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((value: boolean) => {\n        this.isCanvasPressed = value;\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.modeService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((mode: ModeChanges) => {\n        this.toggleToolbarsState(mode.currentValue);\n        if (\n          mode.previousValue === ViewerMode.DASHBOARD &&\n          mode.currentValue === ViewerMode.PAGE\n        ) {\n          this.viewerState.contentDialogState.isOpen = this.contentsDialogService.isOpen();\n          this.viewerState.contentDialogState.selectedIndex = this.contentsDialogService.getSelectedIndex();\n          this.viewerState.contentsSearchDialogState.isOpen = this.contentSearchDialogService.isOpen();\n          this.viewerState.helpDialogState.isOpen = this.helpDialogService.isOpen();\n          this.zone.run(() => {\n            this.contentsDialogService.close();\n            this.contentSearchDialogService.close();\n            this.helpDialogService.close();\n          });\n        }\n        if (mode.currentValue === ViewerMode.DASHBOARD) {\n          this.zone.run(() => {\n            if (this.viewerState.contentDialogState.isOpen) {\n              this.contentsDialogService.open(\n                this.viewerState.contentDialogState.selectedIndex\n              );\n            }\n            if (this.viewerState.contentsSearchDialogState.isOpen) {\n              this.contentSearchDialogService.open();\n            }\n            if (this.viewerState.helpDialogState.isOpen) {\n              this.helpDialogService.open();\n            }\n          });\n        }\n        this.viewerModeChanged.emit(mode.currentValue);\n      });\n\n    this.canvasService.onCanvasGroupIndexChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((canvasGroupIndex: number) => {\n        const canvasIndex = this.canvasService.findCanvasByCanvasIndex(\n          canvasGroupIndex\n        );\n        if (canvasIndex !== -1) {\n          this.canvasChanged.emit(canvasIndex);\n        }\n      });\n\n    this.mimeService.onResize\n      .pipe(\n        takeUntil(this.destroyed),\n        throttle(val => interval(ViewerOptions.transitions.OSDAnimationTime))\n      )\n      .subscribe(() => {\n        setTimeout(() => {\n          this.viewerService.home();\n        }, ViewerOptions.transitions.OSDAnimationTime);\n      });\n\n    this.viewerLayoutService.onChange\n      .pipe(takeUntil(this.destroyed))\n      .subscribe((viewerLayout: ViewerLayout) => {\n        this.viewerLayout = viewerLayout;\n      });\n\n    this.loadManifest();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    let manifestUriIsChanged = false;\n    let qIsChanged = false;\n    let canvasIndexChanged = false;\n    if (changes['q']) {\n      const qChanges: SimpleChange = changes['q'];\n      if (\n        !qChanges.isFirstChange() &&\n        qChanges.currentValue !== qChanges.firstChange\n      ) {\n        this.q = qChanges.currentValue;\n        qIsChanged = true;\n      }\n    }\n    if (changes['canvasIndex']) {\n      const canvasIndexChanges: SimpleChange = changes['canvasIndex'];\n      if (\n        !canvasIndexChanges.isFirstChange() &&\n        canvasIndexChanges.currentValue !== canvasIndexChanges.firstChange\n      ) {\n        this.canvasIndex = canvasIndexChanges.currentValue;\n        canvasIndexChanged = true;\n      }\n    }\n    if (changes['manifestUri']) {\n      const manifestUriChanges: SimpleChange = changes['manifestUri'];\n      if (\n        !manifestUriChanges.isFirstChange() &&\n        manifestUriChanges.currentValue !== manifestUriChanges.previousValue\n      ) {\n        this.modeService.mode = this.config.initViewerMode;\n        this.manifestUri = manifestUriChanges.currentValue;\n        manifestUriIsChanged = true;\n      }\n    }\n\n    if (manifestUriIsChanged) {\n      this.loadManifest();\n    } else {\n      if (qIsChanged) {\n        this.iiifContentSearchService.search(this.currentManifest, this.q);\n      }\n      if (canvasIndexChanged) {\n        this.viewerService.goToCanvas(this.canvasIndex, true);\n      }\n    }\n  }\n\n  @HostListener('keyup', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('drop', ['$event'])\n  public onDrop(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.config.isDropEnabled) {\n      const url = event.dataTransfer.getData('URL');\n      const params = new URL(url).searchParams;\n      const manifestUri = params.get('manifest');\n      const startCanvasId = params.get('canvas');\n      if (manifestUri) {\n        this.manifestUri = manifestUri.startsWith('//')\n          ? `${location.protocol}${manifestUri}`\n          : manifestUri;\n        this.loadManifest();\n        if (startCanvasId) {\n          this.manifestChanged.pipe(take(1)).subscribe(manifest => {\n            const canvasIndex = manifest.sequences[0].canvases.findIndex(\n              c => c.id === startCanvasId\n            );\n            if (canvasIndex !== -1) {\n              setTimeout(() => {\n                this.viewerService.goToCanvas(canvasIndex, true);\n              }, 0);\n            }\n          });\n        }\n      }\n    } else {\n      this.snackBar.open(this.intl.dropDisabled, null, {\n        duration: 3000\n      });\n    }\n  }\n\n  @HostListener('dragover', ['$event'])\n  public onDragOver(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  @HostListener('dragleave', ['$event'])\n  public onDragLeave(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n    this.cleanup();\n    this.iiifManifestService.destroy();\n    this.iiifContentSearchService.destroy();\n  }\n\n  toggleToolbarsState(mode: ViewerMode): void {\n    if (this.header && this.footer) {\n      switch (mode) {\n        case ViewerMode.DASHBOARD:\n          this.header.state = this.footer.state = 'show';\n          if (this.config.navigationControlEnabled && this.osdToolbar) {\n            this.osdToolbar.state = 'hide';\n          }\n          break;\n        case ViewerMode.PAGE:\n          this.header.state = this.footer.state = 'hide';\n          if (this.config.navigationControlEnabled && this.osdToolbar) {\n            this.osdToolbar.state = 'show';\n          }\n          break;\n      }\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  ngAfterViewChecked() {\n    this.mimeService.markForCheck();\n  }\n\n  private loadManifest() {\n    this.cleanup();\n    this.iiifManifestService.load(this.manifestUri);\n  }\n\n  private initialize() {\n    this.attributionDialogService.initialize();\n    this.contentsDialogService.initialize();\n    this.contentSearchDialogService.initialize();\n    this.helpDialogService.initialize();\n  }\n\n  private cleanup() {\n    this.viewerState = new ViewerState();\n    this.attributionDialogService.destroy();\n    this.contentsDialogService.destroy();\n    this.contentSearchDialogService.destroy();\n    this.helpDialogService.destroy();\n    this.viewerService.destroy();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest(): void {\n    this.currentManifest = null;\n  }\n\n  private resetErrorMessage(): void {\n    this.errorMessage = null;\n  }\n\n  setClasses() {\n    return {\n      'mode-page': this.modeService.mode === ViewerMode.PAGE,\n      'mode-page-zoomed': this.modeService.mode === ViewerMode.PAGE_ZOOMED,\n      'mode-dashboard': this.modeService.mode === ViewerMode.DASHBOARD,\n      'layout-one-page': this.viewerLayout === ViewerLayout.ONE_PAGE,\n      'layout-two-page': this.viewerLayout === ViewerLayout.TWO_PAGE,\n      'canvas-pressed': this.isCanvasPressed\n    };\n  }\n}\n","<div\n  id=\"mimeViewer\"\n  class=\"viewer-container\"\n  [ngClass]=\"setClasses()\"\n  [hidden]=\"errorMessage !== null\"\n  [tabIndex]=\"tabIndex\"\n>\n  <mime-spinner></mime-spinner>\n  <mime-viewer-header\n    class=\"navbar navbar-header\"\n    #mimeHeader\n  ></mime-viewer-header>\n  <mime-osd-toolbar\n    *ngIf=\"config?.navigationControlEnabled\"\n    #mimeOsdToolbar\n  ></mime-osd-toolbar>\n  <div id=\"openseadragon\"></div>\n  <mime-viewer-footer\n    class=\"navbar navbar-footer\"\n    #mimeFooter\n  ></mime-viewer-footer>\n</div>\n\n<div\n  class=\"error-container\"\n  *ngIf=\"errorMessage\"\n  fxLayout=\"column\"\n  fxLayoutAlign=\"center center\"\n>\n  <span>{{ intl.somethingHasGoneWrongLabel }}</span>\n</div>\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { ViewerComponent } from './viewer/viewer.component';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes, PreloadAllModules } from '@angular/router';\n\nconst appRoutes: Routes = [\n  { path: '', redirectTo: 'demo', pathMatch: 'full' },\n  { path: 'demo', component: ViewerComponent }\n];\n@NgModule({\n  imports: [\n    RouterModule.forRoot(appRoutes, { preloadingStrategy: PreloadAllModules })\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","import { OverlayContainer } from '@angular/cdk/overlay';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MediaChange, MediaObserver } from '@angular/flex-layout';\nimport { Subscription } from 'rxjs';\nimport {\n  SiteTheme,\n  ThemeService\n} from './core/navbar/theme-picker/theme-service/theme.service';\n\n@Component({\n  selector: 'demo-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  watcher: Subscription;\n  sidenavMode = 'side';\n  sidenavIsOpen = false;\n  currentTheme: string;\n\n  constructor(\n    private mediaObserver: MediaObserver,\n    private overlayContainer: OverlayContainer,\n    private themeService: ThemeService\n  ) {}\n\n  ngOnInit(): void {\n    this.watcher = this.mediaObserver.asObservable().subscribe(\n      (changes: MediaChange[]) => {\n        this.layout();\n      }\n    );\n\n    this.layout();\n    this.setTheme(this.themeService.getStoredTheme().name);\n    this.overlayContainer\n      .getContainerElement()\n      .classList.add(this.currentTheme);\n    this.themeService.onThemeUpdate.subscribe((theme: SiteTheme) => {\n      this.setTheme(theme.name);\n    });\n  }\n\n  ngOnDestroy() {\n    this.watcher.unsubscribe();\n  }\n\n  private layout() {\n    if (this.mediaObserver.isActive('lt-md')) {\n      this.sidenavMode = 'over';\n      this.sidenavIsOpen = false;\n    } else {\n      this.sidenavMode = 'side';\n      this.sidenavIsOpen = true;\n    }\n  }\n\n  private setTheme(name: string) {\n    this.overlayContainer\n      .getContainerElement()\n      .classList.remove(this.currentTheme);\n    this.currentTheme = name;\n    this.overlayContainer.getContainerElement().classList.add(name);\n  }\n}\n","<mat-sidenav-container\n  class=\"demo-root mat-app-background\"\n  [ngClass]=\"currentTheme\"\n  fullscreen\n>\n  <mat-sidenav [mode]=\"sidenavMode\" [opened]=\"sidenavIsOpen\" #start role=\"navigation\">\n    <demo-sidenav [sidenav]=\"start\"></demo-sidenav>\n  </mat-sidenav>\n  <main role=\"main\" fxFlexFill>\n    <demo-navbar [sidenav]=\"start\"></demo-navbar>\n    <div class=\"demo-content\"><router-outlet></router-outlet></div>\n  </main>\n</mat-sidenav-container>\n","import { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { BrowserModule, HammerModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NxModule } from '@nrwl/angular';\nimport 'openseadragon';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { CoreModule } from './core/core.module';\nimport { SharedModule } from './shared/shared.module';\nimport { ViewerComponent } from './viewer/viewer.component';\nimport { FullscreenOverlayContainer, OverlayContainer } from \"@angular/cdk/overlay\";\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HammerModule,\n    HttpClientModule,\n    AppRoutingModule,\n    CoreModule,\n    SharedModule,\n    NxModule.forRoot()\n  ],\n  providers: [{provide: OverlayContainer, useClass: FullscreenOverlayContainer}],\n  declarations: [AppComponent, ViewerComponent],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  public static readonly withCredentialsSites = ['api.nb.no', 'api.dev.nb.no'];\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    const withCredentials = this.useWithCredentials(req.url);\n    const authReq = req.clone({ withCredentials: withCredentials });\n    return next.handle(authReq);\n  }\n\n  private useWithCredentials(url: string): boolean {\n    return AuthInterceptor.withCredentialsSites.some(\n      s => url.indexOf(s) !== -1\n    );\n  }\n}\n","import { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { NgModule, Optional, SkipSelf } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SharedModule } from './../shared/shared.module';\nimport { AuthInterceptor } from './auth.interceptor';\nimport { ManifestService } from './manifest-service/manifest.service';\nimport { NavbarComponent } from './navbar/navbar.component';\nimport { ThemePickerComponent } from './navbar/theme-picker/theme-picker.component';\nimport { ThemeService } from './navbar/theme-picker/theme-service/theme.service';\nimport { SidenavComponent } from './sidenav/sidenav.component';\n\n@NgModule({\n  imports: [SharedModule, RouterModule],\n  declarations: [SidenavComponent, NavbarComponent, ThemePickerComponent],\n  exports: [SidenavComponent, NavbarComponent],\n  providers: [\n    ManifestService,\n    ThemeService,\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n  ]\n})\nexport class CoreModule {\n  constructor(\n    @Optional()\n    @SkipSelf()\n    parentModule: CoreModule\n  ) {\n    if (parentModule) {\n      throw new Error(\n        'CoreModule is already loaded. Import it in the AppModule only'\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ManifestMenuItem } from './../../models/manifest-menu-item.model';\n\n@Injectable()\nexport class ManifestService {\n  static readonly manifests: ManifestMenuItem[] = [\n    {\n      label: 'LTR',\n      uri: 'assets/fixtures/presentation/2/simple-ltr-manifest.json'\n    },\n    {\n      label: 'RTL',\n      uri: 'assets/fixtures/presentation/2/simple-rtl-manifest.json'\n    },\n    {\n      label: 'Minimum',\n      uri: 'assets/fixtures/presentation/2/minimum-manifest.json'\n    },\n    {\n      label: 'Downloadable',\n      uri: 'assets/fixtures/presentation/2/downloadble-manifest.json'\n    },\n    {\n      label: 'Searchable',\n      uri: 'assets/fixtures/presentation/2/searchable-manifest.json'\n    },\n    {\n      label: 'License',\n      uri: 'assets/fixtures/presentation/2/license-manifest.json'\n    },\n    {\n      label: 'Attribution',\n      uri: 'assets/fixtures/presentation/2/attribution-manifest.json'\n    },\n    {\n      label: 'Landscape',\n      uri: 'assets/fixtures/presentation/2/landscape-manifest.json'\n    },\n    {\n      label: 'Different sizes',\n      uri: 'assets/fixtures/presentation/2/different-size-manifest.json'\n    },\n    {\n      label: 'Static image',\n      uri: 'assets/fixtures/presentation/2/static-image-manifest.json'\n    }\n  ];\n\n  constructor() {}\n\n  getManifests(): ManifestMenuItem[] {\n    return ManifestService.manifests;\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'demo-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.scss']\n})\nexport class NavbarComponent implements OnInit {\n  @Input() sidenav: MatSidenav;\n  public manifestUri: string;\n\n  constructor(private router: Router) {}\n\n  ngOnInit() {}\n\n  toggle() {\n    this.sidenav.toggle();\n  }\n\n  onSubmit() {\n    this.router.navigate(['demo'], {\n      queryParams: {\n        manifestUri: this.manifestUri\n      }\n    });\n  }\n}\n","<mat-toolbar color=\"primary\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\n  <div>\n    <button mat-icon-button (click)=\"toggle()\" aria-label=\"Menu\">\n      <mat-icon class=\"mat-24\">menu</mat-icon>\n    </button>\n  </div>\n  <div fxFlex=\"grow\" fxFlex.gt-sm=\"500px\">\n    <form (ngSubmit)=\"onSubmit()\" #form=\"ngForm\">\n      <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"10px\">\n        <h1 class=\"cdk-visually-hidden\">DemoWeb</h1>\n        <input\n          fxFlex\n          class=\"manifest-uri\"\n          aria-label=\"Paste the URL of a IIIF manifest here\"\n          placeholder=\"Paste the URL of a IIIF manifest here\"\n          autocomplete=\"off\"\n          [(ngModel)]=\"manifestUri\"\n          name=\"manifestUri\"\n        />\n        <button type=\"submit\" mat-raised-button color=\"accent\">VIEW</button>\n      </div>\n    </form>\n  </div>\n  <div fxFlex=\"grow\" class=\"theme-picker\">\n    <demo-theme-picker></demo-theme-picker>\n  </div>\n</mat-toolbar>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { SiteTheme, ThemeService } from './theme-service/theme.service';\n\n@Component({\n  selector: 'demo-theme-picker',\n  templateUrl: './theme-picker.component.html',\n  styleUrls: ['./theme-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ThemePickerComponent {\n  currentTheme: SiteTheme;\n\n  themes: SiteTheme[];\n\n  constructor(private themeService: ThemeService) {\n    this.themes = themeService.getAllThemes();\n    this.currentTheme = themeService.getStoredTheme();\n    if (this.currentTheme) {\n      this.installTheme(this.currentTheme);\n    }\n  }\n\n  installTheme(theme: SiteTheme) {\n    this.currentTheme = theme;\n\n    if (this.currentTheme) {\n      this.themeService.storeTheme(this.currentTheme);\n    }\n  }\n}\n","<button\n  mat-icon-button\n  [mat-menu-trigger-for]=\"themeMenu\"\n  matTooltip=\"Select a theme!\"\n  aria-label=\"Theme picker\"\n  tabindex=\"-1\"\n>\n  <mat-icon>format_color_fill</mat-icon>\n</button>\n\n<mat-menu\n  class=\"docs-theme-picker-menu\"\n  #themeMenu=\"matMenu\"\n  hasBackdrop=\"false\"\n>\n  <mat-grid-list cols=\"2\">\n    <mat-grid-tile *ngFor=\"let theme of themes\">\n      <div mat-menu-item (click)=\"installTheme(theme)\">\n        <div class=\"docs-theme-picker-swatch\">\n          <mat-icon\n            class=\"docs-theme-chosen-icon\"\n            *ngIf=\"currentTheme.name === theme.name\"\n            >check_circle</mat-icon\n          >\n          <div\n            class=\"docs-theme-picker-primary\"\n            [style.background]=\"theme.primary\"\n          ></div>\n        </div>\n      </div>\n    </mat-grid-tile>\n  </mat-grid-list>\n</mat-menu>\n","import { Injectable, EventEmitter } from '@angular/core';\n\nexport interface SiteTheme {\n  name: string;\n  accent: string;\n  primary: string;\n  isDark?: boolean;\n  isDefault?: boolean;\n}\n\n@Injectable()\nexport class ThemeService {\n  static storageKey = 'docs-theme-storage-current';\n  onThemeUpdate: EventEmitter<SiteTheme> = new EventEmitter<SiteTheme>();\n  private themes: SiteTheme[] = [\n    {\n      primary: '#5d4037',\n      accent: '#b0bec5',\n      name: 'brown-theme',\n      isDark: false,\n      isDefault: true\n    },\n    {\n      primary: '#0277bd',\n      accent: '#01579b',\n      name: 'blue-theme',\n      isDark: false\n    },\n    {\n      primary: '#18ffff',\n      accent: '#b2ff59',\n      name: 'cyan-theme',\n      isDark: true\n    },\n    {\n      primary: '#673ab7',\n      accent: '#ffd740',\n      name: 'purple-theme',\n      isDark: true\n    }\n  ];\n\n  getAllThemes() {\n    return this.themes;\n  }\n\n  storeTheme(theme: SiteTheme) {\n    try {\n      window.localStorage[ThemeService.storageKey] = JSON.stringify(theme);\n    } catch (e) {}\n\n    this.onThemeUpdate.emit(theme);\n  }\n\n  getStoredTheme(): SiteTheme {\n    try {\n      return JSON.parse(\n        window.localStorage[ThemeService.storageKey] || this.getDefaultTheme()\n      );\n    } catch (e) {\n      return this.getDefaultTheme();\n    }\n  }\n\n  clearStorage() {\n    try {\n      window.localStorage.removeItem(ThemeService.storageKey);\n    } catch (e) {}\n  }\n\n  private getDefaultTheme() {\n    return this.themes.filter(t => t.isDefault)[0];\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { ManifestMenuItem } from './../../models/manifest-menu-item.model';\nimport { ManifestService } from './../manifest-service/manifest.service';\n\n@Component({\n  selector: 'demo-sidenav',\n  templateUrl: './sidenav.component.html',\n  styleUrls: ['./sidenav.component.scss']\n})\nexport class SidenavComponent implements OnInit {\n  @Input() sidenav: MatSidenav;\n\n  manifests: ManifestMenuItem[];\n\n  constructor(private manifestService: ManifestService) {}\n\n  ngOnInit() {\n    this.manifests = this.manifestService.getManifests();\n  }\n\n  close() {\n    if (this.sidenav.mode === 'over') {\n      this.sidenav.close();\n    }\n  }\n}\n","<h1>Manifest</h1>\n<mat-nav-list aria-label=\"Sample manifests\">\n  <a\n    *ngFor=\"let manifest of manifests\"\n    mat-list-item\n    [routerLink]=\"['demo']\"\n    [queryParams]=\"{ manifestUri: manifest.uri }\"\n    routerLinkActive=\"active\"\n    (click)=\"close()\"\n  >\n    {{ manifest.label }}\n  </a>\n  <a\n    mat-list-item\n    href=\"https://www.nb.no/items/f080d07ddce0f9ebd2615c44e040197d?manifest=https://api.nb.no/catalog/v1/iiif/f080d07ddce0f9ebd2615c44e040197d/manifest\"\n    target=\"_blank\"\n  >\n    <img\n      src=\"assets/logo-iiif.png\"\n      alt=\"IIIF Drag-n-drop\"\n      class=\"logo-iiif\"\n    /><span>Drag and drop</span>\n  </a>\n  <a\n    mat-list-item\n    href=\"https://www.nb.no/items/f080d07ddce0f9ebd2615c44e040197d?manifest=https://api.nb.no/catalog/v1/iiif/f080d07ddce0f9ebd2615c44e040197d/manifest&canvas=https://api.nb.no/catalog/v1/iiif/f080d07ddce0f9ebd2615c44e040197d/canvas/URN:NBN:no-nb_digibok_2011070412003_0020\"\n    target=\"_blank\"\n  >\n    <img\n      src=\"assets/logo-iiif.png\"\n      alt=\"IIIF Drag-n-drop\"\n      class=\"logo-iiif\"\n    /><span>Drag and drop with canvas</span>\n  </a>\n</mat-nav-list>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  exports: [\n    MatButtonModule,\n    MatIconModule,\n    MatListModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatRadioModule,\n    MatCheckboxModule\n  ]\n})\nexport class DemoMaterialModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport { MimeModule } from '@nationallibraryofnorway/ngx-mime';\nimport { DemoMaterialModule } from './demoMaterialModule';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    FlexLayoutModule,\n    DemoMaterialModule,\n    MimeModule\n  ],\n  declarations: [],\n  exports: [\n    CommonModule,\n    FormsModule,\n    FlexLayoutModule,\n    DemoMaterialModule,\n    MimeModule\n  ]\n})\nexport class SharedModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  MimeViewerConfig,\n  MimeViewerMode\n} from '@nationallibraryofnorway/ngx-mime';\nimport { ManifestService } from './../core/manifest-service/manifest.service';\n\n@Component({\n  templateUrl: './viewer.component.html',\n  styleUrls: ['./viewer.component.scss']\n})\nexport class ViewerComponent implements OnInit, OnDestroy {\n  public manifestUri: string;\n  public config = new MimeViewerConfig({\n    attributionDialogEnabled: true,\n    attributionDialogHideTimeout: -1,\n    navigationControlEnabled: true,\n    preserveZoomOnCanvasGroupChange: true,\n    startOnTopOnCanvasGroupChange: true,\n    isDropEnabled: true,\n    initViewerMode: MimeViewerMode.PAGE\n  });\n  private sub: any;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private manifestService: ManifestService\n  ) {}\n\n  ngOnInit() {\n    this.sub = this.route.queryParams.subscribe(params => {\n      this.manifestUri = params['manifestUri'];\n      if (!this.manifestUri) {\n        this.router.navigate(['demo'], {\n          queryParams: {\n            manifestUri: this.manifestService.getManifests()[0].uri\n          }\n        });\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n}\n","<div class=\"viewer-container\">\n  <mime-viewer [manifestUri]=\"manifestUri\" [config]=\"config\"></mime-viewer>\n</div>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"sourceRoot":"webpack:///"}